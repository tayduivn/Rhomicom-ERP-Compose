<?php
$canAddTrns = test_prmssns($dfltPrvldgs[37], $mdlNm);
$canEdtTrns = test_prmssns($dfltPrvldgs[38], $mdlNm);
$canDelTrns = test_prmssns($dfltPrvldgs[39], $mdlNm);
$canAthrz = test_prmssns($dfltPrvldgs[40], $mdlNm);
$canVwRcHstry = test_prmssns("View Record History", $mdlNm);

$pageNo = isset($_POST['pageNo']) ? cleanInputData($_POST['pageNo']) : 1;
$lmtSze = isset($_POST['limitSze']) ? cleanInputData($_POST['limitSze']) : 10;
$sortBy = isset($_POST['sortBy']) ? cleanInputData($_POST['sortBy']) : "";

$qInvalidOnly = "false";
$qUnathrzdOnly = "false";
$qStrtDte = substr($gnrlTrnsDteDMYHMS, 0, 11) . " 00:00:00";
$qEndDte = substr($gnrlTrnsDteDMYHMS, 0, 11) . " 23:59:59";

$srchFor = "";
$srchIn = "";
//var_dump($_POST);
if (isset($_POST['qInvalidOnly'])) {
    $qInvalidOnly = cleanInputData($_POST['qInvalidOnly']);
}
if (isset($_POST['qUnathrzdOnly'])) {
    $qUnathrzdOnly = cleanInputData($_POST['qUnathrzdOnly']);
}
if (isset($_POST['qStrtDte'])) {
    $qStrtDte = cleanInputData($_POST['qStrtDte']);
    if (strlen($qStrtDte) == 11) {
        $qStrtDte = substr($qStrtDte, 0, 11) . " 00:00:00";
    } else {
        $qStrtDte = "01-Jan-1900 00:00:00";
    }
}
if (isset($_POST['qEndDte'])) {
    $qEndDte = cleanInputData($_POST['qEndDte']);
    if (strlen($qEndDte) == 11) {
        $qEndDte = substr($qEndDte, 0, 11) . " 23:59:59";
    } else {
        $qEndDte = "31-Dec-4000 23:59:59";
    }
}

if (isset($_POST['searchfor'])) {
    $srchFor = cleanInputData($_POST['searchfor']);
}

if (isset($_POST['searchin'])) {
    $srchIn = cleanInputData($_POST['searchin']);
}
if (strpos($srchFor, "%") === FALSE) {
    $srchFor = " " . $srchFor . " ";
    $srchFor = str_replace(" ", "%", $srchFor);
}

if (array_key_exists('lgn_num', get_defined_vars())) {
    if ($lgn_num > 0 && $canview === true) {
        if ($qstr == "DELETE") {
            if ($actyp == 1) {
                /* Delete VMS Trns */
                $trnsHdrID = isset($_POST['trnsHdrID']) ? cleanInputData($_POST['trnsHdrID']) : -1;
                $trnsNum = isset($_POST['trnsNum']) ? cleanInputData($_POST['trnsNum']) : "";
                if ($canDelTrns) {
                    echo deleteVMSTrnsHdr($trnsHdrID, $trnsNum);
                } else {
                    restricted();
                }
            } else if ($actyp == 2) {
                /* Delete Attachment */
                $attchmentID = isset($_POST['attchmentID']) ? cleanInputData($_POST['attchmentID']) : -1;
                $docTrnsNum = isset($_POST['docTrnsNum']) ? cleanInputData($_POST['docTrnsNum']) : -1;
                if ($canEdtTrns) {
                    echo deleteVMSDoc($attchmentID, $docTrnsNum);
                } else {
                    restricted();
                }
            } else if ($actyp == 3) {
                /* Delete VMS Trns Lines */
                $trnsLnID = isset($_POST['trnsLnID']) ? cleanInputData($_POST['trnsLnID']) : -1;
                $itemName = isset($_POST['itemName']) ? cleanInputData($_POST['itemName']) : -1;
                $srcDocType = "";
                if ($canDelTrns) {
                    echo deleteVMSTrnsLine($trnsLnID, $srcDocType, $itemName);
                } else {
                    restricted();
                }
            } else if ($actyp == 4) {
                /* Delete VMS Pymt Lines */
                $trnsLnID = isset($_POST['trnsLnID']) ? cleanInputData($_POST['trnsLnID']) : -1;
                $itemName = isset($_POST['itemName']) ? cleanInputData($_POST['itemName']) : -1;
                $srcDocType = "";
                if ($canDelTrns) {
                    echo deleteVMSPymtLine($trnsLnID, $srcDocType, $itemName);
                } else {
                    restricted();
                }
            } else if ($actyp == 5) {
                /* Delete Petty Cash Lines */
                $trnsLnID = isset($_POST['trnsLnID']) ? cleanInputData($_POST['trnsLnID']) : -1;
                $acntName = isset($_POST['acntName']) ? cleanInputData($_POST['acntName']) : -1;
                $srcDocType = "Vault/GL Account Transfers";
                if ($canDelTrns) {
                    echo delVmsExpnsTrnsLine($trnsLnID, $srcDocType, $acntName);
                } else {
                    restricted();
                }
            } else if ($actyp == 40) {
                $vmsTrnsHdrID = isset($_POST['vmsTrnsHdrID']) ? cleanInputData($_POST['vmsTrnsHdrID']) : -1;
                echo withdrawVMSTrnsRqst($vmsTrnsHdrID);
            }
        } else if ($qstr == "FINALIZE") {
            if ($actyp == 40) {
                $vmsTrnsHdrID = isset($_POST['vmsTrnsHdrID']) ? cleanInputData($_POST['vmsTrnsHdrID']) : -1;
                echo authorizeVMSTrnsRqst($vmsTrnsHdrID);
            }
        } else if ($qstr == "UPDATE") {
            if ($actyp == 1) {
                //VMS Transaction
                header("content-type:application/json");
                $orgid = $_SESSION['ORG_ID'];
                $vmsTrnsHdrID = isset($_POST['vmsTrnsHdrID']) ? cleanInputData($_POST['vmsTrnsHdrID']) : -1;
                if (!($canEdtTrns || $canAddTrns)) {
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Permission Denied!</span>";
                    echo json_encode($arr_content);
                    exit();
                }
                $vmsTrnsClsfctn = isset($_POST['vmsTrnsClsfctn']) ? cleanInputData($_POST['vmsTrnsClsfctn']) : "";
                $slctdVMSTrnsLines = isset($_POST['slctdVMSTrnsLines']) ? cleanInputData($_POST['slctdVMSTrnsLines']) : "";
                $slctdExpnsTrnsLines = isset($_POST['slctdExpnsTrnsLines']) ? cleanInputData($_POST['slctdExpnsTrnsLines']) : "";
                $vmsTrnsDesc = isset($_POST['vmsTrnsDesc']) ? cleanInputData($_POST['vmsTrnsDesc']) : "";
                $vmsTrnsNum = isset($_POST['vmsTrnsNum']) ? cleanInputData($_POST['vmsTrnsNum']) : "";
                $vmsTrnsType = isset($_POST['vmsTrnsType']) ? cleanInputData($_POST['vmsTrnsType']) : "";

                $vmsTrnsDate = isset($_POST['vmsTrnsDate']) ? cleanInputData($_POST['vmsTrnsDate']) : "";
                $vmsPymtCrncyNm = isset($_POST['vmsPymtCrncyNm']) ? cleanInputData($_POST['vmsPymtCrncyNm']) : "";
                $myPymntValsTtlVal = isset($_POST['myPymntValsTtlVal']) ? (float) cleanInputData($_POST['myPymntValsTtlVal']) : 0;
                $vmsTrnsCrncyNm = isset($_POST['vmsTrnsCrncyNm']) ? cleanInputData($_POST['vmsTrnsCrncyNm']) : "";
                $vmsTrnsCrncyID = getPssblValID($vmsTrnsCrncyNm, getLovID("Currencies"));
                $vmsPymtCrncyID = getPssblValID($vmsPymtCrncyNm, getLovID("Currencies"));
                $pymtCrncyExchngRate = 0;
                $ttlVMSDocAmntVal = isset($_POST['ttlVMSDocAmntVal']) ? (float) cleanInputData($_POST['ttlVMSDocAmntVal']) : 0;
                $myCptrdValsTtlVal = isset($_POST['myCptrdValsTtlVal']) ? (float) cleanInputData($_POST['myCptrdValsTtlVal']) : 0;
                $vmsDfltSrcVltID = isset($_POST['vmsDfltSrcVltID']) ? (float) cleanInputData($_POST['vmsDfltSrcVltID']) : -1;
                $vmsDfltSrcCageID = isset($_POST['vmsDfltSrcCageID']) ? (float) cleanInputData($_POST['vmsDfltSrcCageID']) : -1;
                $vmsDfltDestVltID = isset($_POST['vmsDfltDestVltID']) ? (float) cleanInputData($_POST['vmsDfltDestVltID']) : -1;
                $vmsDfltDestCageID = isset($_POST['vmsDfltDestCageID']) ? (float) cleanInputData($_POST['vmsDfltDestCageID']) : -1;
                $vmsCstmrID = isset($_POST['vmsCstmrID']) ? (float) cleanInputData($_POST['vmsCstmrID']) : -1;
                $vmsCstmrSiteID = isset($_POST['vmsCstmrSiteID']) ? (float) cleanInputData($_POST['vmsCstmrSiteID']) : -1;
                $vmsBrnchLocID = isset($_POST['vmsBrnchLocID']) ? (float) cleanInputData($_POST['vmsBrnchLocID']) : -1;
                $shdSbmt = isset($_POST['shdSbmt']) ? (float) cleanInputData($_POST['shdSbmt']) : 0;
                $vmsTrnsPrsn = isset($_POST['vmsTrnsPrsn']) ? cleanInputData($_POST['vmsTrnsPrsn']) : "";
                $vmsChequeNo = isset($_POST['vmsChequeNo']) ? cleanInputData($_POST['vmsChequeNo']) : "";
                $vmsOffctStaffLocID = isset($_POST['vmsOffctStaffLocID']) ? cleanInputData($_POST['vmsOffctStaffLocID']) : "";
                $vmsOffctStaffPrsID = getPersonID($vmsOffctStaffLocID);
                $fnccurid = getOrgFuncCurID($orgID);
                //$fnccurnm = getPssblValNm($fnccurid);

                if ($myCptrdValsTtlVal != $ttlVMSDocAmntVal) {
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Transaction Header Total Amount must agree with Transaction lines Total!</span>";
                    echo json_encode($arr_content);
                    exit();
                }
                $canViewTrnsType = false;
                $trnsTypIdx = findArryIdx($trnsTypes, $vmsTrnsType);
                if ($trnsTypIdx >= 0 && $trnsTypIdx <= 3) {
                    $canViewTrnsType = test_prmssns($dfltPrvldgs[18 + $trnsTypIdx], $mdlNm);
                    if (!($canViewTrnsType)) {
                        $arr_content['percent'] = 100;
                        $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Permission Denied!</span>";
                        echo json_encode($arr_content);
                        exit();
                    }
                    if ($vmsDfltSrcVltID <= 0 || $vmsDfltSrcCageID <= 0 || $vmsDfltDestVltID <= 0 || $vmsDfltDestCageID <= 0) {
                        $arr_content['percent'] = 100;
                        $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Source and Destination Vaults/Cages cannot be Empty for this Trns. Type!</span>";
                        echo json_encode($arr_content);
                        exit();
                    }
                } else if ($trnsTypIdx >= 4 && $trnsTypIdx <= 7) {
                    $canViewTrnsType = test_prmssns($dfltPrvldgs[10 + $trnsTypIdx], $mdlNm);
                    if (!($canViewTrnsType)) {
                        $arr_content['percent'] = 100;
                        $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Permission Denied!</span>";
                        echo json_encode($arr_content);
                        exit();
                    }
                    if (($trnsTypIdx == 4 || $trnsTypIdx == 6) && ($vmsDfltSrcVltID > 0 || $vmsDfltSrcCageID > 0 || $vmsDfltDestVltID <= 0 || $vmsDfltDestCageID <= 0)) {
                        $arr_content['percent'] = 100;
                        $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Destination Vaults/Cages cannot be Empty for this Trns. Type but Source Vaults/Cages Must be Empty!</span>";
                        echo json_encode($arr_content);
                        exit();
                    } else if (($trnsTypIdx == 5 || $trnsTypIdx == 7) && ($vmsDfltSrcVltID <= 0 || $vmsDfltSrcCageID <= 0 || $vmsDfltDestVltID > 0 || $vmsDfltDestCageID >
                            0)) {
                        $arr_content['percent'] = 100;
                        $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Source Vaults/Cages cannot be Empty for this Trns. Type but Destination Vaults/Cages Must be Empty!</span>";
                        echo json_encode($arr_content);
                        exit();
                    }
                    if ($trnsTypIdx >= 4 && $trnsTypIdx <= 6) {
                        if ($vmsCstmrID <= 0) {
                            $arr_content['percent'] = 100;
                            $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Client/Vendor cannot be Empty for this Trns. Type!</span>";
                            echo json_encode($arr_content);
                            exit();
                        }
                    }
                } else if ($trnsTypIdx >= 8 && $trnsTypIdx <= 10) {
                    $canViewTrnsType = test_prmssns($dfltPrvldgs[35 + $trnsTypIdx], $mdlNm);
                    if (!($canViewTrnsType)) {
                        $arr_content['percent'] = 100;
                        $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Permission Denied!</span>";
                        echo json_encode($arr_content);
                        exit();
                    }
                    if (($trnsTypIdx == 8) && ($vmsDfltSrcVltID <= 0 || $vmsDfltSrcCageID <= 0)) {
                        $arr_content['percent'] = 100;
                        $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Source Vaults/Cages cannot be Empty for this Trns. Type!</span>";
                        echo json_encode($arr_content);
                        exit();
                    } else if (($trnsTypIdx == 9) && ($vmsDfltDestVltID <= 0 || $vmsDfltDestCageID <= 0)) {
                        $arr_content['percent'] = 100;
                        $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Source and Destination Vaults/Cages cannot be Empty for this Trns. Type!</span>";
                        echo json_encode($arr_content);
                        exit();
                    } else if (($trnsTypIdx == 10) && ($vmsDfltDestCageID <= 0)) {
                        $arr_content['percent'] = 100;
                        $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Please provide Destination Vaults/Cages!</span>";
                        echo json_encode($arr_content);
                        exit();
                    } else if (($trnsTypIdx == 10) && ($vmsDfltSrcCageID > 0)) {
                        $arr_content['percent'] = 100;
                        $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Cannot use Source Vaults/Cages in this Transaction Type!</span>";
                        echo json_encode($arr_content);
                        exit();
                    } /* else if (($trnsTypIdx == 10) && ($ttlVMSDocAmntVal < 0)) {
                      $arr_content['percent'] = 100;
                      $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Total amount cannot be negative this Transaction Type!</span>";
                      echo json_encode($arr_content);
                      exit();
                      } */
                    if ($trnsTypIdx == 8) {
                        if ($vmsCstmrID <= 0) {
                            $arr_content['percent'] = 100;
                            $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Client/Vendor cannot be Empty for this Trns. Type!</span>";
                            echo json_encode($arr_content);
                            exit();
                        }
                        if ($shdSbmt > 0) {
                            $myPymntValsTtlVal1 = (float) getGnrlRecNm("vms.vms_transaction_pymnt", "trans_hdr_id",
                                            "SUM((CASE WHEN src_cage_shelve_id>0 THEN -1*doc_qty*unit_value ELSE doc_qty*unit_value END))",
                                            $vmsTrnsHdrID);
                            if ($myPymntValsTtlVal1 == 0 || $myPymntValsTtlVal != $myPymntValsTtlVal1) {
                                $arr_content['percent'] = 100;
                                $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Payment Information must be Captured First!<br/>Expected Payment:" . number_format($myPymntValsTtlVal,
                                                2) . "Captured Payment:" . number_format($myPymntValsTtlVal1, 2) . "</span>";
                                echo json_encode($arr_content);
                                exit();
                            }
                        }
                    }
                    if ($trnsTypIdx == 9) {
                        if ($vmsCstmrID <= 0) {
                            $arr_content['percent'] = 100;
                            $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Client/Vendor cannot be Empty for this Trns. Type!</span>";
                            echo json_encode($arr_content);
                            exit();
                        }
                        if ($shdSbmt > 0) {
                            $myPymntValsTtlVal1 = (float) getGnrlRecNm("vms.vms_transaction_pymnt", "trans_hdr_id",
                                            "SUM((CASE WHEN src_cage_shelve_id>0 THEN doc_qty*unit_value ELSE -1*doc_qty*unit_value END))",
                                            $vmsTrnsHdrID);
                            if ($myPymntValsTtlVal1 == 0 || $myPymntValsTtlVal != $myPymntValsTtlVal1) {
                                $arr_content['percent'] = 100;
                                $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>NEW Payment Information must be Captured First!<br/>Expected Payment:" . number_format($myPymntValsTtlVal,
                                                2) . "Captured Payment:" . number_format($myPymntValsTtlVal1, 2) . "</span>";
                                echo json_encode($arr_content);
                                exit();
                            }
                        }
                    }
                } else if ($trnsTypIdx == 11) {
                    $canViewTrnsType = test_prmssns($dfltPrvldgs[52], $mdlNm);
                    if (!($canViewTrnsType)) {
                        $arr_content['percent'] = 100;
                        $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Permission Denied!</span>";
                        echo json_encode($arr_content);
                        exit();
                    }
                    if ($ttlVMSDocAmntVal != 0) {
                        $arr_content['percent'] = 100;
                        $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Cash Exchange Transactions must net out to Zero!</span>";
                        echo json_encode($arr_content);
                        exit();
                    }
                } else if ($trnsTypIdx == 12) {
                    $canViewTrnsType = test_prmssns($dfltPrvldgs[53], $mdlNm);
                    if (!($canViewTrnsType)) {
                        $arr_content['percent'] = 100;
                        $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Permission Denied!</span>";
                        echo json_encode($arr_content);
                        exit();
                    }
                    if (($vmsDfltSrcVltID <= 0 || $vmsDfltSrcCageID <= 0)) {
                        $arr_content['percent'] = 100;
                        $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Source Vaults/Cages cannot be Empty for this Trns. Type!</span>";
                        echo json_encode($arr_content);
                        exit();
                    }
                } else if ($trnsTypIdx == 13) {
                    $canViewTrnsType = test_prmssns($dfltPrvldgs[53], $mdlNm);
                    if (!($canViewTrnsType)) {
                        $arr_content['percent'] = 100;
                        $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Permission Denied!</span>";
                        echo json_encode($arr_content);
                        exit();
                    }
                    if (($vmsDfltDestVltID <= 0 || $vmsDfltDestCageID <= 0)) {
                        $arr_content['percent'] = 100;
                        $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Destination Vaults/Cages cannot be Empty for this Trns. Type!</span>";
                        echo json_encode($arr_content);
                        exit();
                    }
                } else {
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Permission Denied!</span>";
                    echo json_encode($arr_content);
                    exit();
                }
                $oldVmsTrnsHdrID = getTrnsHdrID($vmsTrnsNum);
                if ($vmsTrnsNum != "" && $vmsTrnsCrncyNm != "" && $vmsTrnsDesc != "" && $vmsTrnsDate != "" && $vmsTrnsHdrID > 0 && $vmsTrnsCrncyID > 0 &&
                        ($oldVmsTrnsHdrID == $vmsTrnsHdrID)) {
                    if ($myPymntValsTtlVal > 0) {
                        $pymtCrncyExchngRate = $ttlVMSDocAmntVal / $myPymntValsTtlVal;
                    }
                    $affctd1 = updateVMSTrnsHdr($vmsTrnsHdrID, cnvrtDMYTmToYMDTm($vmsTrnsDate), $vmsTrnsNum, $vmsTrnsType, $vmsTrnsDesc, $vmsCstmrID,
                            $vmsCstmrSiteID, $vmsTrnsClsfctn, $vmsBrnchLocID, $ttlVMSDocAmntVal, $vmsDfltSrcVltID, $vmsDfltSrcCageID,
                            $vmsDfltDestVltID, $vmsDfltDestCageID, $vmsTrnsCrncyID, $vmsPymtCrncyID, $myPymntValsTtlVal, $pymtCrncyExchngRate,
                            $vmsTrnsPrsn, $vmsOffctStaffPrsID, $vmsChequeNo);

                    $dfltSrcAstAcntID = (int) getGnrlRecNm("inv.inv_shelf", "line_id", "inv_asset_acct_id", $vmsDfltSrcCageID);
                    $dfltDestAstAcntID = (int) getGnrlRecNm("inv.inv_shelf", "line_id", "inv_asset_acct_id", $vmsDfltDestCageID);
                    $expenseAcntID = -1;
                    $affctd = 0;
                    $variousRows = explode("|", trim($slctdVMSTrnsLines, "|"));
                    //var_dump($variousRows);
                    for ($z = 0; $z < count($variousRows); $z++) {
                        $crntRow = explode("~", $variousRows[$z]);
                        if (count($crntRow) == 11) {
                            $lnTrnsLnID = (float) cleanInputData1($crntRow[0]);
                            $lnItmID = (int) cleanInputData1($crntRow[1]);
                            $lnSrcCageID = (int) cleanInputData1($crntRow[2]);
                            $lnDstCageID = (int) cleanInputData1($crntRow[3]);
                            $lnQty = (int) cleanInputData1($crntRow[4]);
                            $lnUntVal = (float) cleanInputData1($crntRow[5]);
                            $lnPymntCrncyRate = (float) cleanInputData1($crntRow[6]);
                            $lnSrcItemState = cleanInputData1($crntRow[7]);
                            $lnDstItemState = cleanInputData1($crntRow[8]);
                            $lnBaseUoMID = (int) cleanInputData1($crntRow[10]);
                            $orgnlVoidedLnID = -1;
                            $lineRmrk = cleanInputData1($crntRow[9]);
                            if ($lineRmrk == "") {
                                $lineRmrk = $vmsTrnsDesc;
                            }
                            $srcVltID = $vmsDfltSrcVltID;
                            $dstVltID = $vmsDfltDestVltID;
                            if ($lnSrcCageID > 0) {
                                $srcVltID = (float) getGnrlRecNm("inv.inv_shelf", "line_id", "store_id", $lnSrcCageID);
                                $lnSrcItemState = getGnrlRecNm("inv.inv_shelf", "line_id", "dflt_item_state", $lnSrcCageID);
                            }
                            if ($lnDstCageID > 0) {
                                $dstVltID = (float) getGnrlRecNm("inv.inv_shelf", "line_id", "store_id", $lnDstCageID);
                                $lnDstItemState = getGnrlRecNm("inv.inv_shelf", "line_id", "dflt_item_state", $lnDstCageID);
                            }
                            if ($lnSrcCageID > 0) {
                                $cageMngr = getCageMngrID($lnSrcCageID);
                                if ($cageMngr != $prsnid && $cageMngr > 0) {
                                    $arr_content['percent'] = 100;
                                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Sorry, such Transactions must be Initiated by the Cage/Till Owner!</span>";
                                    echo json_encode($arr_content);
                                    exit();
                                }
                            }
                            if ($lnItmID > 0) {
                                $srcAstAcntID = (int) getGnrlRecNm("inv.inv_shelf", "line_id", "inv_asset_acct_id", $lnSrcCageID);
                                $destAstAcntID = (int) getGnrlRecNm("inv.inv_shelf", "line_id", "inv_asset_acct_id", $lnDstCageID);
                                $lbltyAcntID = -1;
                                if ($vmsCstmrID > 0) {
                                    $lbltyAcntID = (int) getGnrlRecNm("scm.scm_cstmr_suplr", "cust_sup_id", "dflt_pybl_accnt_id", $vmsCstmrID);
                                } else {
                                    $lbltyAcntID = get_DfltRcptLbltyAcnt($orgID);
                                }
                                $expenseAcntID = (int) getGnrlRecNm("inv.inv_itm_list", "item_id", "expense_accnt_id", $lnItmID);
                                $cogsAcntID = (int) getGnrlRecNm("inv.inv_itm_list", "item_id", "cogs_acct_id", $lnItmID);
                                $revnuAcntID = (int) getGnrlRecNm("inv.inv_itm_list", "item_id", "sales_rev_accnt_id", $lnItmID);
                                if ($lnTrnsLnID <= 0) {
                                    $lnTrnsLnID = getNewVMSTrnsLineID();
                                    $affctd += createVMSTrnsLine($lnTrnsLnID, $vmsTrnsHdrID, $lnItmID, $srcVltID, $lnSrcCageID, $dstVltID,
                                            $lnDstCageID, $lnQty, $vmsTrnsCrncyID, $lnUntVal, $orgnlVoidedLnID, $lineRmrk, $srcAstAcntID,
                                            $destAstAcntID, $lbltyAcntID, $expenseAcntID, $lnPymntCrncyRate, $lnBaseUoMID, $cogsAcntID, $revnuAcntID,
                                            $lnSrcItemState, $lnDstItemState, $lineRmrk);
                                } else {
                                    $affctd += updateVMSTrnsLine($lnTrnsLnID, $lnItmID, $srcVltID, $lnSrcCageID, $dstVltID, $lnDstCageID, $lnQty,
                                            $vmsTrnsCrncyID, $lnUntVal, $lineRmrk, $srcAstAcntID, $destAstAcntID, $lbltyAcntID, $expenseAcntID,
                                            $lnPymntCrncyRate, $lnBaseUoMID, $cogsAcntID, $revnuAcntID, $lnSrcItemState, $lnDstItemState, $lineRmrk);
                                }
                            }
                        }
                    }

                    $affctd2 = 0;
                    $variousRows = explode("|", trim($slctdExpnsTrnsLines, "|"));
                    //var_dump($_POST);
                    $dfltExpnsAcID = $expenseAcntID;
                    if ($dfltExpnsAcID <= 0) {
                        $dfltExpnsAcID = get_DfltExpnsAcnt($orgID);
                    }
                    for ($z = 0; $z < count($variousRows); $z++) {
                        $crntRow = explode("~", $variousRows[$z]);
                        if (count($crntRow) == 6) {
                            $lnTrnsLnID = (float) cleanInputData1($crntRow[0]);
                            $lnAccountID = (int) cleanInputData1($crntRow[1]);
                            if (getAccntType($lnAccountID) == "EX") {
                                $arr_content['percent'] = 100;
                                $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Sorry, Expenditure Accounts cannot be Impacted from this Module!</span>";
                                echo json_encode($arr_content);
                                exit();
                            }
                            $lnEntrdCrncy = cleanInputData1($crntRow[2]);
                            $lnEntrdCrncyID = getPssblValID($lnEntrdCrncy, getLovID("Currencies"));
                            $lnEntrdRate = (float) cleanInputData1($crntRow[3]);
                            $lnTtlAmnt = (float) cleanInputData1($crntRow[4]);
                            $lnLineDesc = cleanInputData1($crntRow[5]);
                            $cageAstAcntID = $dfltExpnsAcID;
                            /* $cageAstAcntID = $dfltSrcAstAcntID;
                              if ($trnsTypIdx == 13) {
                              $cageAstAcntID = $dfltDestAstAcntID;
                              } */
                            if ($lnAccountID > 0) {
                                $expenseAcntID = $lnAccountID;
                                $acntCrncyID = getAccountLovCrncyID($expenseAcntID);
                                $funcCrncyExRate = 1;
                                $acntCrncyExRate = 1;
                                if ($lnTrnsLnID <= 0) {
                                    $affctd2 += createVMSExpnsTrnsLine($lnLineDesc, $cageAstAcntID, $expenseAcntID, $lnEntrdCrncyID, $fnccurid,
                                            $acntCrncyID, $funcCrncyExRate, $acntCrncyExRate, $lnTtlAmnt, $vmsTrnsHdrID, $trnsTypIdx);
                                } else {
                                    $affctd2 += updateVMSExpnsTrnsLine($lnTrnsLnID, $lnLineDesc, $cageAstAcntID, $expenseAcntID, $lnEntrdCrncyID,
                                            $fnccurid, $acntCrncyID, $funcCrncyExRate, $acntCrncyExRate, $lnTtlAmnt, $vmsTrnsHdrID, $trnsTypIdx);
                                }
                            }
                        }
                    }

                    $errMsg = "";
                    calcAllVMSLinesTtlVals($vmsTrnsHdrID);
                    if ($shdSbmt > 0 && $affctd1 > 0) {
                        if (isVMSTrnsQtyVld($vmsTrnsHdrID, $errMsg)) {
                            $srcDocID = $vmsTrnsHdrID;
                            $srcDocType = "Vault Transactions";
                            $routingID = -1;
                            $inptSlctdRtngs = "";
                            $actionToPrfrm = "Initiate";
                            $errMsg .= "<br/><br/>" . vmsTrnsReqMsgActns($routingID, $inptSlctdRtngs, $actionToPrfrm, $srcDocID, $srcDocType);
                        } else {
                            $errMsg .= "<br/><span style=\"color:red;font-weight:bold;\">Error Occured!<br/>Validation Failed! Kindly ensure that you have the Requested Quantities in the various Source Cages and Check Transaction Totals!</span><br/>";
                        }
                    }
                    $nwmsg = "";
                    if ($trnsTypIdx == 12 || $trnsTypIdx == 13) {
                        $nwmsg = $affctd2 . " GL Transaction Lines Saved!<br/>";
                    }
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:green;\"><i class=\"fa fa-check\" aria-hidden=\"true\"></i></span>VMS Transaction Successfully Saved!<br/>" . $affctd . " Transaction Lines Saved!<br/>" . $nwmsg . $errMsg;
                    echo json_encode($arr_content);
                    exit();
                } else {
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Data Supplied is Incomplete or Invalid at some fields!</span>";
                    echo json_encode($arr_content);
                    exit();
                }
            } else if ($actyp == 2) {
                //Upload Attachement
                header("content-type:application/json");
                $attchmentID = isset($_POST['attchmentID']) ? cleanInputData($_POST['attchmentID']) : -1;
                $sbmtdVmsTrnsHdrID = isset($_POST['sbmtdVmsTrnsHdrID']) ? cleanInputData($_POST['sbmtdVmsTrnsHdrID']) : -1;
                if (!($canEdtTrns || $canAddTrns)) {
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Permission Denied!</span>";
                    echo json_encode($arr_content);
                    exit();
                }
                $docCtrgrName = isset($_POST['docCtrgrName']) ? cleanInputData($_POST['docCtrgrName']) : "";
                $nwImgLoc = "";
                $errMsg = "";
                $pkID = $sbmtdVmsTrnsHdrID;
                if ($attchmentID > 0) {
                    uploadDaVMSDoc($attchmentID, $nwImgLoc, $errMsg);
                } else {
                    $attchmentID = getNewVMSDocID();
                    createVMSDoc($attchmentID, $pkID, $docCtrgrName, "");
                    uploadDaVMSDoc($attchmentID, $nwImgLoc, $errMsg);
                }
                $arr_content['attchID'] = $attchmentID;
                if (strpos($errMsg, "Document Stored Successfully!<br/>") === FALSE) {
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>" . $errMsg;
                } else {
                    $doc_src = $ftp_base_db_fldr . "/Vms/" . $nwImgLoc;
                    $doc_src_encrpt = encrypt1($doc_src, $smplTokenWord1);
                    if (file_exists($doc_src)) {
                        //file exists!
                    } else {
                        //file does not exist.
                        $doc_src_encrpt = "None";
                    }
                    $arr_content['crptpath'] = $doc_src_encrpt;
                    $arr_content['message'] = "<span style=\"color:green;\"><i class=\"fa fa-check\" aria-hidden=\"true\"></i></span>" . $errMsg;
                }
                echo json_encode($arr_content);
                exit();
            } else if ($actyp == 3) {
                //VMS Payment Transaction
                header("content-type:application/json");
                $orgid = $_SESSION['ORG_ID'];
                $sbmtdVmsPymtHdrID = isset($_POST['sbmtdVmsPymtHdrID']) ? cleanInputData($_POST['sbmtdVmsPymtHdrID']) : -1;
                if (!($canEdtTrns || $canAddTrns)) {
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Permission Denied!</span>";
                    echo json_encode($arr_content);
                    exit();
                }
                $slctdVMSTrnsLines = isset($_POST['slctdVMSTrnsLines']) ? cleanInputData($_POST['slctdVMSTrnsLines']) : "";
                $vmsPymtCrncyNm = isset($_POST['vmsPymtCrncyNm']) ? cleanInputData($_POST['vmsPymtCrncyNm']) : "";
                $myPymntsTtlVal = isset($_POST['myPymntsTtlVal']) ? cleanInputData($_POST['myPymntsTtlVal']) : 0;
                $vmsCstmrID = isset($_POST['vmsCstmrID']) ? cleanInputData($_POST['vmsCstmrID']) : -1;
                $vmsTrnsType = isset($_POST['vmsTrnsType']) ? cleanInputData($_POST['vmsTrnsType']) : "";

                $varTtlExpctdPymt = isset($_POST['varTtlExpctdPymt']) ? cleanInputData($_POST['varTtlExpctdPymt']) : 0;
                $vmsPymtCrncyID = getPssblValID($vmsPymtCrncyNm, getLovID("Currencies"));
                $pymtCrncyExchngRate = 0;
                $vmsPymtDfltDestVltID = isset($_POST['vmsPymtDfltDestVltID']) ? cleanInputData($_POST['vmsPymtDfltDestVltID']) : -1;
                $vmsPymtDfltDestCageID = isset($_POST['vmsPymtDfltDestCageID']) ? cleanInputData($_POST['vmsPymtDfltDestCageID']) : -1;

                if ($myPymntsTtlVal != $varTtlExpctdPymt) {
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Payment Amount must agree with Original Transaction lines Total!</span>";
                    echo json_encode($arr_content);
                    exit();
                }

                $canViewTrnsType = false;
                $trnsTypIdx = findArryIdx($trnsTypes, $vmsTrnsType);
                if ($trnsTypIdx >= 8 && $trnsTypIdx <= 9) {
                    $canViewTrnsType = test_prmssns($dfltPrvldgs[35 + $trnsTypIdx], $mdlNm);
                    if (!($canViewTrnsType)) {
                        $arr_content['percent'] = 100;
                        $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Permission Denied!</span>";
                        echo json_encode($arr_content);
                        exit();
                    }
                    if (($trnsTypIdx == 8) && ($vmsPymtDfltDestVltID <= 0 || $vmsPymtDfltDestCageID <= 0)) {
                        $arr_content['percent'] = 100;
                        $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Vault/Cage cannot be Empty!</span>";
                        echo json_encode($arr_content);
                        exit();
                    } else if ($trnsTypIdx == 9 && ($vmsPymtDfltDestVltID <= 0 || $vmsPymtDfltDestCageID <= 0)) {
                        $arr_content['percent'] = 100;
                        $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Vault/Cage cannot be Empty!</span>";
                        echo json_encode($arr_content);
                        exit();
                    }
                } else {
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Permission Denied!</span>";
                    echo json_encode($arr_content);
                    exit();
                }
                $dfltItemState = getGnrlRecNm("inv.inv_shelf", "line_id", "dflt_item_state", $vmsPymtDfltDestCageID);
                $affctd = 0;
                if ($vmsPymtCrncyNm != "" && $vmsTrnsType != "" && $myPymntsTtlVal > 0 && $sbmtdVmsPymtHdrID > 0 && $vmsPymtCrncyID > 0) {
                    $variousRows = explode("|", trim($slctdVMSTrnsLines, "|"));
                    for ($z = 0; $z < count($variousRows); $z++) {
                        $crntRow = explode("~", $variousRows[$z]);
                        //var_dump($crntRow);
                        if (count($crntRow) == 11) {
                            $lnTrnsLnID = (float) cleanInputData1($crntRow[0]);
                            $lnItmID = (int) cleanInputData1($crntRow[1]);
                            $lnSrcVltID = -1;
                            $lnDestVltID = -1;
                            $lnSrcCageID = $vmsPymtDfltDestCageID;
                            $lnDstCageID = $vmsPymtDfltDestCageID;
                            //(int) cleanInputData1($crntRow[3]);
                            $lnQty = (int) cleanInputData1($crntRow[4]);
                            $lnUntVal = (float) cleanInputData1($crntRow[5]);
                            $lnPymntCrncyRate = (float) cleanInputData1($crntRow[6]);
                            $lnSrcItemState = cleanInputData1($crntRow[7]);
                            $lnDstItemState = cleanInputData1($crntRow[8]);
                            $lnTrnsType = cleanInputData1($crntRow[9]);
                            $lnBaseUoMID = (int) cleanInputData1($crntRow[10]);
                            $orgnlVoidedLnID = -1;
                            $lineRmrk = $lnTrnsType;
                            if ($trnsTypIdx == 8) {
                                if ($lnTrnsType == "Payment") {
                                    $lnSrcVltID = -1;
                                    $lnSrcCageID = -1;
                                    $lnSrcItemState = "";
                                    $lnDestVltID = $vmsPymtDfltDestVltID;
                                    $lnDstCageID = $vmsPymtDfltDestCageID;
                                    $lnDstItemState = $dfltItemState;
                                } else {
                                    $lnSrcVltID = $vmsPymtDfltDestVltID;
                                    $lnSrcCageID = $vmsPymtDfltDestCageID;
                                    $lnSrcItemState = $dfltItemState;
                                    $lnDestVltID = -1;
                                    $lnDstCageID = -1;
                                    $lnDstItemState = "";
                                }
                            } else if ($trnsTypIdx == 9) {
                                if ($lnTrnsType == "Payment") {
                                    $lnSrcVltID = $vmsPymtDfltDestVltID;
                                    $lnSrcCageID = $vmsPymtDfltDestCageID;
                                    $lnSrcItemState = $dfltItemState;
                                    $lnDestVltID = -1;
                                    $lnDstCageID = -1;
                                    $lnDstItemState = "";
                                } else {
                                    $lnSrcVltID = -1;
                                    $lnSrcCageID = -1;
                                    $lnSrcItemState = "";
                                    $lnDestVltID = $vmsPymtDfltDestVltID;
                                    $lnDstCageID = $vmsPymtDfltDestCageID;
                                    $lnDstItemState = $dfltItemState;
                                }
                            }
                            //echo $lnItmID."".$lnTrnsLnID
                            if ($lnItmID > 0) {
                                $srcAstAcntID = (int) getGnrlRecNm("inv.inv_shelf", "line_id", "inv_asset_acct_id", $lnSrcCageID);
                                $destAstAcntID = (int) getGnrlRecNm("inv.inv_shelf", "line_id", "inv_asset_acct_id", $lnDstCageID);
                                $lbltyAcntID = -1;
                                if ($vmsCstmrID > 0) {
                                    $lbltyAcntID = (int) getGnrlRecNm("scm.scm_cstmr_suplr", "cust_sup_id", "dflt_pybl_accnt_id", $vmsCstmrID);
                                } else {
                                    $lbltyAcntID = get_DfltRcptLbltyAcnt($orgID);
                                }
                                $expenseAcntID = (int) getGnrlRecNm("inv.inv_itm_list", "item_id", "expense_accnt_id", $lnItmID);
                                $cogsAcntID = (int) getGnrlRecNm("inv.inv_itm_list", "item_id", "cogs_acct_id", $lnItmID);
                                $revnuAcntID = (int) getGnrlRecNm("inv.inv_itm_list", "item_id", "sales_rev_accnt_id", $lnItmID);
                                if ($lnTrnsLnID <= 0) {
                                    $lnTrnsLnID = getNewVMSPymtLineID();
                                    $affctd += createVMSPymtLine($lnTrnsLnID, $sbmtdVmsPymtHdrID, $lnItmID, $lnSrcVltID, $lnSrcCageID, $lnDestVltID,
                                            $lnDstCageID, $lnQty, $vmsPymtCrncyID, $lnUntVal, $orgnlVoidedLnID, $lineRmrk, $srcAstAcntID,
                                            $destAstAcntID, $lbltyAcntID, $expenseAcntID, $lnPymntCrncyRate, $lnBaseUoMID, $cogsAcntID, $revnuAcntID,
                                            $lnSrcItemState, $lnDstItemState);
                                } else {
                                    $affctd += updateVMSPymtLine($lnTrnsLnID, $lnItmID, $lnSrcVltID, $lnSrcCageID, $lnDestVltID, $lnDstCageID, $lnQty,
                                            $vmsPymtCrncyID, $lnUntVal, $lineRmrk, $srcAstAcntID, $destAstAcntID, $lbltyAcntID, $expenseAcntID,
                                            $lnPymntCrncyRate, $lnBaseUoMID, $cogsAcntID, $revnuAcntID, $lnSrcItemState, $lnDstItemState);
                                }
                            }
                        }
                    }
                    executeSQLNoParams("Select vms.check_pymnt_duplcts(" . $sbmtdVmsTrnsHdrID . ")");
                    $errMsg = "";
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:green;\"><i class=\"fa fa-check\" aria-hidden=\"true\"></i></span>Payment Transaction Successfully Saved!<br/>" . $affctd . " Transaction Lines Saved!<br/>" . $errMsg;
                    echo json_encode($arr_content);
                    exit();
                } else {
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Data Supplied is Incomplete or Invalid at some fields!</span>";
                    echo json_encode($arr_content);
                    exit();
                }
            } else if ($actyp == 4) {
                //VOID VMS Transaction
                header("content-type:application/json");
                $orgid = $_SESSION['ORG_ID'];
                $vmsTrnsHdrID = isset($_POST['vmsTrnsHdrID']) ? cleanInputData($_POST['vmsTrnsHdrID']) : -1;
                $shdSbmt = isset($_POST['shdSbmt']) ? cleanInputData($_POST['shdSbmt']) : 0;
                $vmsTrnsVoidRsn = isset($_POST['vmsTrnsDesc']) ? cleanInputData($_POST['vmsTrnsDesc']) : "";
                $vmsTrnsNum = isset($_POST['vmsTrnsNum']) ? cleanInputData($_POST['vmsTrnsNum']) : "";
                if (!($canEdtTrns || $canAddTrns)) {
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Permission Denied!</span>";
                    echo json_encode($arr_content);
                    exit();
                }
                $oldVmsTrnsHdrID = getTrnsHdrID($vmsTrnsNum);
                $trnsType = "";
                $rqStatus = "Not Submitted";
                $actType = "";
                $rqstatusColor = "red";
                $dte = date('ymdHis');
                $gnrtdTrnsNo = "";
                $gnrtdTrnsDate = $gnrlTrnsDteDMYHMS; //date('d-M-Y H:i:s');
                $gnrtdTrnsDate1 = $gnrlTrnsDteYMDHMS; //date('Y-m-d H:i:s');
                $brnchLocID = "";
                $brnchLoc = "";
                $crncyID = -1;
                $crncyIDNm = -1;
                $pymtCrncyNm = "";
                $pymtCrncyID = -1;
                $srcVltID = -1;
                $srcCageID = -1;
                $destVltID = -1;
                $destCageID = -1;
                $srcVltNm = "";
                $srcCageNm = "";
                $destVltNm = "";
                $destCageNm = "";
                $vldtyStatus = "<span style=\"color:red;font-weight:bold;\">Not Validated</span>";
                $athrztnStatus = "<span style=\"color:red;font-weight:bold;\">Not Submitted</span>";
                $itmBaseUomNm = "pcs";
                $voidedTrnsHdrID = -1;
                $voidedTrnsType = "";
                $vmsTrnsDesc = "";
                $vmsTrnsClsfctn = "";
                $vmsTrnsTtlAmnt = 0;
                $vmsPymtTtlAmnt = 0;
                $vmsPymtCrncyID = -1;
                $vmsPymtCrncyNm = "";
                $mkReadOnly = "";
                $mkRmrkReadOnly = "";
                $cstmrID = -1;
                $cstmrSiteID = -1;
                $exchangeRate = 0;
                $isBinCardTrns = "0";
                $vmsTrnsPrsn = "N/A";
                $vmsChequeNo = isset($_POST['vmsChequeNo']) ? cleanInputData($_POST['vmsChequeNo']) : "";
                $vmsOffctStaffLocID = getPersonLocID($prsnid);
                $vmsOffctStaff = getPrsnFullNm($prsnid);
                $vmsOffctStaffPrsID = $prsnid;
                if ($vmsTrnsHdrID > 0 && $oldVmsTrnsHdrID == $vmsTrnsHdrID) {
                    $result = get_One_VMSTrnsHdr($vmsTrnsHdrID);
                    if ($row = loc_db_fetch_array($result)) {
                        $trnsType = $row[3];
                        $rqStatus = $row[10];
                        $voidedTrnsHdrID = (float) $row[13];
                        $voidedTrnsType = $row[14];
                        if ($rqStatus == "Not Submitted" || $rqStatus == "Withdrawn" || $rqStatus == "Rejected") {
                            $rqstatusColor = "red";
                            if ($voidedTrnsHdrID <= 0) {
                                $mkReadOnly = "";
                                $mkRmrkReadOnly = "";
                            } else {
                                $mkReadOnly = "readonly=\"true\"";
                                $mkRmrkReadOnly = "";
                            }
                        } else if ($rqStatus != "Authorized") {
                            $mkReadOnly = "readonly=\"true\"";
                            $mkRmrkReadOnly = "readonly=\"true\"";
                            $rqstatusColor = "brown";
                        } else {
                            $rqstatusColor = "green";
                            $mkReadOnly = "readonly=\"true\"";
                            $mkRmrkReadOnly = "readonly=\"true\"";
                        }
                        $gnrtdTrnsNo = $row[2] . "-R";
                        $gnrtdTrnsDate = $row[1];
                        $uName11 = getUserName((float) $row[15]);
                        $prprdBy = "<span style=\"color:blue;font-weight:bold;\">" . $uName11 . "@" . $gnrtdTrnsDate . "</span>";
                        $brnchLocID = (int) $row[20];
                        $brnchLoc = getGnrlRecNm("org.org_sites_locations", "location_id",
                                "REPLACE(location_code_name || '.' || site_desc, '.' || location_code_name,'')", $brnchLocID);
                        $crncyID = (int) $row[30];
                        $crncyIDNm = $row[31];
                        if ($crncyID <= 0) {
                            $crncyID = $fnccurid;
                            $crncyIDNm = $fnccurnm;
                        }
                        $srcVltID = (int) $row[22];
                        $srcCageID = (int) $row[24];
                        $destVltID = (int) $row[26];
                        $destCageID = (int) $row[28];
                        $srcVltNm = $row[23];
                        $srcCageNm = $row[25];
                        $destVltNm = $row[27];
                        $destCageNm = $row[29];
                        if ($row[12] == "Validated") {
                            $vldtyStatus = "<span style=\"color:green;font-weight:bold;\">" . $row[12] . "</span>";
                        } else {
                            $vldtyStatus = "<span style=\"color:red;font-weight:bold;\">" . $row[12] . "</span>";
                        }
                        if ($row[10] == "Authorized") {
                            $athrztnStatus = "<span style=\"color:green;font-weight:bold;\">" . $row[10] . "</span>";
                        } else {
                            $athrztnStatus = "<span style=\"color:red;font-weight:bold;\">" . $row[10] . "</span>";
                        }
                        if ($voidedTrnsHdrID <= 0) {
                            $vmsTrnsDesc = $row[4];
                        } else {
                            $vmsTrnsDesc = $row[36];
                        }
                        $vmsTrnsClsfctn = $row[9];
                        $vmsTrnsTtlAmnt = (float) $row[21];
                        $vmsPymtTtlAmnt = (float) $row[34];
                        $vmsPymtCrncyID = (float) $row[32];
                        $vmsPymtCrncyNm = $row[33];
                        $cstmrID = (float) $row[5];
                        $cstmrSiteID = (float) $row[7];
                        $exchangeRate = $row[35];
                        $isBinCardTrns = $row[37];
                        $vmsTrnsPrsn = $row[38];
                        $vmsChequeNo = $row[42];
                        $vmsOffctStaffLocID = $row[39];
                        $vmsOffctStaff = $row[40];
                        $vmsOffctStaffPrsID = (float) $row[41];
                    }
                    $affctd = 0;
                    $affctd1 = 0;
                    $affctd2 = 0;
                    $affctd3 = 0;
                    if ($voidedTrnsHdrID <= 0) {
                        //Create Voidal Trns.                        
                        $voidedTrnsHdrID = getNewTrnsHdrID();
                        $affctd += createVMSTrnsHdr($voidedTrnsHdrID, $gnrtdTrnsDate1, $gnrtdTrnsNo, $trnsType, $vmsTrnsDesc, $cstmrID, $cstmrSiteID,
                                $vmsTrnsHdrID, $trnsType, $vmsTrnsClsfctn, $brnchLocID, (-1 * $vmsTrnsTtlAmnt), $srcVltID, $srcCageID, $destVltID,
                                $destCageID, $crncyID, $vmsPymtCrncyID, (-1 * $vmsPymtTtlAmnt), $exchangeRate, $isBinCardTrns, $vmsTrnsPrsn,
                                $vmsOffctStaffPrsID, $vmsChequeNo);
                        $affctd1 += createVMSTrnsVoidLn($vmsTrnsHdrID, $voidedTrnsHdrID);
                        $affctd2 += createVMSPymtVoidLn($vmsTrnsHdrID, $voidedTrnsHdrID);
                        $affctd3 += createVMSExpnsTrnsVoidLine($vmsTrnsHdrID, $voidedTrnsHdrID);
                        $vmsTrnsHdrID = $voidedTrnsHdrID;
                    } else if ($vmsTrnsHdrID > 0) {
                        //Update Reversal Reason
                        $affctd += updateVMSTrnsVoidRsn($vmsTrnsHdrID, $vmsTrnsVoidRsn);
                    }
                    $errMsg = "";
                    calcAllVMSLinesTtlVals($vmsTrnsHdrID);
                    if ($shdSbmt > 0 && $affctd > 0) {
                        if (isVMSTrnsQtyVld($vmsTrnsHdrID, $errMsg)) {
                            $srcDocID = $vmsTrnsHdrID;
                            $srcDocType = "Vault Transactions";
                            $routingID = -1;
                            $inptSlctdRtngs = "";
                            $actionToPrfrm = "Initiate";
                            $errMsg .= "<br/><br/>" . vmsTrnsReqMsgActns($routingID, $inptSlctdRtngs, $actionToPrfrm, $srcDocID, $srcDocType);
                        } else {
                            $errMsg .= "<br/><span style=\"color:red;font-weight:bold;\">Error Occured!<br/>Kindly ensure that you have the Requested Quantities in the various Source Cages!</span><br/>";
                        }
                    }
                    $arr_content['newVMSHdrID'] = $vmsTrnsHdrID;
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:green;\"><i class=\"fa fa-check\" aria-hidden=\"true\"></i></span>VMS Reversal Transaction Successfully Saved!<br/>" . $affctd1 . " Transaction Lines Saved!<br/>" . $affctd2 . " Payment Lines Saved!<br/>" . $errMsg;
                    echo json_encode($arr_content);
                    exit();
                } else {
                    $arr_content['newVMSHdrID'] = $vmsTrnsHdrID;
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Data Supplied is Incomplete or Invalid at some fields!</span>";
                    echo json_encode($arr_content);
                    exit();
                }
            } else if ($actyp == 5) {
                //Direct VMS Transaction
                header("content-type:application/json");
                $orgid = $_SESSION['ORG_ID'];
                $vmsTrnsHdrID = isset($_POST['vmsTrnsHdrID']) ? cleanInputData($_POST['vmsTrnsHdrID']) : -1;
                if (!($canEdtTrns || $canAddTrns)) {
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Permission Denied!</span>";
                    echo json_encode($arr_content);
                    exit();
                }
                $vmsTrnsClsfctn = isset($_POST['vmsTrnsClsfctn']) ? cleanInputData($_POST['vmsTrnsClsfctn']) : "";
                $slctdVMSTrnsLines = isset($_POST['slctdVMSTrnsLines']) ? cleanInputData($_POST['slctdVMSTrnsLines']) : "";
                $vmsTrnsDesc = isset($_POST['vmsTrnsDesc']) ? cleanInputData($_POST['vmsTrnsDesc']) : "";
                $vmsTrnsNum = isset($_POST['vmsTrnsNum']) ? cleanInputData($_POST['vmsTrnsNum']) : "";
                $vmsTrnsType = isset($_POST['vmsTrnsType']) ? cleanInputData($_POST['vmsTrnsType']) : "";

                $vmsTrnsDate = isset($_POST['vmsTrnsDate']) ? cleanInputData($_POST['vmsTrnsDate']) : "";
                $vmsTrnsCrncyNm = isset($_POST['vmsTrnsCrncyNm']) ? cleanInputData($_POST['vmsTrnsCrncyNm']) : "";
                $vmsTrnsCrncyID = getPssblValID($vmsTrnsCrncyNm, getLovID("Currencies"));
                $ttlVMSDocAmntVal = isset($_POST['ttlVMSDocAmntVal']) ? cleanInputData($_POST['ttlVMSDocAmntVal']) : 0;
                $myCptrdValsTtlVal = isset($_POST['myCptrdValsTtlVal']) ? cleanInputData($_POST['myCptrdValsTtlVal']) : 0;
                $vmsDfltDestVltID = isset($_POST['vmsDfltDestVltID']) ? cleanInputData($_POST['vmsDfltDestVltID']) : -1;
                $vmsDfltDestCageID = isset($_POST['vmsDfltDestCageID']) ? cleanInputData($_POST['vmsDfltDestCageID']) : -1;
                $vmsCstmrID = isset($_POST['vmsCstmrID']) ? cleanInputData($_POST['vmsCstmrID']) : -1;
                $vmsCstmrSiteID = isset($_POST['vmsCstmrSiteID']) ? cleanInputData($_POST['vmsCstmrSiteID']) : -1;
                $vmsBrnchLocID = isset($_POST['vmsBrnchLocID']) ? cleanInputData($_POST['vmsBrnchLocID']) : -1;
                $shdSbmt = isset($_POST['shdSbmt']) ? cleanInputData($_POST['shdSbmt']) : 0;
                $vmsTrnsPrsn = isset($_POST['vmsTrnsPrsn']) ? cleanInputData($_POST['vmsTrnsPrsn']) : "";
                $vmsChequeNo = isset($_POST['vmsChequeNo']) ? cleanInputData($_POST['vmsChequeNo']) : "";
                $vmsOffctStaffLocID = isset($_POST['vmsOffctStaffLocID']) ? cleanInputData($_POST['vmsOffctStaffLocID']) : "";
                $vmsOffctStaffPrsID = getPersonID($vmsOffctStaffLocID);

                $dfltItemState = getGnrlRecNm("inv.inv_shelf", "line_id", "dflt_item_state", $vmsDfltDestCageID);
                if ($myCptrdValsTtlVal != $ttlVMSDocAmntVal) {
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Transaction Header Total Amount must agree with Transaction lines Total!</span>";
                    echo json_encode($arr_content);
                    exit();
                }

                $trnsTypIdx = findArryIdx($trnsTypes, $vmsTrnsType);
                $canViewTrnsType = test_prmssns($dfltPrvldgs[52], $mdlNm);
                //var_dump($_POST);
                //echo $canViewTrnsType . "::" . $trnsTypIdx;
                if ($canViewTrnsType === true && $trnsTypIdx == 11) {
                    
                } else {
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Permission Denied!</span>";
                    echo json_encode($arr_content);
                    exit();
                }
                $oldVmsTrnsHdrID = getTrnsHdrID($vmsTrnsNum);
                if ($vmsTrnsNum != "" && $vmsTrnsCrncyNm != "" && $vmsTrnsDesc != "" && $vmsTrnsDate != "" && $vmsTrnsHdrID > 0 && $vmsTrnsCrncyID > 0 &&
                        ($oldVmsTrnsHdrID == $vmsTrnsHdrID)) {
                    $affctd1 = updateVMSTrnsHdr($vmsTrnsHdrID, cnvrtDMYTmToYMDTm($vmsTrnsDate), $vmsTrnsNum, $vmsTrnsType, $vmsTrnsDesc, $vmsCstmrID,
                            $vmsCstmrSiteID, $vmsTrnsClsfctn, $vmsBrnchLocID, $ttlVMSDocAmntVal, $vmsDfltDestVltID, $vmsDfltDestCageID,
                            $vmsDfltDestVltID, $vmsDfltDestCageID, $vmsTrnsCrncyID, -1, 0, 0, $vmsTrnsPrsn, $vmsOffctStaffPrsID, $vmsChequeNo);
                    $affctd = 0;
                    $variousRows = explode("|", trim($slctdVMSTrnsLines, "|"));
                    for ($z = 0; $z < count($variousRows); $z++) {
                        $crntRow = explode("~", $variousRows[$z]);
                        if (count($crntRow) == 7) {
                            $lnTrnsLnID = (float) cleanInputData1($crntRow[0]);
                            $lnItmID = (int) cleanInputData1($crntRow[1]);
                            $lnTrnsType = cleanInputData1($crntRow[2]);
                            $lnQty = (int) cleanInputData1($crntRow[3]);
                            $lnUntVal = (float) cleanInputData1($crntRow[4]);
                            $lineRmrk = cleanInputData1($crntRow[5]);
                            $lnBaseUoMID = (int) cleanInputData1($crntRow[6]);
                            if ($lnTrnsType == "Receipts") {
                                $lnSrcCageID = -1;
                                $lnSrcItemState = "";
                                $lnDstCageID = $vmsDfltDestCageID;
                                $lnDstItemState = $dfltItemState;
                            } else {
                                $lnSrcCageID = $vmsDfltDestCageID;
                                $lnSrcItemState = $dfltItemState;
                                $lnDstCageID = -1;
                                $lnDstItemState = "";
                            }
                            $orgnlVoidedLnID = -1;
                            if ($lnItmID > 0) {
                                $srcAstAcntID = (int) getGnrlRecNm("inv.inv_shelf", "line_id", "inv_asset_acct_id", $lnSrcCageID);
                                $destAstAcntID = (int) getGnrlRecNm("inv.inv_shelf", "line_id", "inv_asset_acct_id", $lnDstCageID);
                                $lbltyAcntID = -1;
                                if ($vmsCstmrID > 0) {
                                    $lbltyAcntID = (int) getGnrlRecNm("scm.scm_cstmr_suplr", "cust_sup_id", "dflt_pybl_accnt_id", $vmsCstmrID);
                                } else {
                                    $lbltyAcntID = get_DfltRcptLbltyAcnt($orgID);
                                }
                                $expenseAcntID = (int) getGnrlRecNm("inv.inv_itm_list", "item_id", "expense_accnt_id", $lnItmID);
                                $cogsAcntID = (int) getGnrlRecNm("inv.inv_itm_list", "item_id", "cogs_acct_id", $lnItmID);
                                $revnuAcntID = (int) getGnrlRecNm("inv.inv_itm_list", "item_id", "sales_rev_accnt_id", $lnItmID);
                                if ($lnTrnsLnID <= 0) {
                                    $lnTrnsLnID = getNewVMSTrnsLineID();
                                    $affctd += createVMSTrnsLine($lnTrnsLnID, $vmsTrnsHdrID, $lnItmID, $vmsDfltDestVltID, $lnSrcCageID,
                                            $vmsDfltDestVltID, $lnDstCageID, $lnQty, $vmsTrnsCrncyID, $lnUntVal, $orgnlVoidedLnID, $lineRmrk,
                                            $srcAstAcntID, $destAstAcntID, $lbltyAcntID, $expenseAcntID, 0, $lnBaseUoMID, $cogsAcntID, $revnuAcntID,
                                            $lnSrcItemState, $lnDstItemState, $lineRmrk);
                                } else {
                                    $affctd += updateVMSTrnsLine($lnTrnsLnID, $lnItmID, $vmsDfltDestVltID, $lnSrcCageID, $vmsDfltDestVltID,
                                            $lnDstCageID, $lnQty, $vmsTrnsCrncyID, $lnUntVal, $lineRmrk, $srcAstAcntID, $destAstAcntID, $lbltyAcntID,
                                            $expenseAcntID, 0, $lnBaseUoMID, $cogsAcntID, $revnuAcntID, $lnSrcItemState, $lnDstItemState, $lineRmrk);
                                }
                            }
                        }
                    }

                    $errMsg = "";
                    calcAllVMSLinesTtlVals($vmsTrnsHdrID);
                    if ($shdSbmt > 0 && $affctd1 > 0) {
                        if (isVMSTrnsQtyVld($vmsTrnsHdrID, $errMsg)) {
                            $srcDocID = $vmsTrnsHdrID;
                            $srcDocType = "Vault Transactions";
                            $routingID = -1;
                            $inptSlctdRtngs = "";
                            $actionToPrfrm = "Initiate";
                            $errMsg .= "<br/><br/>" . vmsTrnsReqMsgActns($routingID, $inptSlctdRtngs, $actionToPrfrm, $srcDocID, $srcDocType);
                        } else {
                            $errMsg .= "<br/><span style=\"color:red;font-weight:bold;\">Error Occured!<br/>Kindly ensure that you have the Requested Quantities in the various Source Cages!</span><br/>";
                        }
                    }
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:green;\"><i class=\"fa fa-check\" aria-hidden=\"true\"></i></span>VMS Transaction Successfully Saved!<br/>" . $affctd . " Transaction Lines Saved!<br/>" . $errMsg;
                    echo json_encode($arr_content);
                    exit();
                } else {
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Data Supplied is Incomplete or Invalid at some fields!</span>";
                    echo json_encode($arr_content);
                    exit();
                }
            } else if ($actyp == 6) {
                //VMS Transaction
                header("content-type:application/json");
                $orgid = $_SESSION['ORG_ID'];
                $vmsTrnsHdrID = isset($_POST['vmsTrnsHdrID']) ? cleanInputData($_POST['vmsTrnsHdrID']) : -1;
                if (!($canEdtTrns || $canAddTrns)) {
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Permission Denied!</span>";
                    echo json_encode($arr_content);
                    exit();
                }
                $vmsTrnsClsfctn = isset($_POST['vmsTrnsClsfctn']) ? cleanInputData($_POST['vmsTrnsClsfctn']) : "";
                $slctdVMSTrnsLines = isset($_POST['slctdVMSTrnsLines']) ? cleanInputData($_POST['slctdVMSTrnsLines']) : "";
                $vmsTrnsDesc = isset($_POST['vmsTrnsDesc']) ? cleanInputData($_POST['vmsTrnsDesc']) : "";
                $vmsTrnsNum = isset($_POST['vmsTrnsNum']) ? cleanInputData($_POST['vmsTrnsNum']) : "";
                $vmsTrnsType = isset($_POST['vmsTrnsType']) ? cleanInputData($_POST['vmsTrnsType']) : "";
                $vmsTrnsCrncyNm = isset($_POST['vmsTrnsCrncyNm']) ? cleanInputData($_POST['vmsTrnsCrncyNm']) : "";
                $vmsTrnsCrncyID = getPssblValID($vmsTrnsCrncyNm, getLovID("Currencies"));
                $vmsDfltSrcVltID = isset($_POST['vmsDfltSrcVltID']) ? cleanInputData($_POST['vmsDfltSrcVltID']) : -1;
                $vmsDfltSrcCageID = isset($_POST['vmsDfltSrcCageID']) ? cleanInputData($_POST['vmsDfltSrcCageID']) : -1;
                $vmsDfltDestVltID = isset($_POST['vmsDfltDestVltID']) ? cleanInputData($_POST['vmsDfltDestVltID']) : -1;
                $vmsDfltDestCageID = isset($_POST['vmsDfltDestCageID']) ? cleanInputData($_POST['vmsDfltDestCageID']) : -1;
                $vmsCstmrID = isset($_POST['vmsCstmrID']) ? cleanInputData($_POST['vmsCstmrID']) : -1;
                $rqStatus = getGnrlRecNm("vms.vms_transactions_hdr", "trans_hdr_id", "approval_status", $vmsTrnsHdrID);
                $oldVmsTrnsHdrID = getTrnsHdrID($vmsTrnsNum);
                if ($vmsTrnsHdrID > 0 && $vmsTrnsCrncyID > 0 && ($oldVmsTrnsHdrID == $vmsTrnsHdrID) && ($rqStatus == "Not Submitted" || $rqStatus == "Withdrawn" ||
                        $rqStatus == "Rejected")) {
                    //Save Role Sets
                    $affctd = 0;
                    $variousRows = explode("|", trim($slctdVMSTrnsLines, "|"));
                    //var_dump($variousRows);
                    for ($z = 0; $z < count($variousRows); $z++) {
                        $crntRow = explode("~", $variousRows[$z]);
                        if (count($crntRow) == 11) {
                            $lnTrnsLnID = (float) cleanInputData1($crntRow[0]);
                            $lnItmID = (int) cleanInputData1($crntRow[1]);
                            $lnSrcCageID = (int) cleanInputData1($crntRow[2]);
                            $lnDstCageID = (int) cleanInputData1($crntRow[3]);

                            $lnQty = (int) cleanInputData1($crntRow[4]);
                            $lnUntVal = (float) cleanInputData1($crntRow[5]);
                            $lnPymntCrncyRate = (float) cleanInputData1($crntRow[6]);
                            $lnSrcItemState = cleanInputData1($crntRow[7]);
                            $lnDstItemState = cleanInputData1($crntRow[8]);
                            $lnBaseUoMID = (int) cleanInputData1($crntRow[10]);
                            $orgnlVoidedLnID = -1;
                            $lineRmrk = cleanInputData1($crntRow[9]);
                            if ($lineRmrk == "") {
                                $lineRmrk = $vmsTrnsDesc;
                            }
                            $srcVltID = $vmsDfltSrcVltID;
                            $dstVltID = $vmsDfltDestVltID;
                            if ($lnSrcCageID > 0) {
                                $srcVltID = (float) getGnrlRecNm("inv.inv_shelf", "line_id", "store_id", $lnSrcCageID);
                                $lnSrcItemState = getGnrlRecNm("inv.inv_shelf", "line_id", "dflt_item_state", $lnSrcCageID);
                            }
                            if ($lnDstCageID > 0) {
                                $dstVltID = (float) getGnrlRecNm("inv.inv_shelf", "line_id", "store_id", $lnDstCageID);
                                $lnDstItemState = getGnrlRecNm("inv.inv_shelf", "line_id", "dflt_item_state", $lnDstCageID);
                            }
                            if ($lnItmID > 0) {
                                $srcAstAcntID = (int) getGnrlRecNm("inv.inv_shelf", "line_id", "inv_asset_acct_id", $lnSrcCageID);
                                $destAstAcntID = (int) getGnrlRecNm("inv.inv_shelf", "line_id", "inv_asset_acct_id", $lnDstCageID);
                                $lbltyAcntID = -1;
                                if ($vmsCstmrID > 0) {
                                    $lbltyAcntID = (int) getGnrlRecNm("scm.scm_cstmr_suplr", "cust_sup_id", "dflt_pybl_accnt_id", $vmsCstmrID);
                                } else {
                                    $lbltyAcntID = get_DfltRcptLbltyAcnt($orgID);
                                }
                                $expenseAcntID = (int) getGnrlRecNm("inv.inv_itm_list", "item_id", "expense_accnt_id", $lnItmID);
                                $cogsAcntID = (int) getGnrlRecNm("inv.inv_itm_list", "item_id", "cogs_acct_id", $lnItmID);
                                $revnuAcntID = (int) getGnrlRecNm("inv.inv_itm_list", "item_id", "sales_rev_accnt_id", $lnItmID);
                                if ($lnTrnsLnID <= 0) {
                                    $lnTrnsLnID = getNewVMSTrnsLineID();
                                    $affctd += createVMSTrnsLine($lnTrnsLnID, $vmsTrnsHdrID, $lnItmID, $srcVltID, $lnSrcCageID, $dstVltID,
                                            $lnDstCageID, $lnQty, $vmsTrnsCrncyID, $lnUntVal, $orgnlVoidedLnID, $lineRmrk, $srcAstAcntID,
                                            $destAstAcntID, $lbltyAcntID, $expenseAcntID, $lnPymntCrncyRate, $lnBaseUoMID, $cogsAcntID, $revnuAcntID,
                                            $lnSrcItemState, $lnDstItemState, $lineRmrk);
                                } else {
                                    $affctd += updateVMSTrnsLine($lnTrnsLnID, $lnItmID, $srcVltID, $lnSrcCageID, $dstVltID, $lnDstCageID, $lnQty,
                                            $vmsTrnsCrncyID, $lnUntVal, $lineRmrk, $srcAstAcntID, $destAstAcntID, $lbltyAcntID, $expenseAcntID,
                                            $lnPymntCrncyRate, $lnBaseUoMID, $cogsAcntID, $revnuAcntID, $lnSrcItemState, $lnDstItemState, $lineRmrk);
                                }
                            }
                        }
                    }
                    $errMsg = "";
                    calcAllVMSLinesTtlVals($vmsTrnsHdrID);
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:green;\"><i class=\"fa fa-check\" aria-hidden=\"true\"></i></span>VMS Transaction Successfully Saved!<br/>" . $affctd . " Transaction Lines Saved!<br/>" . $errMsg;
                    echo json_encode($arr_content);
                    exit();
                } else {
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Data Supplied is Incomplete or Invalid at some fields!</span>";
                    echo json_encode($arr_content);
                    exit();
                }
            } else if ($actyp == 7) {
                //Direct VMS Transaction
                header("content-type:application/json");
                $orgid = $_SESSION['ORG_ID'];
                $vmsTrnsHdrID = isset($_POST['vmsTrnsHdrID']) ? cleanInputData($_POST['vmsTrnsHdrID']) : -1;
                if (!($canEdtTrns || $canAddTrns)) {
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Permission Denied!</span>";
                    echo json_encode($arr_content);
                    exit();
                }
                $slctdVMSTrnsLines = isset($_POST['slctdVMSTrnsLines']) ? cleanInputData($_POST['slctdVMSTrnsLines']) : "";
                $vmsTrnsDesc = isset($_POST['vmsTrnsDesc']) ? cleanInputData($_POST['vmsTrnsDesc']) : "";
                $vmsTrnsNum = isset($_POST['vmsTrnsNum']) ? cleanInputData($_POST['vmsTrnsNum']) : "";
                $vmsTrnsType = isset($_POST['vmsTrnsType']) ? cleanInputData($_POST['vmsTrnsType']) : "";
                $vmsTrnsCrncyNm = isset($_POST['vmsTrnsCrncyNm']) ? cleanInputData($_POST['vmsTrnsCrncyNm']) : "";
                $vmsTrnsCrncyID = getPssblValID($vmsTrnsCrncyNm, getLovID("Currencies"));
                $vmsDfltDestVltID = isset($_POST['vmsDfltDestVltID']) ? cleanInputData($_POST['vmsDfltDestVltID']) : -1;
                $vmsDfltDestCageID = isset($_POST['vmsDfltDestCageID']) ? cleanInputData($_POST['vmsDfltDestCageID']) : -1;
                $dfltItemState = getGnrlRecNm("inv.inv_shelf", "line_id", "dflt_item_state", $vmsDfltDestCageID);
                $rqStatus = getGnrlRecNm("vms.vms_transactions_hdr", "trans_hdr_id", "approval_status", $vmsTrnsHdrID);
                $vmsCstmrID = isset($_POST['vmsCstmrID']) ? cleanInputData($_POST['vmsCstmrID']) : -1;
                $vmsChequeNo = isset($_POST['vmsChequeNo']) ? cleanInputData($_POST['vmsChequeNo']) : "";
                $trnsTypIdx = findArryIdx($trnsTypes, $vmsTrnsType);
                $canViewTrnsType = test_prmssns($dfltPrvldgs[52], $mdlNm);
                if ($canViewTrnsType === true && $trnsTypIdx == 11) {
                    
                } else {
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Permission Denied!</span>";
                    echo json_encode($arr_content);
                    exit();
                }
                $oldVmsTrnsHdrID = getTrnsHdrID($vmsTrnsNum);
                if ($vmsTrnsHdrID > 0 && $vmsTrnsCrncyID > 0 && ($oldVmsTrnsHdrID == $vmsTrnsHdrID) && ($rqStatus == "Not Submitted" || $rqStatus == "Withdrawn" ||
                        $rqStatus == "Rejected")) {
                    $affctd = 0;
                    $variousRows = explode("|", trim($slctdVMSTrnsLines, "|"));
                    for ($z = 0; $z < count($variousRows); $z++) {
                        $crntRow = explode("~", $variousRows[$z]);
                        if (count($crntRow) == 7) {
                            $lnTrnsLnID = (float) cleanInputData1($crntRow[0]);
                            $lnItmID = (int) cleanInputData1($crntRow[1]);
                            $lnTrnsType = cleanInputData1($crntRow[2]);
                            $lnQty = (int) cleanInputData1($crntRow[3]);
                            $lnUntVal = (float) cleanInputData1($crntRow[4]);
                            $lineRmrk = cleanInputData1($crntRow[5]);
                            $lnBaseUoMID = (int) cleanInputData1($crntRow[6]);
                            if ($lnTrnsType == "Receipts") {
                                $lnSrcCageID = -1;
                                $lnSrcItemState = "";
                                $lnDstCageID = $vmsDfltDestCageID;
                                $lnDstItemState = $dfltItemState;
                            } else {
                                $lnSrcCageID = $vmsDfltDestCageID;
                                $lnSrcItemState = $dfltItemState;
                                $lnDstCageID = -1;
                                $lnDstItemState = "";
                            }
                            $orgnlVoidedLnID = -1;
                            if ($lnItmID > 0) {
                                $srcAstAcntID = (int) getGnrlRecNm("inv.inv_shelf", "line_id", "inv_asset_acct_id", $lnSrcCageID);
                                $destAstAcntID = (int) getGnrlRecNm("inv.inv_shelf", "line_id", "inv_asset_acct_id", $lnDstCageID);
                                $lbltyAcntID = -1;
                                if ($vmsCstmrID > 0) {
                                    $lbltyAcntID = (int) getGnrlRecNm("scm.scm_cstmr_suplr", "cust_sup_id", "dflt_pybl_accnt_id", $vmsCstmrID);
                                } else {
                                    $lbltyAcntID = get_DfltRcptLbltyAcnt($orgID);
                                }
                                $expenseAcntID = (int) getGnrlRecNm("inv.inv_itm_list", "item_id", "expense_accnt_id", $lnItmID);
                                $cogsAcntID = (int) getGnrlRecNm("inv.inv_itm_list", "item_id", "cogs_acct_id", $lnItmID);
                                $revnuAcntID = (int) getGnrlRecNm("inv.inv_itm_list", "item_id", "sales_rev_accnt_id", $lnItmID);
                                if ($lnTrnsLnID <= 0) {
                                    $lnTrnsLnID = getNewVMSTrnsLineID();
                                    $affctd += createVMSTrnsLine($lnTrnsLnID, $vmsTrnsHdrID, $lnItmID, $vmsDfltDestVltID, $lnSrcCageID,
                                            $vmsDfltDestVltID, $lnDstCageID, $lnQty, $vmsTrnsCrncyID, $lnUntVal, $orgnlVoidedLnID, $lineRmrk,
                                            $srcAstAcntID, $destAstAcntID, $lbltyAcntID, $expenseAcntID, 0, $lnBaseUoMID, $cogsAcntID, $revnuAcntID,
                                            $lnSrcItemState, $lnDstItemState, $lineRmrk);
                                } else {
                                    $affctd += updateVMSTrnsLine($lnTrnsLnID, $lnItmID, $vmsDfltDestVltID, $lnSrcCageID, $vmsDfltDestVltID,
                                            $lnDstCageID, $lnQty, $vmsTrnsCrncyID, $lnUntVal, $lineRmrk, $srcAstAcntID, $destAstAcntID, $lbltyAcntID,
                                            $expenseAcntID, 0, $lnBaseUoMID, $cogsAcntID, $revnuAcntID, $lnSrcItemState, $lnDstItemState, $lineRmrk);
                                }
                            }
                        }
                    }

                    $errMsg = "";
                    calcAllVMSLinesTtlVals($vmsTrnsHdrID);
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:green;\"><i class=\"fa fa-check\" aria-hidden=\"true\"></i></span>VMS Transaction Successfully Saved!<br/>" . $affctd . " Transaction Lines Saved!<br/>" . $errMsg;
                    echo json_encode($arr_content);
                    exit();
                } else {
                    $arr_content['percent'] = 100;
                    $arr_content['message'] = "<span style=\"color:red;\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>Data Supplied is Incomplete or Invalid at some fields!</span>";
                    echo json_encode($arr_content);
                    exit();
                }
            } else if ($actyp == 40) {
                //Submit Data Change Request to Workflow
                $vmsTrnsHdrID = isset($_POST['vmsTrnsHdrID']) ? cleanInputData($_POST['vmsTrnsHdrID']) : -1;
                $RoutingID = -1;
                if (isset($_POST['RoutingID'])) {
                    $RoutingID = cleanInputData($_POST['RoutingID']);
                }
                if ($RoutingID <= 0) {
                    $srcDocID = $vmsTrnsHdrID;
                    $srcDocType = "Vault Transactions";
                    $routingID = -1;
                    $inptSlctdRtngs = "";
                    $actionToPrfrm = "Initiate";
                    echo vmsTrnsReqMsgActns($routingID, $inptSlctdRtngs, $actionToPrfrm, $srcDocID, $srcDocType);
                } else {
                    $actiontyp = isset($_POST['actiontyp']) ? $_POST['actiontyp'] : "";
                    $usrID = $_SESSION['USRID'];
                    $arry1 = explode(";", $actiontyp);
                    for ($r = 0; $r < count($arry1); $r++) {
                        if ($arry1[$r] !== "") {
                            $srcDocID = -1;
                            $srcDocType = "Vault Transactions";
                            $inptSlctdRtngs = "";
                            $routingID = $RoutingID;
                            $actionToPrfrm = $arry1[$r];
                            echo vmsTrnsReqMsgActns($routingID, $inptSlctdRtngs, $actionToPrfrm, $srcDocID, $srcDocType);
                        }
                    }
                }
            }
        } else {
            if ($vwtyp == 0) {
                if ($srcMenu == "Banking") {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1');\">
                                        <span style=\"text-decoration:none;\">Banking & Microfinance Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                } else {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                }
                echo $cntent . "<li>
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Vault Transactions</span>
				</li>
                               </ul>
                              </div>";
                $vaultTrns = array("Transfers", "Deposits", "Withdrawals",
                    "Currency Importation", "Currency Destruction", "Currency Sale",
                    "Currency Purchase", "Miscellaneous Adjustments", "All Transactions Search",
                    "Vault to GL Account Transfers", "GL to Vault Account Transfers");
                $vaultTrnsImgs = array("stock_trnsfr.png", "deposit.png", "withdraw-mny.png",
                    "Finance-Cash-Receiving-icon.png", "document_export.png", "sales_growth-512.png",
                    "98-512.png", "Inventory.png", "search.png", "payment_256.png", "transactions.png");
                $cntent = "";
                $grpcntr = 0;
                for ($i = 0; $i < count($vaultTrns); $i++) {
                    $No = $i + 1;
                    if ($i < 5) {
                        if (test_prmssns($dfltPrvldgs[$i + 13], $mdlNm) == FALSE) {
                            continue;
                        }
                    } else if ($i >= 5 && $i <= 7) {
                        if (test_prmssns($dfltPrvldgs[$i + 38], $mdlNm) == FALSE) {
                            continue;
                        }
                    } else if ($i == 9 || $i == 10) {
                        if (test_prmssns($dfltPrvldgs[53], $mdlNm) == FALSE) {
                            continue;
                        }
                    } else {
                        if (test_prmssns($dfltPrvldgs[41], $mdlNm) == FALSE) {
                            continue;
                        }
                    }
                    if ($grpcntr == 0) {
                        $cntent .= "<div class=\"row\">";
                    }

                    $cntent .= "<div class=\"col-md-3 colmd3special2\">
        <button type=\"button\" class=\"btn btn-default btn-lg btn-block\" style=\"min-height:145px;height:143px;margin-bottom:5px;\" onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=$No&srcMenu=$srcMenu');\">
            <img src=\"cmn_images/$vaultTrnsImgs[$i]\" style=\"margin:5px auto; height:58px; width:auto; position: relative; vertical-align: middle;float:none;\">
            <br/>
            <span class=\"wordwrap3\">" . ($vaultTrns[$i]) . "</span>
            <br/>&nbsp;
        </button>
            </div>";
                    if ($grpcntr == 3) {
                        $cntent .= "</div>";
                        $grpcntr = 0;
                    } else {
                        $grpcntr = $grpcntr + 1;
                    }
                }

                $cntent .= "
      </p>
    </div>";
                echo $cntent;
            } else if ($vwtyp == 1) {
                //Transfer Submenu
                //echo "Transfer Submenu";
                if ($srcMenu == "Banking") {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1');\">
                                        <span style=\"text-decoration:none;\">Banking & Microfinance Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                } else {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                }
                echo $cntent . "<li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=0&srcMenu=$srcMenu');\">
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Vault Transactions</span>
				</li>
                                <li>
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Transfer Transactions</span>
				</li>
                               </ul>
                              </div>";
                $vaultTrns = array("Transits (Specie Movement)", "Teller/Cashier Transfers",
                    "To Exam", "From Exam");
                $vaultTrnsImgs = array("delivery-icon.png", "teller2.png", "crncy_exam.png",
                    "other_trnsfr.png");
                $cntent = "";
                $grpcntr = 0;
                for ($i = 0; $i < count($vaultTrns); $i++) {
                    $No = $i + 12;
                    if (test_prmssns($dfltPrvldgs[$i + 18], $mdlNm) == FALSE) {
                        continue;
                    }
                    if ($grpcntr == 0) {
                        $cntent .= "<div class=\"row\">";
                    }

                    $cntent .= "<div class=\"col-md-3 colmd3special2\">
        <button type=\"button\" class=\"btn btn-default btn-lg btn-block\" style=\"min-height:175px;height:173px;margin-bottom:5px;\" onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=$No&srcMenu=$srcMenu');\">
            <img src=\"cmn_images/$vaultTrnsImgs[$i]\" style=\"margin:5px auto; height:78px; width:auto; position: relative; vertical-align: middle;float:none;\">
            <br/>
            <span class=\"wordwrap3\">" . ($vaultTrns[$i]) . "</span>
            <br/>&nbsp;
        </button>
            </div>";
                    if ($grpcntr == 3) {
                        $cntent .= "</div>";
                        $grpcntr = 0;
                    } else {
                        $grpcntr = $grpcntr + 1;
                    }
                }

                $cntent .= "
      </p>
    </div>";
                echo $cntent;
            } else if ($vwtyp == 2) {
                //Deposits Transactions|New Deposit Button       
                if ($srcMenu == "Banking") {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1');\">
                                        <span style=\"text-decoration:none;\">Banking & Microfinance Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                } else {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                }
                echo $cntent . "<li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=0&srcMenu=$srcMenu');\">
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Vault Transactions</span>
				</li>
                                <li>
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Deposits</span>
				</li>
                               </ul>
                              </div>";
                $trnsType = "Deposits";
                $total = get_TrnsTtl($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn);
                if ($pageNo > ceil($total / $lmtSze)) {
                    $pageNo = 1;
                } else if ($pageNo < 1) {
                    $pageNo = ceil($total / $lmtSze);
                }

                $curIdx = $pageNo - 1;
                $result = get_Trns($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn, $curIdx, $lmtSze);
                $cntr = 0;
                ?> 
                <form id='allVmsTrnsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row " style="margin-bottom:0px;padding:0px 15px 0px 15px !important;">
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <input class="form-control" id="allVmsTrnsSrchFor" type = "text" placeholder="Search For" value="<?php
                                echo trim(str_replace("%", " ", $srchFor));
                                ?>" onkeyup="enterKeyFuncAllVmsTrns(event, '', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                <input id="allVmsTrnsPageNo" type = "hidden" value="<?php echo $pageNo; ?>">
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('clear', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </label>
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                    <span class="glyphicon glyphicon-search"></span>
                                </label> 
                            </div>
                        </div>
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <span class="input-group-addon">In</span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsSrchIn">
                                    <?php
                                    $valslctdArry = array("", "", "", "");
                                    $srchInsArrys = array("Transaction Number", "Description",
                                        "Transaction Type", "Transaction Status");

                                    for ($z = 0; $z < count($srchInsArrys); $z++) {
                                        if ($srchIn == $srchInsArrys[$z]) {
                                            $valslctdArry[$z] = "selected";
                                        }
                                        ?>
                                        <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                    <?php } ?>
                                </select>
                                <span class="input-group-addon" style="max-width: 1px !important;padding:0px !important;width:1px !important;border:none !important;"></span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsDsplySze" style="min-width:65px !important;">                            
                                    <?php
                                    $valslctdArry = array("", "", "", "", "", "",
                                        "", "");
                                    $dsplySzeArry = array(1, 5, 10, 15, 30, 50, 100,
                                        500, 1000);
                                    for ($y = 0; $y < count($dsplySzeArry); $y++) {
                                        if ($lmtSze == $dsplySzeArry[$y]) {
                                            $valslctdArry[$y] = "selected";
                                        } else {
                                            $valslctdArry[$y] = "";
                                        }
                                        ?>
                                        <option value="<?php echo $dsplySzeArry[$y]; ?>" <?php echo $valslctdArry[$y]; ?>><?php echo $dsplySzeArry[$y]; ?></option>                            
                                        <?php
                                    }
                                    ?>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4" style="padding:0px 1px 0px 1px !important;">
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text" id="allVmsTrnsStrtDate" name="allVmsTrnsStrtDate" value="<?php
                                    echo substr($qStrtDte, 0, 11);
                                    ?>" placeholder="Start Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text"  id="allVmsTrnsEndDate" name="allVmsTrnsEndDate" value="<?php
                                    echo substr($qEndDte, 0, 11);
                                    ?>" placeholder="End Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>                            
                        </div>
                        <div class="col-lg-2" style="padding:0px 1px 0px 1px !important;">
                            <nav aria-label="Page navigation">
                                <ul class="pagination" style="margin: 0px !important;">
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('previous', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('next', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <div class="row " style="margin-bottom:2px;padding:2px 15px 2px 15px !important">   
                        <div class="col-md-12" style="padding:2px 1px 2px 1px !important;border-top:1px solid #ddd;border-bottom:1px solid #ddd;">
                            <div class="col-md-6" style="padding:0px 1px 0px 1px !important;">
                                <button type="button" class="btn btn-default btn-sm" onclick="getOneVmsTrnsForm(-1, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');">
                                    <img src="cmn_images/add1-64.png" style="left: 0.5%; padding-right: 5px; height:20px; width:auto; position: relative; vertical-align: middle;">
                                    New Client Deposit
                                </button>
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <?php
                                        $nonAprvdChekd = "";
                                        if ($qUnathrzdOnly == "true") {
                                            $nonAprvdChekd = "checked=\"true\"";
                                        }
                                        $notValidChekd = "";
                                        if ($qInvalidOnly == "true") {
                                            $notValidChekd = "checked=\"true\"";
                                        }
                                        ?>
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwUnaprvd" name="allVmsTrnsShwUnaprvd" <?php echo $nonAprvdChekd; ?>>
                                        Unauthorized Trns.
                                    </label>
                                </div>                            
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwInvld" name="allVmsTrnsShwInvld"  <?php echo $notValidChekd; ?>>
                                        Only Invalid Trns.
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">&nbsp;</div>
                        </div>
                    </div>
                </form>
                <form id='allVmsTrnsHdrsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row"> 
                        <div  class="col-md-12">
                            <table class="table table-striped table-bordered table-responsive" id="allVmsTrnsHdrsTable" cellspacing="0" width="100%" style="width:100%;">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <?php if ($canEdtTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <th>...</th>		
                                        <th>Reference No.</th>
                                        <th>Trns. Date</th>
                                        <th>Remark/Narration</th>
                                        <th style="text-align:right;">CUR.</th>
                                        <th style="text-align:right;min-width: 100px;width: 100px;">Transaction Amount</th>
                                        <th>Authorization Status</th>
                                        <th>Validity Status</th>
                                        <th>...</th>
                                        <?php if ($canDelTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <?php if ($canVwRcHstry === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                    </tr>
                                </thead>
                                <tbody>
                                    <?php
                                    $reportTitle = $trnsType;
                                    $reportName = "VMS Transaction Voucher";
                                    if ($trnsType == $trnsTypes[4] || $trnsType == $trnsTypes[5] || $trnsType == $trnsTypes[6]) {
                                        $reportName = "VMS DEP/WITHDRAW Voucher";
                                    }
                                    $rptID = getRptID($reportName);
                                    $prmID1 = getParamIDUseSQLRep("{:trns_id}", $rptID);
                                    $prmID2 = getParamIDUseSQLRep("{:documentTitle}", $rptID);
                                    while ($row = loc_db_fetch_array($result)) {
                                        $trnsID = $row[0];
                                        $paramRepsNVals = $prmID1 . "~" . $trnsID . "|" . $prmID2 . "~" . $reportTitle . "|-130~" . $reportTitle . "|-190~PDF";
                                        $paramStr = urlencode($paramRepsNVals);
                                        $cntr += 1;
                                        ?>
                                        <tr id="allVmsTrnsHdrsRow_<?php echo $cntr; ?>">                                    
                                            <td class="lovtd"><?php echo ($curIdx * $lmtSze) + ($cntr); ?></td>
                                            <?php if ($canEdtTrns === true) { ?>                                    
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Edit Transaction" 
                                                            onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                        <!--<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>-->
                                                        <img src="cmn_images/edit32.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Print Transaction" onclick="getSilentRptsRnSts(<?php echo $rptID; ?>, -1, '<?php echo $paramStr; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/pdf.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <td class="lovtd">
                                                <?php echo $row[2]; ?>
                                                <input type="hidden" id="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" name="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" value="<?php echo $row[0]; ?>">
                                            </td>
                                            <td class="lovtd"><?php echo $row[1]; ?></td>
                                            <td class="lovtd"><?php echo "[" . $row[3] . "] " . $row[4]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;"><?php echo $row[31]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;color:blue;"><?php
                                                echo number_format((float) $row[21], 2);
                                                ?></td>
                                            <td class="lovtd"><?php echo $row[10]; ?></td>
                                            <td class="lovtd"><?php echo $row[12]; ?></td>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Transaction Details" onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 30, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/kghostview.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <?php if ($canDelTrns === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Delete Transaction" onclick="delVmsTrnsHdr('allVmsTrnsHdrsRow_<?php echo $cntr; ?>')" style="padding:2px !important;">
                                                        <img src="cmn_images/no.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <?php if ($canVwRcHstry === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Record History" onclick="getRecHstry('<?php
                                                    echo urlencode(encrypt1(($row[0] . "|vms.vms_transactions_hdr|trans_hdr_id"), $smplTokenWord1));
                                                    ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/Information.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                        </tr>
                                        <?php
                                    }
                                    ?>
                                </tbody>
                            </table>
                        </div>                     
                    </div>
                </form>
                <?php
            } else if ($vwtyp == 3) {
                //Client Withdrawal Transactions|New Withdrawal Button      
                if ($srcMenu == "Banking") {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1');\">
                                        <span style=\"text-decoration:none;\">Banking & Microfinance Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                } else {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                }
                echo $cntent . "<li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=0&srcMenu=$srcMenu');\">
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Vault Transactions</span>
				</li>
                                <li>
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Withdrawals</span>
				</li>
                               </ul>
                              </div>";
                $trnsType = "Withdrawals";
                $total = get_TrnsTtl($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn);
                if ($pageNo > ceil($total / $lmtSze)) {
                    $pageNo = 1;
                } else if ($pageNo < 1) {
                    $pageNo = ceil($total / $lmtSze);
                }

                $curIdx = $pageNo - 1;
                $result = get_Trns($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn, $curIdx, $lmtSze);
                $cntr = 0;
                ?> 
                <form id='allVmsTrnsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row " style="margin-bottom:0px;padding:0px 15px 0px 15px !important;">
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <input class="form-control" id="allVmsTrnsSrchFor" type = "text" placeholder="Search For" value="<?php
                                echo trim(str_replace("%", " ", $srchFor));
                                ?>" onkeyup="enterKeyFuncAllVmsTrns(event, '', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                <input id="allVmsTrnsPageNo" type = "hidden" value="<?php echo $pageNo; ?>">
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('clear', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </label>
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                    <span class="glyphicon glyphicon-search"></span>
                                </label> 
                            </div>
                        </div>
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <span class="input-group-addon">In</span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsSrchIn">
                                    <?php
                                    $valslctdArry = array("", "", "", "");
                                    $srchInsArrys = array("Transaction Number", "Description",
                                        "Transaction Type", "Transaction Status");

                                    for ($z = 0; $z < count($srchInsArrys); $z++) {
                                        if ($srchIn == $srchInsArrys[$z]) {
                                            $valslctdArry[$z] = "selected";
                                        }
                                        ?>
                                        <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                    <?php } ?>
                                </select>
                                <span class="input-group-addon" style="max-width: 1px !important;padding:0px !important;width:1px !important;border:none !important;"></span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsDsplySze" style="min-width:65px !important;">                            
                                    <?php
                                    $valslctdArry = array("", "", "", "", "", "",
                                        "", "");
                                    $dsplySzeArry = array(1, 5, 10, 15, 30, 50, 100,
                                        500, 1000);
                                    for ($y = 0; $y < count($dsplySzeArry); $y++) {
                                        if ($lmtSze == $dsplySzeArry[$y]) {
                                            $valslctdArry[$y] = "selected";
                                        } else {
                                            $valslctdArry[$y] = "";
                                        }
                                        ?>
                                        <option value="<?php echo $dsplySzeArry[$y]; ?>" <?php echo $valslctdArry[$y]; ?>><?php echo $dsplySzeArry[$y]; ?></option>                            
                                        <?php
                                    }
                                    ?>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4" style="padding:0px 1px 0px 1px !important;">
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text" id="allVmsTrnsStrtDate" name="allVmsTrnsStrtDate" value="<?php
                                    echo substr($qStrtDte, 0, 11);
                                    ?>" placeholder="Start Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text"  id="allVmsTrnsEndDate" name="allVmsTrnsEndDate" value="<?php
                                    echo substr($qEndDte, 0, 11);
                                    ?>" placeholder="End Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>                            
                        </div>
                        <div class="col-lg-2" style="padding:0px 1px 0px 1px !important;">
                            <nav aria-label="Page navigation">
                                <ul class="pagination" style="margin: 0px !important;">
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('previous', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('next', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <div class="row " style="margin-bottom:2px;padding:2px 15px 2px 15px !important">   
                        <div class="col-md-12" style="padding:2px 1px 2px 1px !important;border-top:1px solid #ddd;border-bottom:1px solid #ddd;">
                            <div class="col-md-6" style="padding:0px 1px 0px 1px !important;">
                                <button type="button" class="btn btn-default btn-sm" onclick="getOneVmsTrnsForm(-1, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');">
                                    <img src="cmn_images/add1-64.png" style="left: 0.5%; padding-right: 5px; height:20px; width:auto; position: relative; vertical-align: middle;">
                                    New Client Withdrawal
                                </button>
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <?php
                                        $nonAprvdChekd = "";
                                        if ($qUnathrzdOnly == "true") {
                                            $nonAprvdChekd = "checked=\"true\"";
                                        }
                                        $notValidChekd = "";
                                        if ($qInvalidOnly == "true") {
                                            $notValidChekd = "checked=\"true\"";
                                        }
                                        ?>
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwUnaprvd" name="allVmsTrnsShwUnaprvd" <?php echo $nonAprvdChekd; ?>>
                                        Unauthorized Trns.
                                    </label>
                                </div>                            
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwInvld" name="allVmsTrnsShwInvld"  <?php echo $notValidChekd; ?>>
                                        Only Invalid Trns.
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">&nbsp;</div>
                        </div>
                    </div>
                </form>
                <form id='allVmsTrnsHdrsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row"> 
                        <div  class="col-md-12">
                            <table class="table table-striped table-bordered table-responsive" id="allVmsTrnsHdrsTable" cellspacing="0" width="100%" style="width:100%;">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <?php if ($canEdtTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <th>...</th>		
                                        <th>Reference No.</th>
                                        <th>Trns. Date</th>
                                        <th>Remark/Narration</th>
                                        <th style="text-align:right;">CUR.</th>
                                        <th style="text-align:right;min-width: 100px;width: 100px;">Transaction Amount</th>
                                        <th>Authorization Status</th>
                                        <th>Validity Status</th>
                                        <th>...</th>
                                        <?php if ($canDelTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <?php if ($canVwRcHstry === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                    </tr>
                                </thead>
                                <tbody>
                                    <?php
                                    $reportTitle = $trnsType;
                                    $reportName = "VMS Transaction Voucher";
                                    if ($trnsType == $trnsTypes[4] || $trnsType == $trnsTypes[5] || $trnsType == $trnsTypes[6]) {
                                        $reportName = "VMS DEP/WITHDRAW Voucher";
                                    }
                                    $rptID = getRptID($reportName);
                                    $prmID1 = getParamIDUseSQLRep("{:trns_id}", $rptID);
                                    $prmID2 = getParamIDUseSQLRep("{:documentTitle}", $rptID);
                                    while ($row = loc_db_fetch_array($result)) {
                                        $trnsID = $row[0];
                                        $paramRepsNVals = $prmID1 . "~" . $trnsID . "|" . $prmID2 . "~" . $reportTitle . "|-130~" . $reportTitle . "|-190~PDF";
                                        $paramStr = urlencode($paramRepsNVals);
                                        $cntr += 1;
                                        ?>
                                        <tr id="allVmsTrnsHdrsRow_<?php echo $cntr; ?>">                                    
                                            <td class="lovtd"><?php echo ($curIdx * $lmtSze) + ($cntr); ?></td>
                                            <?php if ($canEdtTrns === true) { ?>                                    
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Edit Transaction" 
                                                            onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/edit32.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Print Transaction" onclick="getSilentRptsRnSts(<?php echo $rptID; ?>, -1, '<?php echo $paramStr; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/pdf.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <td class="lovtd">
                                                <?php echo $row[2]; ?>
                                                <input type="hidden" id="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" name="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" value="<?php echo $row[0]; ?>" placeholder="Start Date">
                                            </td>
                                            <td class="lovtd"><?php echo $row[1]; ?></td>
                                            <td class="lovtd"><?php echo "[" . $row[3] . "] " . $row[4]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;"><?php echo $row[31]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;color:blue;"><?php
                                                echo number_format((float) $row[21], 2);
                                                ?></td>
                                            <td class="lovtd"><?php echo $row[10]; ?></td>
                                            <td class="lovtd"><?php echo $row[12]; ?></td>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Transaction Details" onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 30, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/kghostview.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <?php if ($canDelTrns === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Delete Transaction" onclick="delVmsTrnsHdr('allVmsTrnsHdrsRow_<?php echo $cntr; ?>')" style="padding:2px !important;">
                                                        <img src="cmn_images/no.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <?php if ($canVwRcHstry === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Record History" onclick="getRecHstry('<?php
                                                    echo urlencode(encrypt1(($row[0] . "|vms.vms_transactions_hdr|trans_hdr_id"), $smplTokenWord1));
                                                    ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/Information.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                        </tr>
                                        <?php
                                    }
                                    ?>
                                </tbody>
                            </table>
                        </div>                     
                    </div>
                </form>
                <?php
            } else if ($vwtyp == 4) {
                //Currency Importation|New Misc. Receipt Button    
                if ($srcMenu == "Banking") {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1');\">
                                        <span style=\"text-decoration:none;\">Banking & Microfinance Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                } else {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                }
                echo $cntent . "<li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=0&srcMenu=$srcMenu');\">
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Vault Transactions</span>
				</li>
                                <li>
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Currency Importation</span>
				</li>
                               </ul>
                              </div>";
                $trnsType = "Currency Importation";
                $total = get_TrnsTtl($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn);
                if ($pageNo > ceil($total / $lmtSze)) {
                    $pageNo = 1;
                } else if ($pageNo < 1) {
                    $pageNo = ceil($total / $lmtSze);
                }

                $curIdx = $pageNo - 1;
                $result = get_Trns($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn, $curIdx, $lmtSze);
                $cntr = 0;
                ?> 
                <form id='allVmsTrnsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row " style="margin-bottom:0px;padding:0px 15px 0px 15px !important;">
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <input class="form-control" id="allVmsTrnsSrchFor" type = "text" placeholder="Search For" value="<?php
                                echo trim(str_replace("%", " ", $srchFor));
                                ?>" onkeyup="enterKeyFuncAllVmsTrns(event, '', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                <input id="allVmsTrnsPageNo" type = "hidden" value="<?php echo $pageNo; ?>">
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('clear', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </label>
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                    <span class="glyphicon glyphicon-search"></span>
                                </label> 
                            </div>
                        </div>
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <span class="input-group-addon">In</span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsSrchIn">
                                    <?php
                                    $valslctdArry = array("", "", "", "");
                                    $srchInsArrys = array("Transaction Number", "Description",
                                        "Transaction Type", "Transaction Status");

                                    for ($z = 0; $z < count($srchInsArrys); $z++) {
                                        if ($srchIn == $srchInsArrys[$z]) {
                                            $valslctdArry[$z] = "selected";
                                        }
                                        ?>
                                        <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                    <?php } ?>
                                </select>
                                <span class="input-group-addon" style="max-width: 1px !important;padding:0px !important;width:1px !important;border:none !important;"></span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsDsplySze" style="min-width:65px !important;">                            
                                    <?php
                                    $valslctdArry = array("", "", "", "", "", "",
                                        "", "");
                                    $dsplySzeArry = array(1, 5, 10, 15, 30, 50, 100,
                                        500, 1000);
                                    for ($y = 0; $y < count($dsplySzeArry); $y++) {
                                        if ($lmtSze == $dsplySzeArry[$y]) {
                                            $valslctdArry[$y] = "selected";
                                        } else {
                                            $valslctdArry[$y] = "";
                                        }
                                        ?>
                                        <option value="<?php echo $dsplySzeArry[$y]; ?>" <?php echo $valslctdArry[$y]; ?>><?php echo $dsplySzeArry[$y]; ?></option>                            
                                        <?php
                                    }
                                    ?>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4" style="padding:0px 1px 0px 1px !important;">
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text" id="allVmsTrnsStrtDate" name="allVmsTrnsStrtDate" value="<?php
                                    echo substr($qStrtDte, 0, 11);
                                    ?>" placeholder="Start Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text"  id="allVmsTrnsEndDate" name="allVmsTrnsEndDate" value="<?php
                                    echo substr($qEndDte, 0, 11);
                                    ?>" placeholder="End Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>                            
                        </div>
                        <div class="col-lg-2" style="padding:0px 1px 0px 1px !important;">
                            <nav aria-label="Page navigation">
                                <ul class="pagination" style="margin: 0px !important;">
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('previous', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('next', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <div class="row " style="margin-bottom:2px;padding:2px 15px 2px 15px !important">   
                        <div class="col-md-12" style="padding:2px 1px 2px 1px !important;border-top:1px solid #ddd;border-bottom:1px solid #ddd;">
                            <div class="col-md-6" style="padding:0px 1px 0px 1px !important;">
                                <button type="button" class="btn btn-default btn-sm" onclick="getOneVmsTrnsForm(-1, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');">
                                    <img src="cmn_images/add1-64.png" style="left: 0.5%; padding-right: 5px; height:20px; width:auto; position: relative; vertical-align: middle;">
                                    New Currency Importation
                                </button>
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <?php
                                        $nonAprvdChekd = "";
                                        if ($qUnathrzdOnly == "true") {
                                            $nonAprvdChekd = "checked=\"true\"";
                                        }
                                        $notValidChekd = "";
                                        if ($qInvalidOnly == "true") {
                                            $notValidChekd = "checked=\"true\"";
                                        }
                                        ?>
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwUnaprvd" name="allVmsTrnsShwUnaprvd" <?php echo $nonAprvdChekd; ?>>
                                        Unauthorized Trns.
                                    </label>
                                </div>                            
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwInvld" name="allVmsTrnsShwInvld"  <?php echo $notValidChekd; ?>>
                                        Only Invalid Trns.
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">&nbsp;</div>
                        </div>
                    </div>
                </form>
                <form id='allVmsTrnsHdrsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row"> 
                        <div  class="col-md-12">
                            <table class="table table-striped table-bordered table-responsive" id="allVmsTrnsHdrsTable" cellspacing="0" width="100%" style="width:100%;">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <?php if ($canEdtTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <th>...</th>		
                                        <th>Reference No.</th>
                                        <th>Trns. Date</th>
                                        <th>Remark/Narration</th>
                                        <th style="text-align:right;">CUR.</th>
                                        <th style="text-align:right;min-width: 100px;width: 100px;">Transaction Amount</th>
                                        <th>Authorization Status</th>
                                        <th>Validity Status</th>
                                        <th>...</th>
                                        <?php if ($canDelTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <?php if ($canVwRcHstry === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                    </tr>
                                </thead>
                                <tbody>
                                    <?php
                                    $reportTitle = $trnsType;
                                    $reportName = "VMS Transaction Voucher";
                                    if ($trnsType == $trnsTypes[4] || $trnsType == $trnsTypes[5] || $trnsType == $trnsTypes[6]) {
                                        $reportName = "VMS DEP/WITHDRAW Voucher";
                                    }
                                    $rptID = getRptID($reportName);
                                    $prmID1 = getParamIDUseSQLRep("{:trns_id}", $rptID);
                                    $prmID2 = getParamIDUseSQLRep("{:documentTitle}", $rptID);
                                    while ($row = loc_db_fetch_array($result)) {
                                        $trnsID = $row[0];
                                        $paramRepsNVals = $prmID1 . "~" . $trnsID . "|" . $prmID2 . "~" . $reportTitle . "|-130~" . $reportTitle . "|-190~PDF";
                                        $paramStr = urlencode($paramRepsNVals);
                                        $cntr += 1;
                                        ?>
                                        <tr id="allVmsTrnsHdrsRow_<?php echo $cntr; ?>">                                    
                                            <td class="lovtd"><?php echo ($curIdx * $lmtSze) + ($cntr); ?></td>
                                            <?php if ($canEdtTrns === true) { ?>                                    
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Edit Transaction" 
                                                            onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/edit32.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Print Transaction" onclick="getSilentRptsRnSts(<?php echo $rptID; ?>, -1, '<?php echo $paramStr; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/pdf.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <td class="lovtd">
                                                <?php echo $row[2]; ?>
                                                <input type="hidden" id="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" name="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" value="<?php echo $row[0]; ?>" placeholder="Start Date">
                                            </td>
                                            <td class="lovtd"><?php echo $row[1]; ?></td>
                                            <td class="lovtd"><?php echo "[" . $row[3] . "] " . $row[4]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;"><?php echo $row[31]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;color:blue;"><?php
                                                echo number_format((float) $row[21], 2);
                                                ?></td>
                                            <td class="lovtd"><?php echo $row[10]; ?></td>
                                            <td class="lovtd"><?php echo $row[12]; ?></td>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Transaction Details" onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 30, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/kghostview.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <?php if ($canDelTrns === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Delete Transaction" onclick="delVmsTrnsHdr('allVmsTrnsHdrsRow_<?php echo $cntr; ?>')" style="padding:2px !important;">
                                                        <img src="cmn_images/no.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <?php if ($canVwRcHstry === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Record History" onclick="getRecHstry('<?php
                                                    echo urlencode(encrypt1(($row[0] . "|vms.vms_transactions_hdr|trans_hdr_id"), $smplTokenWord1));
                                                    ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/Information.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                        </tr>
                                        <?php
                                    }
                                    ?>
                                </tbody>
                            </table>
                        </div>                     
                    </div>
                </form>
                <?php
            } else if ($vwtyp == 5) {
                //Currency Destruction|New Misc Issues Button   
                if ($srcMenu == "Banking") {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1');\">
                                        <span style=\"text-decoration:none;\">Banking & Microfinance Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                } else {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                }
                echo $cntent . "<li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=0&srcMenu=$srcMenu');\">
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Vault Transactions</span>
				</li>
                                <li>
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Currency Destruction</span>
				</li>
                               </ul>
                              </div>";
                $trnsType = "Currency Destruction";
                $total = get_TrnsTtl($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn);
                if ($pageNo > ceil($total / $lmtSze)) {
                    $pageNo = 1;
                } else if ($pageNo < 1) {
                    $pageNo = ceil($total / $lmtSze);
                }

                $curIdx = $pageNo - 1;
                $result = get_Trns($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn, $curIdx, $lmtSze);
                $cntr = 0;
                ?> 
                <form id='allVmsTrnsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row " style="margin-bottom:0px;padding:0px 15px 0px 15px !important;">
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <input class="form-control" id="allVmsTrnsSrchFor" type = "text" placeholder="Search For" value="<?php
                                echo trim(str_replace("%", " ", $srchFor));
                                ?>" onkeyup="enterKeyFuncAllVmsTrns(event, '', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                <input id="allVmsTrnsPageNo" type = "hidden" value="<?php echo $pageNo; ?>">
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('clear', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </label>
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                    <span class="glyphicon glyphicon-search"></span>
                                </label> 
                            </div>
                        </div>
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <span class="input-group-addon">In</span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsSrchIn">
                                    <?php
                                    $valslctdArry = array("", "", "", "");
                                    $srchInsArrys = array("Transaction Number", "Description",
                                        "Transaction Type", "Transaction Status");

                                    for ($z = 0; $z < count($srchInsArrys); $z++) {
                                        if ($srchIn == $srchInsArrys[$z]) {
                                            $valslctdArry[$z] = "selected";
                                        }
                                        ?>
                                        <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                    <?php } ?>
                                </select>
                                <span class="input-group-addon" style="max-width: 1px !important;padding:0px !important;width:1px !important;border:none !important;"></span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsDsplySze" style="min-width:65px !important;">                            
                                    <?php
                                    $valslctdArry = array("", "", "", "", "", "",
                                        "", "");
                                    $dsplySzeArry = array(1, 5, 10, 15, 30, 50, 100,
                                        500, 1000);
                                    for ($y = 0; $y < count($dsplySzeArry); $y++) {
                                        if ($lmtSze == $dsplySzeArry[$y]) {
                                            $valslctdArry[$y] = "selected";
                                        } else {
                                            $valslctdArry[$y] = "";
                                        }
                                        ?>
                                        <option value="<?php echo $dsplySzeArry[$y]; ?>" <?php echo $valslctdArry[$y]; ?>><?php echo $dsplySzeArry[$y]; ?></option>                            
                                        <?php
                                    }
                                    ?>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4" style="padding:0px 1px 0px 1px !important;">
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text" id="allVmsTrnsStrtDate" name="allVmsTrnsStrtDate" value="<?php
                                    echo substr($qStrtDte, 0, 11);
                                    ?>" placeholder="Start Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text"  id="allVmsTrnsEndDate" name="allVmsTrnsEndDate" value="<?php
                                    echo substr($qEndDte, 0, 11);
                                    ?>" placeholder="End Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>                            
                        </div>
                        <div class="col-lg-2" style="padding:0px 1px 0px 1px !important;">
                            <nav aria-label="Page navigation">
                                <ul class="pagination" style="margin: 0px !important;">
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('previous', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('next', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <div class="row " style="margin-bottom:2px;padding:2px 15px 2px 15px !important">   
                        <div class="col-md-12" style="padding:2px 1px 2px 1px !important;border-top:1px solid #ddd;border-bottom:1px solid #ddd;">
                            <div class="col-md-6" style="padding:0px 1px 0px 1px !important;">
                                <button type="button" class="btn btn-default btn-sm" onclick="getOneVmsTrnsForm(-1, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');">
                                    <img src="cmn_images/add1-64.png" style="left: 0.5%; padding-right: 5px; height:20px; width:auto; position: relative; vertical-align: middle;">
                                    New Currency Destruction
                                </button>
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <?php
                                        $nonAprvdChekd = "";
                                        if ($qUnathrzdOnly == "true") {
                                            $nonAprvdChekd = "checked=\"true\"";
                                        }
                                        $notValidChekd = "";
                                        if ($qInvalidOnly == "true") {
                                            $notValidChekd = "checked=\"true\"";
                                        }
                                        ?>
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwUnaprvd" name="allVmsTrnsShwUnaprvd" <?php echo $nonAprvdChekd; ?>>
                                        Unauthorized Trns.
                                    </label>
                                </div>                            
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwInvld" name="allVmsTrnsShwInvld"  <?php echo $notValidChekd; ?>>
                                        Only Invalid Trns.
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">&nbsp;</div>
                        </div>
                    </div>
                </form>
                <form id='allVmsTrnsHdrsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row"> 
                        <div  class="col-md-12">
                            <table class="table table-striped table-bordered table-responsive" id="allVmsTrnsHdrsTable" cellspacing="0" width="100%" style="width:100%;">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <?php if ($canEdtTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <th>...</th>		
                                        <th>Reference No.</th>
                                        <th>Trns. Date</th>
                                        <th>Remark/Narration</th>
                                        <th style="text-align:right;">CUR.</th>
                                        <th style="text-align:right;min-width: 100px;width: 100px;">Transaction Amount</th>
                                        <th>Authorization Status</th>
                                        <th>Validity Status</th>
                                        <th>...</th>
                                        <?php if ($canDelTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <?php if ($canVwRcHstry === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                    </tr>
                                </thead>
                                <tbody>
                                    <?php
                                    $reportTitle = $trnsType;
                                    $reportName = "VMS Transaction Voucher";
                                    if ($trnsType == $trnsTypes[4] || $trnsType == $trnsTypes[5] || $trnsType == $trnsTypes[6]) {
                                        $reportName = "VMS DEP/WITHDRAW Voucher";
                                    }
                                    $rptID = getRptID($reportName);
                                    $prmID1 = getParamIDUseSQLRep("{:trns_id}", $rptID);
                                    $prmID2 = getParamIDUseSQLRep("{:documentTitle}", $rptID);
                                    while ($row = loc_db_fetch_array($result)) {
                                        $trnsID = $row[0];
                                        $paramRepsNVals = $prmID1 . "~" . $trnsID . "|" . $prmID2 . "~" . $reportTitle . "|-130~" . $reportTitle . "|-190~PDF";
                                        $paramStr = urlencode($paramRepsNVals);
                                        $cntr += 1;
                                        ?>
                                        <tr id="allVmsTrnsHdrsRow_<?php echo $cntr; ?>">                                    
                                            <td class="lovtd"><?php echo ($curIdx * $lmtSze) + ($cntr); ?></td>
                                            <?php if ($canEdtTrns === true) { ?>                                    
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Edit Transaction" 
                                                            onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/edit32.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Print Transaction" onclick="getSilentRptsRnSts(<?php echo $rptID; ?>, -1, '<?php echo $paramStr; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/pdf.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <td class="lovtd">
                                                <?php echo $row[2]; ?>
                                                <input type="hidden" id="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" name="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" value="<?php echo $row[0]; ?>" placeholder="Start Date">
                                            </td>
                                            <td class="lovtd"><?php echo $row[1]; ?></td>
                                            <td class="lovtd"><?php echo "[" . $row[3] . "] " . $row[4]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;"><?php echo $row[31]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;color:blue;"><?php
                                                echo number_format((float) $row[21], 2);
                                                ?></td>
                                            <td class="lovtd"><?php echo $row[10]; ?></td>
                                            <td class="lovtd"><?php echo $row[12]; ?></td>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Transaction Details" onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 30, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/kghostview.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <?php if ($canDelTrns === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Delete Transaction" onclick="delVmsTrnsHdr('allVmsTrnsHdrsRow_<?php echo $cntr; ?>')" style="padding:2px !important;">
                                                        <img src="cmn_images/no.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <?php if ($canVwRcHstry === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Record History" onclick="getRecHstry('<?php
                                                    echo urlencode(encrypt1(($row[0] . "|vms.vms_transactions_hdr|trans_hdr_id"), $smplTokenWord1));
                                                    ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/Information.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                        </tr>
                                        <?php
                                    }
                                    ?>
                                </tbody>
                            </table>
                        </div>                     
                    </div>
                </form>
                <?php
            } else if ($vwtyp == 6) {
                //Currency Sale
                if ($srcMenu == "Banking") {
                    if ($subSrcMenu == "TO") {
                        $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1');\">
                                        <span style=\"text-decoration:none;\">Banking & Microfinance Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1&pg=3');\">
						<span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span><span style=\"text-decoration:none;\"> Core Banking Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1&q=SUBMENUS&pg=3&subPgNo=3.1');\">
                                                <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
						<span style=\"text-decoration:none;\">Teller Operations</span>
                                </li>";
                    } else {
                        $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1');\">
                                        <span style=\"text-decoration:none;\">Banking & Microfinance Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                    }
                } else {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                }
                echo $cntent . "<li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=0&srcMenu=$srcMenu');\">
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Vault Transactions</span>
				</li>
                                <li>
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Currency Sale</span>
				</li>
                               </ul>
                              </div>";
                $trnsType = "Currency Sale";
                $total = get_TrnsTtl($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn);
                if ($pageNo > ceil($total / $lmtSze)) {
                    $pageNo = 1;
                } else if ($pageNo < 1) {
                    $pageNo = ceil($total / $lmtSze);
                }

                $curIdx = $pageNo - 1;
                $result = get_Trns($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn, $curIdx, $lmtSze);
                $cntr = 0;
                ?> 
                <form id='allVmsTrnsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row " style="margin-bottom:0px;padding:0px 15px 0px 15px !important;">
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <input class="form-control" id="allVmsTrnsSrchFor" type = "text" placeholder="Search For" value="<?php
                                echo trim(str_replace("%", " ", $srchFor));
                                ?>" onkeyup="enterKeyFuncAllVmsTrns(event, '', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                <input id="allVmsTrnsPageNo" type = "hidden" value="<?php echo $pageNo; ?>">
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('clear', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </label>
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                    <span class="glyphicon glyphicon-search"></span>
                                </label> 
                            </div>
                        </div>
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <span class="input-group-addon">In</span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsSrchIn">
                                    <?php
                                    $valslctdArry = array("", "", "", "");
                                    $srchInsArrys = array("Transaction Number", "Description",
                                        "Transaction Type", "Transaction Status");

                                    for ($z = 0; $z < count($srchInsArrys); $z++) {
                                        if ($srchIn == $srchInsArrys[$z]) {
                                            $valslctdArry[$z] = "selected";
                                        }
                                        ?>
                                        <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                    <?php } ?>
                                </select>
                                <span class="input-group-addon" style="max-width: 1px !important;padding:0px !important;width:1px !important;border:none !important;"></span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsDsplySze" style="min-width:65px !important;">                            
                                    <?php
                                    $valslctdArry = array("", "", "", "", "", "",
                                        "", "");
                                    $dsplySzeArry = array(1, 5, 10, 15, 30, 50, 100,
                                        500, 1000);
                                    for ($y = 0; $y < count($dsplySzeArry); $y++) {
                                        if ($lmtSze == $dsplySzeArry[$y]) {
                                            $valslctdArry[$y] = "selected";
                                        } else {
                                            $valslctdArry[$y] = "";
                                        }
                                        ?>
                                        <option value="<?php echo $dsplySzeArry[$y]; ?>" <?php echo $valslctdArry[$y]; ?>><?php echo $dsplySzeArry[$y]; ?></option>                            
                                        <?php
                                    }
                                    ?>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4" style="padding:0px 1px 0px 1px !important;">
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text" id="allVmsTrnsStrtDate" name="allVmsTrnsStrtDate" value="<?php
                                    echo substr($qStrtDte, 0, 11);
                                    ?>" placeholder="Start Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text"  id="allVmsTrnsEndDate" name="allVmsTrnsEndDate" value="<?php
                                    echo substr($qEndDte, 0, 11);
                                    ?>" placeholder="End Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>                            
                        </div>
                        <div class="col-lg-2" style="padding:0px 1px 0px 1px !important;">
                            <nav aria-label="Page navigation">
                                <ul class="pagination" style="margin: 0px !important;">
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('previous', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('next', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <div class="row " style="margin-bottom:2px;padding:2px 15px 2px 15px !important">   
                        <div class="col-md-12" style="padding:2px 1px 2px 1px !important;border-top:1px solid #ddd;border-bottom:1px solid #ddd;">
                            <div class="col-md-6" style="padding:0px 1px 0px 1px !important;">
                                <button type="button" class="btn btn-default btn-sm" onclick="getOneVmsTrnsForm(-1, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');">
                                    <img src="cmn_images/add1-64.png" style="left: 0.5%; padding-right: 5px; height:20px; width:auto; position: relative; vertical-align: middle;">
                                    New Currency Sale
                                </button>
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <?php
                                        $nonAprvdChekd = "";
                                        if ($qUnathrzdOnly == "true") {
                                            $nonAprvdChekd = "checked=\"true\"";
                                        }
                                        $notValidChekd = "";
                                        if ($qInvalidOnly == "true") {
                                            $notValidChekd = "checked=\"true\"";
                                        }
                                        ?>
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwUnaprvd" name="allVmsTrnsShwUnaprvd" <?php echo $nonAprvdChekd; ?>>
                                        Unauthorized Trns.
                                    </label>
                                </div>                            
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwInvld" name="allVmsTrnsShwInvld"  <?php echo $notValidChekd; ?>>
                                        Only Invalid Trns.
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">&nbsp;</div>
                        </div>
                    </div>
                </form>
                <form id='allVmsTrnsHdrsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row"> 
                        <div  class="col-md-12">
                            <table class="table table-striped table-bordered table-responsive" id="allVmsTrnsHdrsTable" cellspacing="0" width="100%" style="width:100%;">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <?php if ($canEdtTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <th>...</th>		
                                        <th>Reference No.</th>
                                        <th>Trns. Date</th>
                                        <th>Remark/Narration</th>
                                        <th style="text-align:right;">CUR.</th>
                                        <th style="text-align:right;min-width: 100px;width: 100px;">Transaction Amount</th>
                                        <th>Authorization Status</th>
                                        <th>Validity Status</th>
                                        <th>...</th>
                                        <?php if ($canDelTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <?php if ($canVwRcHstry === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                    </tr>
                                </thead>
                                <tbody>
                                    <?php
                                    $reportTitle = $trnsType;
                                    $reportName = "VMS Transaction Voucher";
                                    if ($trnsType == $trnsTypes[4] || $trnsType == $trnsTypes[5] || $trnsType == $trnsTypes[6]) {
                                        $reportName = "VMS DEP/WITHDRAW Voucher";
                                    }
                                    $rptID = getRptID($reportName);
                                    $prmID1 = getParamIDUseSQLRep("{:trns_id}", $rptID);
                                    $prmID2 = getParamIDUseSQLRep("{:documentTitle}", $rptID);
                                    while ($row = loc_db_fetch_array($result)) {
                                        $trnsID = $row[0];
                                        $paramRepsNVals = $prmID1 . "~" . $trnsID . "|" . $prmID2 . "~" . $reportTitle . "|-130~" . $reportTitle . "|-190~PDF";
                                        $paramStr = urlencode($paramRepsNVals);
                                        $cntr += 1;
                                        ?>
                                        <tr id="allVmsTrnsHdrsRow_<?php echo $cntr; ?>">                                    
                                            <td class="lovtd"><?php echo ($curIdx * $lmtSze) + ($cntr); ?></td>
                                            <?php if ($canEdtTrns === true) { ?>                                    
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Edit Transaction" 
                                                            onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/edit32.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Print Transaction" onclick="getSilentRptsRnSts(<?php echo $rptID; ?>, -1, '<?php echo $paramStr; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/pdf.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <td class="lovtd">
                                                <?php echo $row[2]; ?>
                                                <input type="hidden" id="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" name="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" value="<?php echo $row[0]; ?>" placeholder="Start Date">
                                            </td>
                                            <td class="lovtd"><?php echo $row[1]; ?></td>
                                            <td class="lovtd"><?php echo "[" . $row[3] . "] " . $row[4]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;"><?php echo $row[31]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;color:blue;"><?php
                                                echo number_format((float) $row[21], 2);
                                                ?></td>
                                            <td class="lovtd"><?php echo $row[10]; ?></td>
                                            <td class="lovtd"><?php echo $row[12]; ?></td>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Transaction Details" onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 30, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/kghostview.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <?php if ($canDelTrns === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Delete Transaction" onclick="delVmsTrnsHdr('allVmsTrnsHdrsRow_<?php echo $cntr; ?>')" style="padding:2px !important;">
                                                        <img src="cmn_images/no.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <?php if ($canVwRcHstry === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Record History" onclick="getRecHstry('<?php
                                                    echo urlencode(encrypt1(($row[0] . "|vms.vms_transactions_hdr|trans_hdr_id"), $smplTokenWord1));
                                                    ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/Information.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                        </tr>
                                        <?php
                                    }
                                    ?>
                                </tbody>
                            </table>
                        </div>                     
                    </div>
                </form>
                <?php
            } else if ($vwtyp == 7) {
                //Currency Purchase
                if ($srcMenu == "Banking") {
                    if ($subSrcMenu == "TO") {
                        $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1');\">
                                        <span style=\"text-decoration:none;\">Banking & Microfinance Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1&pg=3');\">
						<span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span><span style=\"text-decoration:none;\"> Core Banking Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1&q=SUBMENUS&pg=3&subPgNo=3.1');\">
                                                <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
						<span style=\"text-decoration:none;\">Teller Operations</span>
                                </li>";
                    } else {
                        $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1');\">
                                        <span style=\"text-decoration:none;\">Banking & Microfinance Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                    }
                } else {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                }
                echo $cntent . "<li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=0&srcMenu=$srcMenu');\">
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Vault Transactions</span>
				</li>
                                <li>
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Currency Purchase</span>
				</li>
                               </ul>
                              </div>";
                $trnsType = "Currency Purchase";
                $total = get_TrnsTtl($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn);
                if ($pageNo > ceil($total / $lmtSze)) {
                    $pageNo = 1;
                } else if ($pageNo < 1) {
                    $pageNo = ceil($total / $lmtSze);
                }

                $curIdx = $pageNo - 1;
                $result = get_Trns($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn, $curIdx, $lmtSze);
                $cntr = 0;
                ?> 
                <form id='allVmsTrnsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row " style="margin-bottom:0px;padding:0px 15px 0px 15px !important;">
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <input class="form-control" id="allVmsTrnsSrchFor" type = "text" placeholder="Search For" value="<?php
                                echo trim(str_replace("%", " ", $srchFor));
                                ?>" onkeyup="enterKeyFuncAllVmsTrns(event, '', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                <input id="allVmsTrnsPageNo" type = "hidden" value="<?php echo $pageNo; ?>">
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('clear', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </label>
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                    <span class="glyphicon glyphicon-search"></span>
                                </label> 
                            </div>
                        </div>
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <span class="input-group-addon">In</span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsSrchIn">
                                    <?php
                                    $valslctdArry = array("", "", "", "");
                                    $srchInsArrys = array("Transaction Number", "Description",
                                        "Transaction Type", "Transaction Status");

                                    for ($z = 0; $z < count($srchInsArrys); $z++) {
                                        if ($srchIn == $srchInsArrys[$z]) {
                                            $valslctdArry[$z] = "selected";
                                        }
                                        ?>
                                        <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                    <?php } ?>
                                </select>
                                <span class="input-group-addon" style="max-width: 1px !important;padding:0px !important;width:1px !important;border:none !important;"></span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsDsplySze" style="min-width:65px !important;">                            
                                    <?php
                                    $valslctdArry = array("", "", "", "", "", "",
                                        "", "");
                                    $dsplySzeArry = array(1, 5, 10, 15, 30, 50, 100,
                                        500, 1000);
                                    for ($y = 0; $y < count($dsplySzeArry); $y++) {
                                        if ($lmtSze == $dsplySzeArry[$y]) {
                                            $valslctdArry[$y] = "selected";
                                        } else {
                                            $valslctdArry[$y] = "";
                                        }
                                        ?>
                                        <option value="<?php echo $dsplySzeArry[$y]; ?>" <?php echo $valslctdArry[$y]; ?>><?php echo $dsplySzeArry[$y]; ?></option>                            
                                        <?php
                                    }
                                    ?>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4" style="padding:0px 1px 0px 1px !important;">
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text" id="allVmsTrnsStrtDate" name="allVmsTrnsStrtDate" value="<?php
                                    echo substr($qStrtDte, 0, 11);
                                    ?>" placeholder="Start Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text"  id="allVmsTrnsEndDate" name="allVmsTrnsEndDate" value="<?php
                                    echo substr($qEndDte, 0, 11);
                                    ?>" placeholder="End Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>                            
                        </div>
                        <div class="col-lg-2" style="padding:0px 1px 0px 1px !important;">
                            <nav aria-label="Page navigation">
                                <ul class="pagination" style="margin: 0px !important;">
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('previous', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('next', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <div class="row " style="margin-bottom:2px;padding:2px 15px 2px 15px !important">   
                        <div class="col-md-12" style="padding:2px 1px 2px 1px !important;border-top:1px solid #ddd;border-bottom:1px solid #ddd;">
                            <div class="col-md-6" style="padding:0px 1px 0px 1px !important;">
                                <button type="button" class="btn btn-default btn-sm" onclick="getOneVmsTrnsForm(-1, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');">
                                    <img src="cmn_images/add1-64.png" style="left: 0.5%; padding-right: 5px; height:20px; width:auto; position: relative; vertical-align: middle;">
                                    New Currency Purchase
                                </button>
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <?php
                                        $nonAprvdChekd = "";
                                        if ($qUnathrzdOnly == "true") {
                                            $nonAprvdChekd = "checked=\"true\"";
                                        }
                                        $notValidChekd = "";
                                        if ($qInvalidOnly == "true") {
                                            $notValidChekd = "checked=\"true\"";
                                        }
                                        ?>
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwUnaprvd" name="allVmsTrnsShwUnaprvd" <?php echo $nonAprvdChekd; ?>>
                                        Unauthorized Trns.
                                    </label>
                                </div>                            
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwInvld" name="allVmsTrnsShwInvld"  <?php echo $notValidChekd; ?>>
                                        Only Invalid Trns.
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">&nbsp;</div>
                        </div>
                    </div>
                </form>
                <form id='allVmsTrnsHdrsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row"> 
                        <div  class="col-md-12">
                            <table class="table table-striped table-bordered table-responsive" id="allVmsTrnsHdrsTable" cellspacing="0" width="100%" style="width:100%;">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <?php if ($canEdtTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <th>...</th>		
                                        <th>Reference No.</th>
                                        <th>Trns. Date</th>
                                        <th>Remark/Narration</th>
                                        <th style="text-align:right;">CUR.</th>
                                        <th style="text-align:right;min-width: 100px;width: 100px;">Transaction Amount</th>
                                        <th>Authorization Status</th>
                                        <th>Validity Status</th>
                                        <th>...</th>
                                        <?php if ($canDelTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <?php if ($canVwRcHstry === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                    </tr>
                                </thead>
                                <tbody>
                                    <?php
                                    $reportTitle = $trnsType;
                                    $reportName = "VMS Transaction Voucher";
                                    if ($trnsType == $trnsTypes[4] || $trnsType == $trnsTypes[5] || $trnsType == $trnsTypes[6]) {
                                        $reportName = "VMS DEP/WITHDRAW Voucher";
                                    }
                                    $rptID = getRptID($reportName);
                                    $prmID1 = getParamIDUseSQLRep("{:trns_id}", $rptID);
                                    $prmID2 = getParamIDUseSQLRep("{:documentTitle}", $rptID);
                                    while ($row = loc_db_fetch_array($result)) {
                                        $trnsID = $row[0];
                                        $paramRepsNVals = $prmID1 . "~" . $trnsID . "|" . $prmID2 . "~" . $reportTitle . "|-130~" . $reportTitle . "|-190~PDF";
                                        $paramStr = urlencode($paramRepsNVals);
                                        $cntr += 1;
                                        ?>
                                        <tr id="allVmsTrnsHdrsRow_<?php echo $cntr; ?>">                                    
                                            <td class="lovtd"><?php echo ($curIdx * $lmtSze) + ($cntr); ?></td>
                                            <?php if ($canEdtTrns === true) { ?>                                    
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Edit Transaction" 
                                                            onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/edit32.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Print Transaction" onclick="getSilentRptsRnSts(<?php echo $rptID; ?>, -1, '<?php echo $paramStr; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/pdf.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <td class="lovtd">
                                                <?php echo $row[2]; ?>
                                                <input type="hidden" id="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" name="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" value="<?php echo $row[0]; ?>" placeholder="Start Date">
                                            </td>
                                            <td class="lovtd"><?php echo $row[1]; ?></td>
                                            <td class="lovtd"><?php echo "[" . $row[3] . "] " . $row[4]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;"><?php echo $row[31]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;color:blue;"><?php
                                                echo number_format((float) $row[21], 2);
                                                ?></td>
                                            <td class="lovtd"><?php echo $row[10]; ?></td>
                                            <td class="lovtd"><?php echo $row[12]; ?></td>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Transaction Details" onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 30, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/kghostview.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <?php if ($canDelTrns === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Delete Transaction" onclick="delVmsTrnsHdr('allVmsTrnsHdrsRow_<?php echo $cntr; ?>')" style="padding:2px !important;">
                                                        <img src="cmn_images/no.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <?php if ($canVwRcHstry === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Record History" onclick="getRecHstry('<?php
                                                    echo urlencode(encrypt1(($row[0] . "|vms.vms_transactions_hdr|trans_hdr_id"), $smplTokenWord1));
                                                    ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/Information.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                        </tr>
                                        <?php
                                    }
                                    ?>
                                </tbody>
                            </table>
                        </div>                     
                    </div>
                </form>
                <?php
            } else if ($vwtyp == 8) {
                //Miscellaneous Adjustments
                if ($srcMenu == "Banking") {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1');\">
                                        <span style=\"text-decoration:none;\">Banking & Microfinance Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                } else {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                }
                echo $cntent . "<li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=0&srcMenu=$srcMenu');\">
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Vault Transactions</span>
				</li>
                                <li>
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Miscellaneous Adjustments</span>
				</li>
                               </ul>
                              </div>";
                $trnsType = "Miscellaneous Adjustments";
                $total = get_TrnsTtl($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn);
                if ($pageNo > ceil($total / $lmtSze)) {
                    $pageNo = 1;
                } else if ($pageNo < 1) {
                    $pageNo = ceil($total / $lmtSze);
                }

                $curIdx = $pageNo - 1;
                $result = get_Trns($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn, $curIdx, $lmtSze);
                $cntr = 0;
                ?> 
                <form id='allVmsTrnsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row " style="margin-bottom:0px;padding:0px 15px 0px 15px !important;">
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <input class="form-control" id="allVmsTrnsSrchFor" type = "text" placeholder="Search For" value="<?php
                                echo trim(str_replace("%", " ", $srchFor));
                                ?>" onkeyup="enterKeyFuncAllVmsTrns(event, '', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                <input id="allVmsTrnsPageNo" type = "hidden" value="<?php echo $pageNo; ?>">
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('clear', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </label>
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                    <span class="glyphicon glyphicon-search"></span>
                                </label> 
                            </div>
                        </div>
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <span class="input-group-addon">In</span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsSrchIn">
                                    <?php
                                    $valslctdArry = array("", "", "", "");
                                    $srchInsArrys = array("Transaction Number", "Description",
                                        "Transaction Type", "Transaction Status");

                                    for ($z = 0; $z < count($srchInsArrys); $z++) {
                                        if ($srchIn == $srchInsArrys[$z]) {
                                            $valslctdArry[$z] = "selected";
                                        }
                                        ?>
                                        <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                    <?php } ?>
                                </select>
                                <span class="input-group-addon" style="max-width: 1px !important;padding:0px !important;width:1px !important;border:none !important;"></span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsDsplySze" style="min-width:65px !important;">                            
                                    <?php
                                    $valslctdArry = array("", "", "", "", "", "",
                                        "", "");
                                    $dsplySzeArry = array(1, 5, 10, 15, 30, 50, 100,
                                        500, 1000);
                                    for ($y = 0; $y < count($dsplySzeArry); $y++) {
                                        if ($lmtSze == $dsplySzeArry[$y]) {
                                            $valslctdArry[$y] = "selected";
                                        } else {
                                            $valslctdArry[$y] = "";
                                        }
                                        ?>
                                        <option value="<?php echo $dsplySzeArry[$y]; ?>" <?php echo $valslctdArry[$y]; ?>><?php echo $dsplySzeArry[$y]; ?></option>                            
                                        <?php
                                    }
                                    ?>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4" style="padding:0px 1px 0px 1px !important;">
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text" id="allVmsTrnsStrtDate" name="allVmsTrnsStrtDate" value="<?php
                                    echo substr($qStrtDte, 0, 11);
                                    ?>" placeholder="Start Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text"  id="allVmsTrnsEndDate" name="allVmsTrnsEndDate" value="<?php
                                    echo substr($qEndDte, 0, 11);
                                    ?>" placeholder="End Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>                            
                        </div>
                        <div class="col-lg-2" style="padding:0px 1px 0px 1px !important;">
                            <nav aria-label="Page navigation">
                                <ul class="pagination" style="margin: 0px !important;">
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('previous', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('next', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <div class="row " style="margin-bottom:2px;padding:2px 15px 2px 15px !important">   
                        <div class="col-md-12" style="padding:2px 1px 2px 1px !important;border-top:1px solid #ddd;border-bottom:1px solid #ddd;">
                            <div class="col-md-6" style="padding:0px 1px 0px 1px !important;">
                                <button type="button" class="btn btn-default btn-sm" onclick="getOneVmsTrnsForm(-1, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');">
                                    <img src="cmn_images/add1-64.png" style="left: 0.5%; padding-right: 5px; height:20px; width:auto; position: relative; vertical-align: middle;">
                                    New Miscellaneous Adjustment
                                </button>
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <?php
                                        $nonAprvdChekd = "";
                                        if ($qUnathrzdOnly == "true") {
                                            $nonAprvdChekd = "checked=\"true\"";
                                        }
                                        $notValidChekd = "";
                                        if ($qInvalidOnly == "true") {
                                            $notValidChekd = "checked=\"true\"";
                                        }
                                        ?>
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwUnaprvd" name="allVmsTrnsShwUnaprvd" <?php echo $nonAprvdChekd; ?>>
                                        Unauthorized Trns.
                                    </label>
                                </div>                            
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwInvld" name="allVmsTrnsShwInvld"  <?php echo $notValidChekd; ?>>
                                        Only Invalid Trns.
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">&nbsp;</div>
                        </div>
                    </div>
                </form>
                <form id='allVmsTrnsHdrsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row"> 
                        <div  class="col-md-12">
                            <table class="table table-striped table-bordered table-responsive" id="allVmsTrnsHdrsTable" cellspacing="0" width="100%" style="width:100%;">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <?php if ($canEdtTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <th>...</th>		
                                        <th>Reference No.</th>
                                        <th>Trns. Date</th>
                                        <th>Remark/Narration</th>
                                        <th style="text-align:right;">CUR.</th>
                                        <th style="text-align:right;min-width: 100px;width: 100px;">Transaction Amount</th>
                                        <th>Authorization Status</th>
                                        <th>Validity Status</th>
                                        <th>...</th>
                                        <?php if ($canDelTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <?php if ($canVwRcHstry === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                    </tr>
                                </thead>
                                <tbody>
                                    <?php
                                    $reportTitle = $trnsType;
                                    $reportName = "VMS Transaction Voucher";
                                    if ($trnsType == $trnsTypes[4] || $trnsType == $trnsTypes[5] || $trnsType == $trnsTypes[6]) {
                                        $reportName = "VMS DEP/WITHDRAW Voucher";
                                    }
                                    $rptID = getRptID($reportName);
                                    $prmID1 = getParamIDUseSQLRep("{:trns_id}", $rptID);
                                    $prmID2 = getParamIDUseSQLRep("{:documentTitle}", $rptID);
                                    while ($row = loc_db_fetch_array($result)) {
                                        $trnsID = $row[0];
                                        $paramRepsNVals = $prmID1 . "~" . $trnsID . "|" . $prmID2 . "~" . $reportTitle . "|-130~" . $reportTitle . "|-190~PDF";
                                        $paramStr = urlencode($paramRepsNVals);
                                        $cntr += 1;
                                        ?>
                                        <tr id="allVmsTrnsHdrsRow_<?php echo $cntr; ?>">                                    
                                            <td class="lovtd"><?php echo ($curIdx * $lmtSze) + ($cntr); ?></td>
                                            <?php if ($canEdtTrns === true) { ?>                                    
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Edit Transaction" 
                                                            onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/edit32.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Print Transaction" onclick="getSilentRptsRnSts(<?php echo $rptID; ?>, -1, '<?php echo $paramStr; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/pdf.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <td class="lovtd">
                                                <?php echo $row[2]; ?>
                                                <input type="hidden" id="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" name="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" value="<?php echo $row[0]; ?>" placeholder="Start Date">
                                            </td>
                                            <td class="lovtd"><?php echo $row[1]; ?></td>
                                            <td class="lovtd"><?php echo "[" . $row[3] . "] " . $row[4]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;"><?php echo $row[31]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;color:blue;"><?php
                                                echo number_format((float) $row[21], 2);
                                                ?>
                                            </td>
                                            <td class="lovtd"><?php echo $row[10]; ?></td>
                                            <td class="lovtd"><?php echo $row[12]; ?></td>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Transaction Details" onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 30, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/kghostview.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <?php if ($canDelTrns === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Delete Transaction" onclick="delVmsTrnsHdr('allVmsTrnsHdrsRow_<?php echo $cntr; ?>')" style="padding:2px !important;">
                                                        <img src="cmn_images/no.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <?php if ($canVwRcHstry === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Record History" onclick="getRecHstry('<?php
                                                    echo urlencode(encrypt1(($row[0] . "|vms.vms_transactions_hdr|trans_hdr_id"), $smplTokenWord1));
                                                    ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/Information.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                        </tr>
                                        <?php
                                    }
                                    ?>
                                </tbody>
                            </table>
                        </div>                     
                    </div>
                </form>
                <?php
            } else if ($vwtyp == 9) {
                //Search All Transactions
                if ($srcMenu == "Banking") {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1');\">
                                        <span style=\"text-decoration:none;\">Banking & Microfinance Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                } else {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                }
                echo $cntent . "<li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=0&srcMenu=$srcMenu');\">
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Vault Transactions</span>
				</li>
                                <li>
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Search All Transactions</span>
				</li>
                               </ul>
                              </div>";
                $trnsType = "";
                $total = get_TrnsTtl($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn);
                if ($pageNo > ceil($total / $lmtSze)) {
                    $pageNo = 1;
                } else if ($pageNo < 1) {
                    $pageNo = ceil($total / $lmtSze);
                }

                $curIdx = $pageNo - 1;
                $result = get_Trns($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn, $curIdx, $lmtSze);
                $cntr = 0;
                ?> 
                <form id='allVmsTrnsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row " style="margin-bottom:0px;padding:0px 15px 0px 15px !important;">
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <input class="form-control" id="allVmsTrnsSrchFor" type = "text" placeholder="Search For" value="<?php
                                echo trim(str_replace("%", " ", $srchFor));
                                ?>" onkeyup="enterKeyFuncAllVmsTrns(event, '', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                <input id="allVmsTrnsPageNo" type = "hidden" value="<?php echo $pageNo; ?>">
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('clear', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </label>
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                    <span class="glyphicon glyphicon-search"></span>
                                </label> 
                            </div>
                        </div>
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <span class="input-group-addon">In</span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsSrchIn">
                                    <?php
                                    $valslctdArry = array("", "", "", "");
                                    $srchInsArrys = array("Transaction Number", "Description",
                                        "Transaction Type", "Transaction Status");

                                    for ($z = 0; $z < count($srchInsArrys); $z++) {
                                        if ($srchIn == $srchInsArrys[$z]) {
                                            $valslctdArry[$z] = "selected";
                                        }
                                        ?>
                                        <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                    <?php } ?>
                                </select>
                                <span class="input-group-addon" style="max-width: 1px !important;padding:0px !important;width:1px !important;border:none !important;"></span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsDsplySze" style="min-width:65px !important;">                            
                                    <?php
                                    $valslctdArry = array("", "", "", "", "", "",
                                        "", "");
                                    $dsplySzeArry = array(1, 5, 10, 15, 30, 50, 100,
                                        500, 1000);
                                    for ($y = 0; $y < count($dsplySzeArry); $y++) {
                                        if ($lmtSze == $dsplySzeArry[$y]) {
                                            $valslctdArry[$y] = "selected";
                                        } else {
                                            $valslctdArry[$y] = "";
                                        }
                                        ?>
                                        <option value="<?php echo $dsplySzeArry[$y]; ?>" <?php echo $valslctdArry[$y]; ?>><?php echo $dsplySzeArry[$y]; ?></option>                            
                                        <?php
                                    }
                                    ?>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4" style="padding:0px 1px 0px 1px !important;">
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text" id="allVmsTrnsStrtDate" name="allVmsTrnsStrtDate" value="<?php
                                    echo substr($qStrtDte, 0, 11);
                                    ?>" placeholder="Start Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text"  id="allVmsTrnsEndDate" name="allVmsTrnsEndDate" value="<?php
                                    echo substr($qEndDte, 0, 11);
                                    ?>" placeholder="End Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>                            
                        </div>
                        <div class="col-lg-2" style="padding:0px 1px 0px 1px !important;">
                            <nav aria-label="Page navigation">
                                <ul class="pagination" style="margin: 0px !important;">
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('previous', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('next', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <div class="row " style="margin-bottom:2px;padding:2px 15px 2px 15px !important">   
                        <div class="col-md-12" style="padding:2px 1px 2px 1px !important;border-top:1px solid #ddd;border-bottom:1px solid #ddd;">
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <?php
                                        $nonAprvdChekd = "";
                                        if ($qUnathrzdOnly == "true") {
                                            $nonAprvdChekd = "checked=\"true\"";
                                        }
                                        $notValidChekd = "";
                                        if ($qInvalidOnly == "true") {
                                            $notValidChekd = "checked=\"true\"";
                                        }
                                        ?>
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" id="allVmsTrnsShwUnaprvd" name="allVmsTrnsShwUnaprvd" <?php echo $nonAprvdChekd; ?>>
                                        Unauthorized Trns.
                                    </label>
                                </div>                            
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" id="allVmsTrnsShwInvld" name="allVmsTrnsShwInvld"  <?php echo $notValidChekd; ?>>
                                        Only Invalid Trns.
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6" style="padding:0px 1px 0px 1px !important;">
                                &nbsp;
                            </div>                            
                            <div class="col-md-2">&nbsp;</div>
                        </div>
                    </div>
                </form>
                <form id='allVmsTrnsHdrsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row"> 
                        <div  class="col-md-12">
                            <table class="table table-striped table-bordered table-responsive" id="allVmsTrnsHdrsTable" cellspacing="0" width="100%" style="width:100%;">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <?php if ($canEdtTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <th>...</th>		
                                        <th>Reference No.</th>
                                        <th>Trns. Date</th>
                                        <th>Remark/Narration</th>
                                        <th style="text-align:right;">CUR.</th>
                                        <th style="text-align:right;min-width: 100px;width: 100px;">Transaction Amount</th>
                                        <th>Authorization Status</th>
                                        <th>Validity Status</th>
                                        <th>...</th>
                                        <?php if ($canDelTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <?php if ($canVwRcHstry === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                    </tr>
                                </thead>
                                <tbody>
                                    <?php
                                    while ($row = loc_db_fetch_array($result)) {
                                        $trnsType1 = $row[3];
                                        $reportTitle = $trnsType1;
                                        $reportName = "VMS Transaction Voucher";
                                        if ($trnsType1 == $trnsTypes[4] || $trnsType1 == $trnsTypes[5] || $trnsType1 == $trnsTypes[6]) {
                                            $reportName = "VMS DEP/WITHDRAW Voucher";
                                        }
                                        $rptID = getRptID($reportName);
                                        $prmID1 = getParamIDUseSQLRep("{:trns_id}", $rptID);
                                        $prmID2 = getParamIDUseSQLRep("{:documentTitle}", $rptID);
                                        $trnsID = $row[0];
                                        $paramRepsNVals = $prmID1 . "~" . $trnsID . "|" . $prmID2 . "~" . $reportTitle . "|-130~" . $reportTitle . "|-190~PDF";
                                        $paramStr = urlencode($paramRepsNVals);
                                        $cntr += 1;
                                        ?>
                                        <tr id="allVmsTrnsHdrsRow_<?php echo $cntr; ?>">                                    
                                            <td class="lovtd"><?php echo ($curIdx * $lmtSze) + ($cntr); ?></td>
                                            <?php if ($canEdtTrns === true) { ?>                                    
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Edit Transaction" 
                                                            onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, 'allVmsTrnsHdrsRow_<?php echo $cntr; ?>', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/edit32.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Print Transaction" onclick="getSilentRptsRnSts(<?php echo $rptID; ?>, -1, '<?php echo $paramStr; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/pdf.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <td class="lovtd">
                                                <?php echo $row[2]; ?>
                                                <input type="hidden" id="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" name="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" value="<?php echo $row[0]; ?>">
                                                <input type="hidden" id="allVmsTrnsHdrsRow<?php echo $cntr; ?>_TrnsType" name="allVmsTrnsHdrsRow<?php echo $cntr; ?>_TrnsType" value="<?php echo $row[3]; ?>">
                                            </td>
                                            <td class="lovtd"><?php echo $row[1]; ?></td>
                                            <td class="lovtd"><?php echo "[" . $row[3] . "] " . $row[4]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;"><?php echo $row[31]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;color:blue;"><?php
                                                echo number_format((float) $row[21], 2);
                                                ?></td>
                                            <td class="lovtd"><?php echo $row[10]; ?></td>
                                            <td class="lovtd"><?php echo $row[12]; ?></td>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Transaction Details" onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $row[3]; ?>', 30, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/kghostview.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <?php if ($canDelTrns === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Delete Transaction" onclick="delVmsTrnsHdr('allVmsTrnsHdrsRow_<?php echo $cntr; ?>')" style="padding:2px !important;">
                                                        <img src="cmn_images/no.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <?php if ($canVwRcHstry === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Record History" onclick="getRecHstry('<?php
                                                    echo urlencode(encrypt1(($row[0] . "|vms.vms_transactions_hdr|trans_hdr_id"), $smplTokenWord1));
                                                    ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/Information.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                        </tr>
                                        <?php
                                    }
                                    ?>
                                </tbody>
                            </table>
                        </div>                     
                    </div>
                </form>
                <?php
            } else if ($vwtyp == 10) {
                //Vault/GL Account Transfers   
                if ($srcMenu == "Banking") {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1');\">
                                        <span style=\"text-decoration:none;\">Banking & Microfinance Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                } else {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                }
                echo $cntent . "<li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=0&srcMenu=$srcMenu');\">
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Vault Transactions</span>
				</li>
                                <li>
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Vault/GL Account Transfers</span>
				</li>
                               </ul>
                              </div>";
                $trnsType = "Vault/GL Account Transfers";
                $total = get_TrnsTtl($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn);
                if ($pageNo > ceil($total / $lmtSze)) {
                    $pageNo = 1;
                } else if ($pageNo < 1) {
                    $pageNo = ceil($total / $lmtSze);
                }

                $curIdx = $pageNo - 1;
                $result = get_Trns($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn, $curIdx, $lmtSze);
                $cntr = 0;
                ?> 
                <form id='allVmsTrnsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row " style="margin-bottom:0px;padding:0px 15px 0px 15px !important;">
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <input class="form-control" id="allVmsTrnsSrchFor" type = "text" placeholder="Search For" value="<?php
                                echo trim(str_replace("%", " ", $srchFor));
                                ?>" onkeyup="enterKeyFuncAllVmsTrns(event, '', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                <input id="allVmsTrnsPageNo" type = "hidden" value="<?php echo $pageNo; ?>">
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('clear', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </label>
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                    <span class="glyphicon glyphicon-search"></span>
                                </label> 
                            </div>
                        </div>
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <span class="input-group-addon">In</span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsSrchIn">
                                    <?php
                                    $valslctdArry = array("", "", "", "");
                                    $srchInsArrys = array("Transaction Number", "Description", "Transaction Type", "Transaction Status");

                                    for ($z = 0; $z < count($srchInsArrys); $z++) {
                                        if ($srchIn == $srchInsArrys[$z]) {
                                            $valslctdArry[$z] = "selected";
                                        }
                                        ?>
                                        <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                    <?php } ?>
                                </select>
                                <span class="input-group-addon" style="max-width: 1px !important;padding:0px !important;width:1px !important;border:none !important;"></span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsDsplySze" style="min-width:65px !important;">                            
                                    <?php
                                    $valslctdArry = array("", "", "", "", "", "", "", "");
                                    $dsplySzeArry = array(1, 5, 10, 15, 30, 50, 100, 500, 1000);
                                    for ($y = 0; $y < count($dsplySzeArry); $y++) {
                                        if ($lmtSze == $dsplySzeArry[$y]) {
                                            $valslctdArry[$y] = "selected";
                                        } else {
                                            $valslctdArry[$y] = "";
                                        }
                                        ?>
                                        <option value="<?php echo $dsplySzeArry[$y]; ?>" <?php echo $valslctdArry[$y]; ?>><?php echo $dsplySzeArry[$y]; ?></option>                            
                                        <?php
                                    }
                                    ?>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4" style="padding:0px 1px 0px 1px !important;">
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text" id="allVmsTrnsStrtDate" name="allVmsTrnsStrtDate" value="<?php
                                    echo substr($qStrtDte, 0, 11);
                                    ?>" placeholder="Start Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div>
                            </div>
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text"  id="allVmsTrnsEndDate" name="allVmsTrnsEndDate" value="<?php
                                    echo substr($qEndDte, 0, 11);
                                    ?>" placeholder="End Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div>
                            </div>                            
                        </div>
                        <div class="col-lg-2" style="padding:0px 1px 0px 1px !important;">
                            <nav aria-label="Page navigation">
                                <ul class="pagination" style="margin: 0px !important;">
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('previous', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('next', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <div class="row " style="margin-bottom:2px;padding:2px 15px 2px 15px !important">   
                        <div class="col-md-12" style="padding:2px 1px 2px 1px !important;border-top:1px solid #ddd;border-bottom:1px solid #ddd;">
                            <div class="col-md-6" style="padding:0px 1px 0px 1px !important;">
                                <button type="button" class="btn btn-default btn-sm" onclick="getOneVmsTrnsForm(-1, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');">
                                    <img src="cmn_images/add1-64.png" style="left: 0.5%; padding-right: 5px; height:20px; width:auto; position: relative; vertical-align: middle;">
                                    New Vault/GL Account Transfer
                                </button>
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <?php
                                        $nonAprvdChekd = "";
                                        if ($qUnathrzdOnly == "true") {
                                            $nonAprvdChekd = "checked=\"true\"";
                                        }
                                        $notValidChekd = "";
                                        if ($qInvalidOnly == "true") {
                                            $notValidChekd = "checked=\"true\"";
                                        }
                                        ?>
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwUnaprvd" name="allVmsTrnsShwUnaprvd" <?php echo $nonAprvdChekd; ?>>
                                        Unauthorized Trns.
                                    </label>
                                </div>                            
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwInvld" name="allVmsTrnsShwInvld"  <?php echo $notValidChekd; ?>>
                                        Only Invalid Trns.
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">&nbsp;</div>
                        </div>
                    </div>
                </form>
                <form id='allVmsTrnsHdrsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row"> 
                        <div  class="col-md-12">
                            <table class="table table-striped table-bordered table-responsive" id="allVmsTrnsHdrsTable" cellspacing="0" width="100%" style="width:100%;">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <?php if ($canEdtTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <th>...</th>		
                                        <th>Reference No.</th>
                                        <th>Trns. Date</th>
                                        <th>Remark/Narration</th>
                                        <th style="text-align:right;">CUR.</th>
                                        <th style="text-align:right;min-width: 100px;width: 100px;">Transaction Amount</th>
                                        <th>Authorization Status</th>
                                        <th>Validity Status</th>
                                        <th>...</th>
                                        <?php if ($canDelTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <?php if ($canVwRcHstry === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                    </tr>
                                </thead>
                                <tbody>
                                    <?php
                                    $reportTitle = $trnsType;
                                    $reportName = "VMS Transaction Voucher";
                                    if ($trnsType == $trnsTypes[4] || $trnsType == $trnsTypes[5] || $trnsType == $trnsTypes[6]) {
                                        $reportName = "VMS DEP/WITHDRAW Voucher";
                                    }
                                    $rptID = getRptID($reportName);
                                    $prmID1 = getParamIDUseSQLRep("{:trns_id}", $rptID);
                                    $prmID2 = getParamIDUseSQLRep("{:documentTitle}", $rptID);
                                    while ($row = loc_db_fetch_array($result)) {
                                        $trnsID = $row[0];
                                        $paramRepsNVals = $prmID1 . "~" . $trnsID . "|" . $prmID2 . "~" . $reportTitle . "|-130~" . $reportTitle . "|-190~PDF";
                                        $paramStr = urlencode($paramRepsNVals);
                                        $cntr += 1;
                                        ?>
                                        <tr id="allVmsTrnsHdrsRow_<?php echo $cntr; ?>">                                    
                                            <td class="lovtd"><?php echo ($curIdx * $lmtSze) + ($cntr); ?></td>
                                            <?php if ($canEdtTrns === true) { ?>                                    
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Edit Transaction" 
                                                            onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/edit32.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Print Transaction" onclick="getSilentRptsRnSts(<?php echo $rptID; ?>, -1, '<?php echo $paramStr; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/pdf.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <td class="lovtd">
                                                <?php echo $row[2]; ?>
                                                <input type="hidden" id="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" name="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" value="<?php echo $row[0]; ?>" placeholder="Start Date">
                                            </td>
                                            <td class="lovtd"><?php echo $row[1]; ?></td>
                                            <td class="lovtd"><?php echo "[" . $row[3] . "] " . $row[4]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;"><?php echo $row[31]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;color:blue;"><?php
                                                echo number_format((float) $row[21], 2);
                                                ?></td>
                                            <td class="lovtd"><?php echo $row[10]; ?></td>
                                            <td class="lovtd"><?php echo $row[12]; ?></td>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Transaction Details" onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 30, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/kghostview.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <?php if ($canDelTrns === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Delete Transaction" onclick="delVmsTrnsHdr('allVmsTrnsHdrsRow_<?php echo $cntr; ?>')" style="padding:2px !important;">
                                                        <img src="cmn_images/no.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <?php if ($canVwRcHstry === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Record History" onclick="getRecHstry('<?php
                                                    echo urlencode(encrypt1(($row[0] . "|vms.vms_transactions_hdr|trans_hdr_id"), $smplTokenWord1));
                                                    ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/Information.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                        </tr>
                                        <?php
                                    }
                                    ?>
                                </tbody>
                            </table>
                        </div>                     
                    </div>
                </form>
                <?php
            } else if ($vwtyp == 11) {
                //GL/Vault Account Transfers   
                if ($srcMenu == "Banking") {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1');\">
                                        <span style=\"text-decoration:none;\">Banking & Microfinance Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                } else {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                }
                echo $cntent . "<li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=0&srcMenu=$srcMenu');\">
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Vault Transactions</span>
				</li>
                                <li>
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">GL/Vault Account Transfers</span>
				</li>
                               </ul>
                              </div>";
                $trnsType = "GL/Vault Account Transfers";
                $total = get_TrnsTtl($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn);
                if ($pageNo > ceil($total / $lmtSze)) {
                    $pageNo = 1;
                } else if ($pageNo < 1) {
                    $pageNo = ceil($total / $lmtSze);
                }

                $curIdx = $pageNo - 1;
                $result = get_Trns($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn, $curIdx, $lmtSze);
                $cntr = 0;
                ?> 
                <form id='allVmsTrnsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row " style="margin-bottom:0px;padding:0px 15px 0px 15px !important;">
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <input class="form-control" id="allVmsTrnsSrchFor" type = "text" placeholder="Search For" value="<?php
                                echo trim(str_replace("%", " ", $srchFor));
                                ?>" onkeyup="enterKeyFuncAllVmsTrns(event, '', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                <input id="allVmsTrnsPageNo" type = "hidden" value="<?php echo $pageNo; ?>">
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('clear', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </label>
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                    <span class="glyphicon glyphicon-search"></span>
                                </label> 
                            </div>
                        </div>
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <span class="input-group-addon">In</span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsSrchIn">
                                    <?php
                                    $valslctdArry = array("", "", "", "");
                                    $srchInsArrys = array("Transaction Number", "Description", "Transaction Type", "Transaction Status");

                                    for ($z = 0; $z < count($srchInsArrys); $z++) {
                                        if ($srchIn == $srchInsArrys[$z]) {
                                            $valslctdArry[$z] = "selected";
                                        }
                                        ?>
                                        <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                    <?php } ?>
                                </select>
                                <span class="input-group-addon" style="max-width: 1px !important;padding:0px !important;width:1px !important;border:none !important;"></span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsDsplySze" style="min-width:65px !important;">                            
                                    <?php
                                    $valslctdArry = array("", "", "", "", "", "", "", "");
                                    $dsplySzeArry = array(1, 5, 10, 15, 30, 50, 100, 500, 1000);
                                    for ($y = 0; $y < count($dsplySzeArry); $y++) {
                                        if ($lmtSze == $dsplySzeArry[$y]) {
                                            $valslctdArry[$y] = "selected";
                                        } else {
                                            $valslctdArry[$y] = "";
                                        }
                                        ?>
                                        <option value="<?php echo $dsplySzeArry[$y]; ?>" <?php echo $valslctdArry[$y]; ?>><?php echo $dsplySzeArry[$y]; ?></option>                            
                                        <?php
                                    }
                                    ?>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4" style="padding:0px 1px 0px 1px !important;">
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text" id="allVmsTrnsStrtDate" name="allVmsTrnsStrtDate" value="<?php
                                    echo substr($qStrtDte, 0, 11);
                                    ?>" placeholder="Start Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div>
                            </div>
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text"  id="allVmsTrnsEndDate" name="allVmsTrnsEndDate" value="<?php
                                    echo substr($qEndDte, 0, 11);
                                    ?>" placeholder="End Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div>
                            </div>                            
                        </div>
                        <div class="col-lg-2" style="padding:0px 1px 0px 1px !important;">
                            <nav aria-label="Page navigation">
                                <ul class="pagination" style="margin: 0px !important;">
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('previous', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('next', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <div class="row " style="margin-bottom:2px;padding:2px 15px 2px 15px !important">   
                        <div class="col-md-12" style="padding:2px 1px 2px 1px !important;border-top:1px solid #ddd;border-bottom:1px solid #ddd;">
                            <div class="col-md-6" style="padding:0px 1px 0px 1px !important;">
                                <button type="button" class="btn btn-default btn-sm" onclick="getOneVmsTrnsForm(-1, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');">
                                    <img src="cmn_images/add1-64.png" style="left: 0.5%; padding-right: 5px; height:20px; width:auto; position: relative; vertical-align: middle;">
                                    New GL/Vault Account Transfer
                                </button>
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <?php
                                        $nonAprvdChekd = "";
                                        if ($qUnathrzdOnly == "true") {
                                            $nonAprvdChekd = "checked=\"true\"";
                                        }
                                        $notValidChekd = "";
                                        if ($qInvalidOnly == "true") {
                                            $notValidChekd = "checked=\"true\"";
                                        }
                                        ?>
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwUnaprvd" name="allVmsTrnsShwUnaprvd" <?php echo $nonAprvdChekd; ?>>
                                        Unauthorized Trns.
                                    </label>
                                </div>                            
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwInvld" name="allVmsTrnsShwInvld"  <?php echo $notValidChekd; ?>>
                                        Only Invalid Trns.
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">&nbsp;</div>
                        </div>
                    </div>
                </form>
                <form id='allVmsTrnsHdrsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row"> 
                        <div  class="col-md-12">
                            <table class="table table-striped table-bordered table-responsive" id="allVmsTrnsHdrsTable" cellspacing="0" width="100%" style="width:100%;">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <?php if ($canEdtTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <th>...</th>		
                                        <th>Reference No.</th>
                                        <th>Trns. Date</th>
                                        <th>Remark/Narration</th>
                                        <th style="text-align:right;">CUR.</th>
                                        <th style="text-align:right;min-width: 100px;width: 100px;">Transaction Amount</th>
                                        <th>Authorization Status</th>
                                        <th>Validity Status</th>
                                        <th>...</th>
                                        <?php if ($canDelTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <?php if ($canVwRcHstry === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                    </tr>
                                </thead>
                                <tbody>
                                    <?php
                                    $reportTitle = $trnsType;
                                    $reportName = "VMS Transaction Voucher";
                                    if ($trnsType == $trnsTypes[4] || $trnsType == $trnsTypes[5] || $trnsType == $trnsTypes[6]) {
                                        $reportName = "VMS DEP/WITHDRAW Voucher";
                                    }
                                    $rptID = getRptID($reportName);
                                    $prmID1 = getParamIDUseSQLRep("{:trns_id}", $rptID);
                                    $prmID2 = getParamIDUseSQLRep("{:documentTitle}", $rptID);
                                    while ($row = loc_db_fetch_array($result)) {
                                        $trnsID = $row[0];
                                        $paramRepsNVals = $prmID1 . "~" . $trnsID . "|" . $prmID2 . "~" . $reportTitle . "|-130~" . $reportTitle . "|-190~PDF";
                                        $paramStr = urlencode($paramRepsNVals);
                                        $cntr += 1;
                                        ?>
                                        <tr id="allVmsTrnsHdrsRow_<?php echo $cntr; ?>">                                    
                                            <td class="lovtd"><?php echo ($curIdx * $lmtSze) + ($cntr); ?></td>
                                            <?php if ($canEdtTrns === true) { ?>                                    
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Edit Transaction" 
                                                            onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/edit32.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Print Transaction" onclick="getSilentRptsRnSts(<?php echo $rptID; ?>, -1, '<?php echo $paramStr; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/pdf.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <td class="lovtd">
                                                <?php echo $row[2]; ?>
                                                <input type="hidden" id="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" name="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" value="<?php echo $row[0]; ?>" placeholder="Start Date">
                                            </td>
                                            <td class="lovtd"><?php echo $row[1]; ?></td>
                                            <td class="lovtd"><?php echo "[" . $row[3] . "] " . $row[4]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;"><?php echo $row[31]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;color:blue;"><?php
                                                echo number_format((float) $row[21], 2);
                                                ?></td>
                                            <td class="lovtd"><?php echo $row[10]; ?></td>
                                            <td class="lovtd"><?php echo $row[12]; ?></td>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Transaction Details" onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 30, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/kghostview.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <?php if ($canDelTrns === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Delete Transaction" onclick="delVmsTrnsHdr('allVmsTrnsHdrsRow_<?php echo $cntr; ?>')" style="padding:2px !important;">
                                                        <img src="cmn_images/no.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <?php if ($canVwRcHstry === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Record History" onclick="getRecHstry('<?php
                                                    echo urlencode(encrypt1(($row[0] . "|vms.vms_transactions_hdr|trans_hdr_id"), $smplTokenWord1));
                                                    ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/Information.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                        </tr>
                                        <?php
                                    }
                                    ?>
                                </tbody>
                            </table>
                        </div>                     
                    </div>
                </form>
                <?php
            } else if ($vwtyp == 12) {
                //"Transits (Specie Movement)"               
                if ($srcMenu == "Banking") {
                    $cntent .= "<li onclick=\"openATab('#allmodules', 'grp=17&typ=1');\">
                                        <span style=\"text-decoration:none;\">Banking & Microfinance Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                } else {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                }
                echo $cntent . "<li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=0&srcMenu=$srcMenu');\">
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Vault Transactions</span>
				</li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=1&srcMenu=$srcMenu');\">
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Transfer Transactions</span>
				</li>
                                <li>
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Transits (Specie Movement)</span>
				</li>
                               </ul>
                              </div>";
                $trnsType = "Transits (Specie Movement)";
                $total = get_TrnsTtl($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn);
                if ($pageNo > ceil($total / $lmtSze)) {
                    $pageNo = 1;
                } else if ($pageNo < 1) {
                    $pageNo = ceil($total / $lmtSze);
                }

                $curIdx = $pageNo - 1;
                $result = get_Trns($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn, $curIdx, $lmtSze);
                $cntr = 0;
                ?> 
                <form id='allVmsTrnsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row " style="margin-bottom:0px;padding:0px 15px 0px 15px !important;">
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <input class="form-control" id="allVmsTrnsSrchFor" type = "text" placeholder="Search For" value="<?php
                                echo trim(str_replace("%", " ", $srchFor));
                                ?>" onkeyup="enterKeyFuncAllVmsTrns(event, '', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                <input id="allVmsTrnsPageNo" type = "hidden" value="<?php echo $pageNo; ?>">
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('clear', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </label>
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                    <span class="glyphicon glyphicon-search"></span>
                                </label> 
                            </div>
                        </div>
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <span class="input-group-addon">In</span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsSrchIn">
                                    <?php
                                    $valslctdArry = array("", "", "", "");
                                    $srchInsArrys = array("Transaction Number", "Description",
                                        "Transaction Type", "Transaction Status");

                                    for ($z = 0; $z < count($srchInsArrys); $z++) {
                                        if ($srchIn == $srchInsArrys[$z]) {
                                            $valslctdArry[$z] = "selected";
                                        }
                                        ?>
                                        <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                    <?php } ?>
                                </select>
                                <span class="input-group-addon" style="max-width: 1px !important;padding:0px !important;width:1px !important;border:none !important;"></span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsDsplySze" style="min-width:65px !important;">                            
                                    <?php
                                    $valslctdArry = array("", "", "", "", "", "",
                                        "", "");
                                    $dsplySzeArry = array(1, 5, 10, 15, 30, 50, 100,
                                        500, 1000);
                                    for ($y = 0; $y < count($dsplySzeArry); $y++) {
                                        if ($lmtSze == $dsplySzeArry[$y]) {
                                            $valslctdArry[$y] = "selected";
                                        } else {
                                            $valslctdArry[$y] = "";
                                        }
                                        ?>
                                        <option value="<?php echo $dsplySzeArry[$y]; ?>" <?php echo $valslctdArry[$y]; ?>><?php echo $dsplySzeArry[$y]; ?></option>                            
                                        <?php
                                    }
                                    ?>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4" style="padding:0px 1px 0px 1px !important;">
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text" id="allVmsTrnsStrtDate" name="allVmsTrnsStrtDate" value="<?php
                                    echo substr($qStrtDte, 0, 11);
                                    ?>" placeholder="Start Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text"  id="allVmsTrnsEndDate" name="allVmsTrnsEndDate" value="<?php
                                    echo substr($qEndDte, 0, 11);
                                    ?>" placeholder="End Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>                            
                        </div>
                        <div class="col-lg-2" style="padding:0px 1px 0px 1px !important;">
                            <nav aria-label="Page navigation">
                                <ul class="pagination" style="margin: 0px !important;">
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('previous', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('next', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <div class="row " style="margin-bottom:2px;padding:2px 15px 2px 15px !important">   
                        <div class="col-md-12" style="padding:2px 1px 2px 1px !important;border-top:1px solid #ddd;border-bottom:1px solid #ddd;">
                            <div class="col-md-6" style="padding:0px 1px 0px 1px !important;">
                                <button type="button" class="btn btn-default btn-sm" onclick="getOneVmsTrnsForm(-1, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');">
                                    <img src="cmn_images/add1-64.png" style="left: 0.5%; padding-right: 5px; height:20px; width:auto; position: relative; vertical-align: middle;">
                                    New Specie Movement
                                </button>
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <?php
                                        $nonAprvdChekd = "";
                                        if ($qUnathrzdOnly == "true") {
                                            $nonAprvdChekd = "checked=\"true\"";
                                        }
                                        $notValidChekd = "";
                                        if ($qInvalidOnly == "true") {
                                            $notValidChekd = "checked=\"true\"";
                                        }
                                        ?>
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" id="allVmsTrnsShwUnaprvd" name="allVmsTrnsShwUnaprvd" <?php echo $nonAprvdChekd; ?>>
                                        Unauthorized Trns.
                                    </label>
                                </div>                            
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" id="allVmsTrnsShwInvld" name="allVmsTrnsShwInvld"  <?php echo $notValidChekd; ?>>
                                        Only Invalid Trns.
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">&nbsp;</div>
                        </div>
                    </div>
                </form>
                <form id='allVmsTrnsHdrsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row"> 
                        <div  class="col-md-12">
                            <table class="table table-striped table-bordered table-responsive" id="allVmsTrnsHdrsTable" cellspacing="0" width="100%" style="width:100%;">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <?php if ($canEdtTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <th>...</th>		
                                        <th>Reference No.</th>
                                        <th>Trns. Date</th>
                                        <th>Remark/Narration</th>
                                        <th style="text-align:right;">CUR.</th>
                                        <th style="text-align:right;min-width: 100px;width: 100px;">Transaction Amount</th>
                                        <th>Authorization Status</th>
                                        <th>Validity Status</th>
                                        <th>...</th>
                                        <?php if ($canDelTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <?php if ($canVwRcHstry === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                    </tr>
                                </thead>
                                <tbody>
                                    <?php
                                    $reportTitle = $trnsType;
                                    $reportName = "VMS Transaction Voucher";
                                    if ($trnsType == $trnsTypes[4] || $trnsType == $trnsTypes[5] || $trnsType == $trnsTypes[6]) {
                                        $reportName = "VMS DEP/WITHDRAW Voucher";
                                    }
                                    $rptID = getRptID($reportName);
                                    $prmID1 = getParamIDUseSQLRep("{:trns_id}", $rptID);
                                    $prmID2 = getParamIDUseSQLRep("{:documentTitle}", $rptID);
                                    while ($row = loc_db_fetch_array($result)) {
                                        $trnsID = $row[0];
                                        $paramRepsNVals = $prmID1 . "~" . $trnsID . "|" . $prmID2 . "~" . $reportTitle . "|-130~" . $reportTitle . "|-190~PDF";
                                        $paramStr = urlencode($paramRepsNVals);
                                        $cntr += 1;
                                        ?>
                                        <tr id="allVmsTrnsHdrsRow_<?php echo $cntr; ?>">                                    
                                            <td class="lovtd"><?php echo ($curIdx * $lmtSze) + ($cntr); ?></td>
                                            <?php if ($canEdtTrns === true) { ?>                                    
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Edit Transaction" 
                                                            onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/edit32.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Print Transaction" onclick="getSilentRptsRnSts(<?php echo $rptID; ?>, -1, '<?php echo $paramStr; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/pdf.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <td class="lovtd">
                                                <?php echo $row[2]; ?>
                                                <input type="hidden" id="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" name="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" value="<?php echo $row[0]; ?>" placeholder="Start Date">
                                            </td>
                                            <td class="lovtd"><?php echo $row[1]; ?></td>
                                            <td class="lovtd"><?php echo "[" . $row[3] . "] " . $row[4]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;"><?php echo $row[31]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;color:blue;"><?php
                                                echo number_format((float) $row[21], 2);
                                                ?></td>
                                            <td class="lovtd"><?php echo $row[10]; ?></td>
                                            <td class="lovtd"><?php echo $row[12]; ?></td>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Transaction Details" onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 30, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/kghostview.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <?php if ($canDelTrns === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Delete Transaction" onclick="delVmsTrnsHdr('allVmsTrnsHdrsRow_<?php echo $cntr; ?>')" style="padding:2px !important;">
                                                        <img src="cmn_images/no.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <?php if ($canVwRcHstry === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Record History" onclick="getRecHstry('<?php
                                                    echo urlencode(encrypt1(($row[0] . "|vms.vms_transactions_hdr|trans_hdr_id"), $smplTokenWord1));
                                                    ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/Information.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                        </tr>
                                        <?php
                                    }
                                    ?>
                                </tbody>
                            </table>
                        </div>                     
                    </div>
                </form>
                <?php
            } else if ($vwtyp == 13) {
                //Teller/Cashier Transfers                
                if ($srcMenu == "Banking") {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1');\">
                                        <span style=\"text-decoration:none;\">Banking & Microfinance Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                } else {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                }
                echo $cntent . "<li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=0&srcMenu=$srcMenu');\">
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Vault Transactions</span>
				</li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=1&srcMenu=$srcMenu');\">
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Transfer Transactions</span>
				</li>
                                <li>
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Teller/Cashier Transfers</span>
				</li>
                               </ul>
                              </div>";
                $trnsType = "Teller/Cashier Transfers";
                $total = get_TrnsTtl($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn);
                if ($pageNo > ceil($total / $lmtSze)) {
                    $pageNo = 1;
                } else if ($pageNo < 1) {
                    $pageNo = ceil($total / $lmtSze);
                }

                $curIdx = $pageNo - 1;
                $result = get_Trns($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn, $curIdx, $lmtSze);
                $cntr = 0;
                ?> 
                <form id='allVmsTrnsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row " style="margin-bottom:0px;padding:0px 15px 0px 15px !important;">
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <input class="form-control" id="allVmsTrnsSrchFor" type = "text" placeholder="Search For" value="<?php
                                echo trim(str_replace("%", " ", $srchFor));
                                ?>" onkeyup="enterKeyFuncAllVmsTrns(event, '', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                <input id="allVmsTrnsPageNo" type = "hidden" value="<?php echo $pageNo; ?>">
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('clear', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </label>
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                    <span class="glyphicon glyphicon-search"></span>
                                </label> 
                            </div>
                        </div>
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <span class="input-group-addon">In</span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsSrchIn">
                                    <?php
                                    $valslctdArry = array("", "", "", "");
                                    $srchInsArrys = array("Transaction Number", "Description",
                                        "Transaction Type", "Transaction Status");

                                    for ($z = 0; $z < count($srchInsArrys); $z++) {
                                        if ($srchIn == $srchInsArrys[$z]) {
                                            $valslctdArry[$z] = "selected";
                                        }
                                        ?>
                                        <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                    <?php } ?>
                                </select>
                                <span class="input-group-addon" style="max-width: 1px !important;padding:0px !important;width:1px !important;border:none !important;"></span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsDsplySze" style="min-width:65px !important;">                            
                                    <?php
                                    $valslctdArry = array("", "", "", "", "", "",
                                        "", "");
                                    $dsplySzeArry = array(1, 5, 10, 15, 30, 50, 100,
                                        500, 1000);
                                    for ($y = 0; $y < count($dsplySzeArry); $y++) {
                                        if ($lmtSze == $dsplySzeArry[$y]) {
                                            $valslctdArry[$y] = "selected";
                                        } else {
                                            $valslctdArry[$y] = "";
                                        }
                                        ?>
                                        <option value="<?php echo $dsplySzeArry[$y]; ?>" <?php echo $valslctdArry[$y]; ?>><?php echo $dsplySzeArry[$y]; ?></option>                            
                                        <?php
                                    }
                                    ?>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4" style="padding:0px 1px 0px 1px !important;">
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text" id="allVmsTrnsStrtDate" name="allVmsTrnsStrtDate" value="<?php
                                    echo substr($qStrtDte, 0, 11);
                                    ?>" placeholder="Start Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text"  id="allVmsTrnsEndDate" name="allVmsTrnsEndDate" value="<?php
                                    echo substr($qEndDte, 0, 11);
                                    ?>" placeholder="End Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>                            
                        </div>
                        <div class="col-lg-2" style="padding:0px 1px 0px 1px !important;">
                            <nav aria-label="Page navigation">
                                <ul class="pagination" style="margin: 0px !important;">
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('previous', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('next', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <div class="row " style="margin-bottom:2px;padding:2px 15px 2px 15px !important">   
                        <div class="col-md-12" style="padding:2px 1px 2px 1px !important;border-top:1px solid #ddd;border-bottom:1px solid #ddd;">
                            <div class="col-md-6" style="padding:0px 1px 0px 1px !important;">
                                <button type="button" class="btn btn-default btn-sm" onclick="getOneVmsTrnsForm(-1, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');">
                                    <img src="cmn_images/add1-64.png" style="left: 0.5%; padding-right: 5px; height:20px; width:auto; position: relative; vertical-align: middle;">
                                    New Teller/Cashier Transaction
                                </button>
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <?php
                                        $nonAprvdChekd = "";
                                        if ($qUnathrzdOnly == "true") {
                                            $nonAprvdChekd = "checked=\"true\"";
                                        }
                                        $notValidChekd = "";
                                        if ($qInvalidOnly == "true") {
                                            $notValidChekd = "checked=\"true\"";
                                        }
                                        ?>
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwUnaprvd" name="allVmsTrnsShwUnaprvd" <?php echo $nonAprvdChekd; ?>>
                                        Unauthorized Trns.
                                    </label>
                                </div>                            
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>');" id="allVmsTrnsShwInvld" name="allVmsTrnsShwInvld"  <?php echo $notValidChekd; ?>>
                                        Only Invalid Trns.
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">&nbsp;</div>
                        </div>
                    </div>
                </form>
                <form id='allVmsTrnsHdrsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row"> 
                        <div  class="col-md-12">
                            <table class="table table-striped table-bordered table-responsive" id="allVmsTrnsHdrsTable" cellspacing="0" width="100%" style="width:100%;">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <?php if ($canEdtTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <th>...</th>		
                                        <th>Reference No.</th>
                                        <th>Trns. Date</th>
                                        <th>Remark/Narration</th>
                                        <th style="text-align:right;">CUR.</th>
                                        <th style="text-align:right;min-width: 100px;width: 100px;">Transaction Amount</th>
                                        <th>Authorization Status</th>
                                        <th>Validity Status</th>
                                        <th>...</th>
                                        <?php if ($canDelTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <?php if ($canVwRcHstry === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                    </tr>
                                </thead>
                                <tbody>
                                    <?php
                                    $reportTitle = $trnsType;
                                    $reportName = "VMS Transaction Voucher";
                                    if ($trnsType == $trnsTypes[4] || $trnsType == $trnsTypes[5] || $trnsType == $trnsTypes[6]) {
                                        $reportName = "VMS DEP/WITHDRAW Voucher";
                                    }
                                    $rptID = getRptID($reportName);
                                    $prmID1 = getParamIDUseSQLRep("{:trns_id}", $rptID);
                                    $prmID2 = getParamIDUseSQLRep("{:documentTitle}", $rptID);
                                    while ($row = loc_db_fetch_array($result)) {
                                        $trnsID = $row[0];
                                        $paramRepsNVals = $prmID1 . "~" . $trnsID . "|" . $prmID2 . "~" . $reportTitle . "|-130~" . $reportTitle . "|-190~PDF";
                                        $paramStr = urlencode($paramRepsNVals);
                                        $cntr += 1;
                                        ?>
                                        <tr id="allVmsTrnsHdrsRow_<?php echo $cntr; ?>">                                    
                                            <td class="lovtd"><?php echo ($curIdx * $lmtSze) + ($cntr); ?></td>
                                            <?php if ($canEdtTrns === true) { ?>                                    
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Edit Transaction" 
                                                            onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/edit32.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Print Transaction" onclick="getSilentRptsRnSts(<?php echo $rptID; ?>, -1, '<?php echo $paramStr; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/pdf.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <td class="lovtd">
                                                <?php echo $row[2]; ?>
                                                <input type="hidden" id="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" name="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" value="<?php echo $row[0]; ?>" placeholder="Start Date">
                                            </td>
                                            <td class="lovtd"><?php echo $row[1]; ?></td>
                                            <td class="lovtd"><?php echo "[" . $row[3] . "] " . $row[4]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;"><?php echo $row[31]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;color:blue;"><?php
                                                echo number_format((float) $row[21], 2);
                                                ?></td>
                                            <td class="lovtd"><?php echo $row[10]; ?></td>
                                            <td class="lovtd"><?php echo $row[12]; ?></td>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Transaction Details" onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 30, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/kghostview.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <?php if ($canDelTrns === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Delete Transaction" onclick="delVmsTrnsHdr('allVmsTrnsHdrsRow_<?php echo $cntr; ?>')" style="padding:2px !important;">
                                                        <img src="cmn_images/no.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <?php if ($canVwRcHstry === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Record History" onclick="getRecHstry('<?php
                                                    echo urlencode(encrypt1(($row[0] . "|vms.vms_transactions_hdr|trans_hdr_id"), $smplTokenWord1));
                                                    ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/Information.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                        </tr>
                                        <?php
                                    }
                                    ?>
                                </tbody>
                            </table>
                        </div>                     
                    </div>
                </form>
                <?php
            } else if ($vwtyp == 14) {
                //To Exam               
                if ($srcMenu == "Banking") {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1');\">
                                        <span style=\"text-decoration:none;\">Banking & Microfinance Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                } else {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                }
                echo $cntent . "<li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=0&srcMenu=$srcMenu');\">
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Vault Transactions</span>
				</li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=1&srcMenu=$srcMenu');\">
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Transfer Transactions</span>
				</li>
                                <li>
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">To Exam</span>
				</li>
                               </ul>
                              </div>";
                $trnsType = "To Exam";
                $total = get_TrnsTtl($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn);
                if ($pageNo > ceil($total / $lmtSze)) {
                    $pageNo = 1;
                } else if ($pageNo < 1) {
                    $pageNo = ceil($total / $lmtSze);
                }

                $curIdx = $pageNo - 1;
                $result = get_Trns($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn, $curIdx, $lmtSze);
                $cntr = 0;
                ?> 
                <form id='allVmsTrnsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row " style="margin-bottom:0px;padding:0px 15px 0px 15px !important;">
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <input class="form-control" id="allVmsTrnsSrchFor" type = "text" placeholder="Search For" value="<?php
                                echo trim(str_replace("%", " ", $srchFor));
                                ?>" onkeyup="enterKeyFuncAllVmsTrns(event, '', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                <input id="allVmsTrnsPageNo" type = "hidden" value="<?php echo $pageNo; ?>">
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('clear', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </label>
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                    <span class="glyphicon glyphicon-search"></span>
                                </label> 
                            </div>
                        </div>
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <span class="input-group-addon">In</span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsSrchIn">
                                    <?php
                                    $valslctdArry = array("", "", "", "");
                                    $srchInsArrys = array("Transaction Number", "Description",
                                        "Transaction Type", "Transaction Status");

                                    for ($z = 0; $z < count($srchInsArrys); $z++) {
                                        if ($srchIn == $srchInsArrys[$z]) {
                                            $valslctdArry[$z] = "selected";
                                        }
                                        ?>
                                        <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                    <?php } ?>
                                </select>
                                <span class="input-group-addon" style="max-width: 1px !important;padding:0px !important;width:1px !important;border:none !important;"></span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsDsplySze" style="min-width:65px !important;">                            
                                    <?php
                                    $valslctdArry = array("", "", "", "", "", "",
                                        "", "");
                                    $dsplySzeArry = array(1, 5, 10, 15, 30, 50, 100,
                                        500, 1000);
                                    for ($y = 0; $y < count($dsplySzeArry); $y++) {
                                        if ($lmtSze == $dsplySzeArry[$y]) {
                                            $valslctdArry[$y] = "selected";
                                        } else {
                                            $valslctdArry[$y] = "";
                                        }
                                        ?>
                                        <option value="<?php echo $dsplySzeArry[$y]; ?>" <?php echo $valslctdArry[$y]; ?>><?php echo $dsplySzeArry[$y]; ?></option>                            
                                        <?php
                                    }
                                    ?>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4" style="padding:0px 1px 0px 1px !important;">
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text" id="allVmsTrnsStrtDate" name="allVmsTrnsStrtDate" value="<?php
                                    echo substr($qStrtDte, 0, 11);
                                    ?>" placeholder="Start Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text"  id="allVmsTrnsEndDate" name="allVmsTrnsEndDate" value="<?php
                                    echo substr($qEndDte, 0, 11);
                                    ?>" placeholder="End Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>                            
                        </div>
                        <div class="col-lg-2" style="padding:0px 1px 0px 1px !important;">
                            <nav aria-label="Page navigation">
                                <ul class="pagination" style="margin: 0px !important;">
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('previous', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('next', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <div class="row " style="margin-bottom:2px;padding:2px 15px 2px 15px !important">   
                        <div class="col-md-12" style="padding:2px 1px 2px 1px !important;border-top:1px solid #ddd;border-bottom:1px solid #ddd;">
                            <div class="col-md-6" style="padding:0px 1px 0px 1px !important;">
                                <button type="button" class="btn btn-default btn-sm" onclick="getOneVmsTrnsForm(-1, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');">
                                    <img src="cmn_images/add1-64.png" style="left: 0.5%; padding-right: 5px; height:20px; width:auto; position: relative; vertical-align: middle;">
                                    New Movement to Exam
                                </button>
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <?php
                                        $nonAprvdChekd = "";
                                        if ($qUnathrzdOnly == "true") {
                                            $nonAprvdChekd = "checked=\"true\"";
                                        }
                                        $notValidChekd = "";
                                        if ($qInvalidOnly == "true") {
                                            $notValidChekd = "checked=\"true\"";
                                        }
                                        ?>
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" id="allVmsTrnsShwUnaprvd" name="allVmsTrnsShwUnaprvd" <?php echo $nonAprvdChekd; ?>>
                                        Unauthorized Trns.
                                    </label>
                                </div>                            
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" id="allVmsTrnsShwInvld" name="allVmsTrnsShwInvld"  <?php echo $notValidChekd; ?>>
                                        Only Invalid Trns.
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">&nbsp;</div>
                        </div>
                    </div>
                </form>
                <form id='allVmsTrnsHdrsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row"> 
                        <div  class="col-md-12">
                            <table class="table table-striped table-bordered table-responsive" id="allVmsTrnsHdrsTable" cellspacing="0" width="100%" style="width:100%;">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <?php if ($canEdtTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <th>...</th>		
                                        <th>Reference No.</th>
                                        <th>Trns. Date</th>
                                        <th>Remark/Narration</th>
                                        <th style="text-align:right;">CUR.</th>
                                        <th style="text-align:right;min-width: 100px;width: 100px;">Transaction Amount</th>
                                        <th>Authorization Status</th>
                                        <th>Validity Status</th>
                                        <th>...</th>
                                        <?php if ($canDelTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <?php if ($canVwRcHstry === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                    </tr>
                                </thead>
                                <tbody>
                                    <?php
                                    $reportTitle = $trnsType;
                                    $reportName = "VMS Transaction Voucher";
                                    if ($trnsType == $trnsTypes[4] || $trnsType == $trnsTypes[5] || $trnsType == $trnsTypes[6]) {
                                        $reportName = "VMS DEP/WITHDRAW Voucher";
                                    }
                                    $rptID = getRptID($reportName);
                                    $prmID1 = getParamIDUseSQLRep("{:trns_id}", $rptID);
                                    $prmID2 = getParamIDUseSQLRep("{:documentTitle}", $rptID);
                                    while ($row = loc_db_fetch_array($result)) {
                                        $trnsID = $row[0];
                                        $paramRepsNVals = $prmID1 . "~" . $trnsID . "|" . $prmID2 . "~" . $reportTitle . "|-130~" . $reportTitle . "|-190~PDF";
                                        $paramStr = urlencode($paramRepsNVals);
                                        $cntr += 1;
                                        ?>
                                        <tr id="allVmsTrnsHdrsRow_<?php echo $cntr; ?>">                                    
                                            <td class="lovtd"><?php echo ($curIdx * $lmtSze) + ($cntr); ?></td>
                                            <?php if ($canEdtTrns === true) { ?>                                    
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Edit Transaction" 
                                                            onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/edit32.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Print Transaction" onclick="getSilentRptsRnSts(<?php echo $rptID; ?>, -1, '<?php echo $paramStr; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/pdf.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <td class="lovtd">
                                                <?php echo $row[2]; ?>
                                                <input type="hidden" id="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" name="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" value="<?php echo $row[0]; ?>" placeholder="Start Date">
                                            </td>
                                            <td class="lovtd"><?php echo $row[1]; ?></td>
                                            <td class="lovtd"><?php echo "[" . $row[3] . "] " . $row[4]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;"><?php echo $row[31]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;color:blue;"><?php
                                                echo number_format((float) $row[21], 2);
                                                ?></td>
                                            <td class="lovtd"><?php echo $row[10]; ?></td>
                                            <td class="lovtd"><?php echo $row[12]; ?></td>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Transaction Details" onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 30, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/kghostview.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <?php if ($canDelTrns === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Delete Transaction" onclick="delVmsTrnsHdr('allVmsTrnsHdrsRow_<?php echo $cntr; ?>')" style="padding:2px !important;">
                                                        <img src="cmn_images/no.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <?php if ($canVwRcHstry === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Record History" onclick="getRecHstry('<?php
                                                    echo urlencode(encrypt1(($row[0] . "|vms.vms_transactions_hdr|trans_hdr_id"), $smplTokenWord1));
                                                    ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/Information.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                        </tr>
                                        <?php
                                    }
                                    ?>
                                </tbody>
                            </table>
                        </div>                     
                    </div>
                </form>
                <?php
            } else if ($vwtyp == 15) {
                //From Exam            
                if ($srcMenu == "Banking") {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=17&typ=1');\">
                                        <span style=\"text-decoration:none;\">Banking & Microfinance Menu</span>
                                </li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                } else {
                    $cntent .= "
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&srcMenu=$srcMenu');\">
                                        <span style=\"text-decoration:none;\">VMS Menu</span>
                                </li>";
                }
                echo $cntent . "<li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=0&srcMenu=$srcMenu');\">
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Vault Transactions</span>
				</li>
                                <li onclick=\"openATab('#allmodules', 'grp=$group&typ=$type&pg=2&vtyp=1&srcMenu=$srcMenu');\">
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">Transfer Transactions</span>
				</li>
                                <li>
                                    <span class=\"divider\"><i class=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>
                                    <span style=\"text-decoration:none;\">From Exam</span>
				</li>
                               </ul>
                              </div>";
                $trnsType = "From Exam";
                $total = get_TrnsTtl($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn);
                if ($pageNo > ceil($total / $lmtSze)) {
                    $pageNo = 1;
                } else if ($pageNo < 1) {
                    $pageNo = ceil($total / $lmtSze);
                }

                $curIdx = $pageNo - 1;
                $result = get_Trns($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $srchIn, $curIdx, $lmtSze);
                $cntr = 0;
                ?> 
                <form id='allVmsTrnsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row " style="margin-bottom:0px;padding:0px 15px 0px 15px !important;">
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <input class="form-control" id="allVmsTrnsSrchFor" type = "text" placeholder="Search For" value="<?php
                                echo trim(str_replace("%", " ", $srchFor));
                                ?>" onkeyup="enterKeyFuncAllVmsTrns(event, '', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                <input id="allVmsTrnsPageNo" type = "hidden" value="<?php echo $pageNo; ?>">
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('clear', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>')">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </label>
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                    <span class="glyphicon glyphicon-search"></span>
                                </label> 
                            </div>
                        </div>
                        <div class="col-lg-3" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <span class="input-group-addon">In</span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsSrchIn">
                                    <?php
                                    $valslctdArry = array("", "", "", "");
                                    $srchInsArrys = array("Transaction Number", "Description",
                                        "Transaction Type", "Transaction Status");

                                    for ($z = 0; $z < count($srchInsArrys); $z++) {
                                        if ($srchIn == $srchInsArrys[$z]) {
                                            $valslctdArry[$z] = "selected";
                                        }
                                        ?>
                                        <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                    <?php } ?>
                                </select>
                                <span class="input-group-addon" style="max-width: 1px !important;padding:0px !important;width:1px !important;border:none !important;"></span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsDsplySze" style="min-width:65px !important;">                            
                                    <?php
                                    $valslctdArry = array("", "", "", "", "", "",
                                        "", "");
                                    $dsplySzeArry = array(1, 5, 10, 15, 30, 50, 100,
                                        500, 1000);
                                    for ($y = 0; $y < count($dsplySzeArry); $y++) {
                                        if ($lmtSze == $dsplySzeArry[$y]) {
                                            $valslctdArry[$y] = "selected";
                                        } else {
                                            $valslctdArry[$y] = "";
                                        }
                                        ?>
                                        <option value="<?php echo $dsplySzeArry[$y]; ?>" <?php echo $valslctdArry[$y]; ?>><?php echo $dsplySzeArry[$y]; ?></option>                            
                                        <?php
                                    }
                                    ?>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4" style="padding:0px 1px 0px 1px !important;">
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text" id="allVmsTrnsStrtDate" name="allVmsTrnsStrtDate" value="<?php
                                    echo substr($qStrtDte, 0, 11);
                                    ?>" placeholder="Start Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text"  id="allVmsTrnsEndDate" name="allVmsTrnsEndDate" value="<?php
                                    echo substr($qEndDte, 0, 11);
                                    ?>" placeholder="End Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>                            
                        </div>
                        <div class="col-lg-2" style="padding:0px 1px 0px 1px !important;">
                            <nav aria-label="Page navigation">
                                <ul class="pagination" style="margin: 0px !important;">
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('previous', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllVmsTrns('next', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <div class="row " style="margin-bottom:2px;padding:2px 15px 2px 15px !important">   
                        <div class="col-md-12" style="padding:2px 1px 2px 1px !important;border-top:1px solid #ddd;border-bottom:1px solid #ddd;">
                            <div class="col-md-6" style="padding:0px 1px 0px 1px !important;">
                                <button type="button" class="btn btn-default btn-sm" onclick="getOneVmsTrnsForm(-1, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');">
                                    <img src="cmn_images/add1-64.png" style="left: 0.5%; padding-right: 5px; height:20px; width:auto; position: relative; vertical-align: middle;">
                                    New Receipt from Exam
                                </button>
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <?php
                                        $nonAprvdChekd = "";
                                        if ($qUnathrzdOnly == "true") {
                                            $nonAprvdChekd = "checked=\"true\"";
                                        }
                                        $notValidChekd = "";
                                        if ($qInvalidOnly == "true") {
                                            $notValidChekd = "checked=\"true\"";
                                        }
                                        ?>
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" id="allVmsTrnsShwUnaprvd" name="allVmsTrnsShwUnaprvd" <?php echo $nonAprvdChekd; ?>>
                                        Unauthorized Trns.
                                    </label>
                                </div>                            
                            </div>
                            <div class="col-md-2" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <input type="checkbox" class="form-check-input" onclick="getAllVmsTrns('', '#allmodules', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&srcMenu=<?php echo $srcMenu; ?>');" id="allVmsTrnsShwInvld" name="allVmsTrnsShwInvld"  <?php echo $notValidChekd; ?>>
                                        Only Invalid Trns.
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-2">&nbsp;</div>
                        </div>
                    </div>
                </form>
                <form id='allVmsTrnsHdrsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row"> 
                        <div  class="col-md-12">
                            <table class="table table-striped table-bordered table-responsive" id="allVmsTrnsHdrsTable" cellspacing="0" width="100%" style="width:100%;">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <?php if ($canEdtTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <th>...</th>		
                                        <th>Reference No.</th>
                                        <th>Trns. Date</th>
                                        <th>Remark/Narration</th>
                                        <th style="text-align:right;">CUR.</th>
                                        <th style="text-align:right;min-width: 100px;width: 100px;">Transaction Amount</th>
                                        <th>Authorization Status</th>
                                        <th>Validity Status</th>
                                        <th>...</th>
                                        <?php if ($canDelTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <?php if ($canVwRcHstry === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                    </tr>
                                </thead>
                                <tbody>
                                    <?php
                                    $reportTitle = $trnsType;
                                    $reportName = "VMS Transaction Voucher";
                                    if ($trnsType == $trnsTypes[4] || $trnsType == $trnsTypes[5] || $trnsType == $trnsTypes[6]) {
                                        $reportName = "VMS DEP/WITHDRAW Voucher";
                                    }
                                    $rptID = getRptID($reportName);
                                    $prmID1 = getParamIDUseSQLRep("{:trns_id}", $rptID);
                                    $prmID2 = getParamIDUseSQLRep("{:documentTitle}", $rptID);
                                    while ($row = loc_db_fetch_array($result)) {
                                        $trnsID = $row[0];
                                        $paramRepsNVals = $prmID1 . "~" . $trnsID . "|" . $prmID2 . "~" . $reportTitle . "|-130~" . $reportTitle . "|-190~PDF";
                                        $paramStr = urlencode($paramRepsNVals);
                                        $cntr += 1;
                                        ?>
                                        <tr id="allVmsTrnsHdrsRow_<?php echo $cntr; ?>">                                    
                                            <td class="lovtd"><?php echo ($curIdx * $lmtSze) + ($cntr); ?></td>
                                            <?php if ($canEdtTrns === true) { ?>                                    
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Edit Transaction" 
                                                            onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 20, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/edit32.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Print Transaction" onclick="getSilentRptsRnSts(<?php echo $rptID; ?>, -1, '<?php echo $paramStr; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/pdf.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <td class="lovtd">
                                                <?php echo $row[2]; ?>
                                                <input type="hidden" id="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" name="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" value="<?php echo $row[0]; ?>" placeholder="Start Date">
                                            </td>
                                            <td class="lovtd"><?php echo $row[1]; ?></td>
                                            <td class="lovtd"><?php echo "[" . $row[3] . "] " . $row[4]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;"><?php echo $row[31]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;color:blue;"><?php
                                                echo number_format((float) $row[21], 2);
                                                ?></td>
                                            <td class="lovtd"><?php echo $row[10]; ?></td>
                                            <td class="lovtd"><?php echo $row[12]; ?></td>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Transaction Details" onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', 30, 'ShowDialog',<?php echo $vwtyp; ?>, '', '<?php echo $srcMenu; ?>');" style="padding:2px !important;">
                                                    <img src="cmn_images/kghostview.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <?php if ($canDelTrns === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Delete Transaction" onclick="delVmsTrnsHdr('allVmsTrnsHdrsRow_<?php echo $cntr; ?>')" style="padding:2px !important;">
                                                        <img src="cmn_images/no.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <?php if ($canVwRcHstry === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Record History" onclick="getRecHstry('<?php
                                                    echo urlencode(encrypt1(($row[0] . "|vms.vms_transactions_hdr|trans_hdr_id"), $smplTokenWord1));
                                                    ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/Information.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                        </tr>
                                        <?php
                                    }
                                    ?>
                                </tbody>
                            </table>
                        </div>                     
                    </div>
                </form>
                <?php
            } else if ($vwtyp == 20) {
                $sbmtdVmsTrnsHdrID = isset($_POST['sbmtdVmsTrnsHdrID']) ? (float) cleanInputData($_POST['sbmtdVmsTrnsHdrID']) : -1;
                $sbmtdShelfID = isset($_POST['sbmtdShelfID']) ? (float) cleanInputData($_POST['sbmtdShelfID']) : -1;
                $sbmtdSiteID = isset($_POST['sbmtdSiteID']) ? (float) cleanInputData($_POST['sbmtdSiteID']) : -1;
                $sbmtdStoreID = isset($_POST['sbmtdStoreID']) ? (float) cleanInputData($_POST['sbmtdStoreID']) : -1;
                $tblrVwTyp = isset($_POST['tblrVwTyp']) ? cleanInputData($_POST['tblrVwTyp']) : 13;
                $trnsType = isset($_POST['trnsType']) ? cleanInputData($_POST['trnsType']) : "";
                $dfltDstItemState = $trnsTypeDfltItmState[findArryIdx($trnsTypes, $trnsType)];
                $dfltSrcItemState = $dfltDstItemState;
                if (!$canAddTrns || ($sbmtdVmsTrnsHdrID > 0 && !$canEdtTrns)) {
                    restricted();
                    exit();
                }
                $orgnlVmsTrnsHdrID = $sbmtdVmsTrnsHdrID;
                $rqStatus = "Not Submitted";
                $actType = "";
                $rqstatusColor = "red";
                $dte = date('ymdHis');
                $usrTrnsCode = getGnrlRecNm("sec.sec_users", "user_id", "code_for_trns_nums", $usrID);
                $gnrtdTrnsNo = $trnsTypeABRV[findArryIdx($trnsTypes, $trnsType)] . "-" . $usrTrnsCode . "-" . $dte;

                $gnrtdTrnsDate = $gnrlTrnsDteDMYHMS; //date('d-M-Y H:i:s');
                $gnrtdTrnsDate1 = $gnrlTrnsDteYMDHMS; //date('Y-m-d H:i:s');
                $prprdBy = "<span style=\"color:blue;font-weight:bold;\">" . $uName . "@" . $gnrtdTrnsDate . "</span>";
                $brnchLocID = getLatestSiteID($prsnid);
                $brnchLoc = getGnrlRecNm("org.org_sites_locations", "location_id",
                        "REPLACE(location_code_name || '.' || site_desc, '.' || location_code_name,'')", $brnchLocID);
                $crncyID = $fnccurid;
                $crncyIDNm = $fnccurnm;
                $pymtCrncyNm = "";
                $pymtCrncyID = -1;
                $srcVltID = -1;
                $srcCageID = -1;
                $destVltID = -1;
                $destCageID = -1;
                $srcVltNm = "";
                $srcCageNm = "";
                $destVltNm = "";
                $destCageNm = "";
                $vldtyStatus = "<span style=\"color:red;font-weight:bold;\">Not Validated</span>";
                $athrztnStatus = "<span style=\"color:red;font-weight:bold;\">Not Submitted</span>";
                $itmBaseUomNm = "pcs";
                $voidedTrnsHdrID = -1;
                $voidedTrnsType = "";
                $vmsTrnsDesc = "";
                $vmsTrnsClsfctn = "";
                $vmsTrnsTtlAmnt = 0;
                $vmsPymtTtlAmnt = 0;
                $vmsPymtCrncyID = -1;
                $vmsPymtCrncyNm = "";
                $mkReadOnly = "";
                $mkRmrkReadOnly = "";
                $cstmrID = -1;
                $cstmrNm = -1;
                $cstmrSiteID = -1;
                $exchangeRate = 0;
                $vmsTrnsPrsn = "N/A";
                $vmsOffctStaffLocID = getPersonLocID($prsnid);
                $vmsOffctStaff = getPrsnFullNm($prsnid);
                $vmsOffctStaffPrsID = $prsnid;
                $vmsChequeNo = "";
                $extrInputFlds = "";
                $capturedItemIDs = "";
                if ($sbmtdVmsTrnsHdrID > 0) {
                    //Important! Must Check if One also has prmsn to Edit brought Trns Hdr ID
                    calcAllVMSLinesTtlVals($sbmtdVmsTrnsHdrID);
                    $result = get_One_VMSTrnsHdr($sbmtdVmsTrnsHdrID);
                    if ($row = loc_db_fetch_array($result)) {
                        $trnsType = $row[3];
                        $rqStatus = $row[10];
                        $voidedTrnsHdrID = (float) $row[13];
                        $voidedTrnsType = $row[14];
                        if ($rqStatus == "Not Submitted" || $rqStatus == "Withdrawn" || $rqStatus == "Rejected") {
                            $rqstatusColor = "red";
                            if ($voidedTrnsHdrID <= 0) {
                                $mkReadOnly = "";
                                $mkRmrkReadOnly = "";
                            } else {
                                $mkReadOnly = "readonly=\"true\"";
                                $mkRmrkReadOnly = "";
                            }
                        } else if ($rqStatus != "Authorized") {
                            $mkReadOnly = "readonly=\"true\"";
                            $mkRmrkReadOnly = "readonly=\"true\"";
                            $rqstatusColor = "brown";
                        } else {
                            $rqstatusColor = "green";
                            $mkReadOnly = "readonly=\"true\"";
                            $mkRmrkReadOnly = "readonly=\"true\"";
                        }
                        $gnrtdTrnsNo = $row[2];
                        $gnrtdTrnsDate = $row[1];
                        $uName11 = getUserName((float) $row[15]);
                        $prprdBy = "<span style=\"color:blue;font-weight:bold;\">" . $uName11 . "@" . $gnrtdTrnsDate . "</span>";
                        $brnchLocID = (int) $row[20];
                        $brnchLoc = getGnrlRecNm("org.org_sites_locations", "location_id",
                                "REPLACE(location_code_name || '.' || site_desc, '.' || location_code_name,'')", $brnchLocID);
                        $crncyID = (int) $row[30];
                        $crncyIDNm = $row[31];
                        if ($crncyID <= 0) {
                            $crncyID = $fnccurid;
                            $crncyIDNm = $fnccurnm;
                        }
                        $srcVltID = (int) $row[22];
                        $srcCageID = (int) $row[24];
                        $dfltSrcItemState = getGnrlRecNm("inv.inv_shelf", "line_id", "dflt_item_state", $srcCageID);
                        $destVltID = (int) $row[26];
                        $destCageID = (int) $row[28];
                        $dfltDstItemState = getGnrlRecNm("inv.inv_shelf", "line_id", "dflt_item_state", $destCageID);
                        $srcVltNm = $row[23];
                        $srcCageNm = $row[25];
                        $destVltNm = $row[27];
                        $destCageNm = $row[29];
                        if ($row[12] == "Validated") {
                            $vldtyStatus = "<span style=\"color:green;font-weight:bold;\">" . $row[12] . "</span>";
                        } else {
                            $vldtyStatus = "<span style=\"color:red;font-weight:bold;\">" . $row[12] . "</span>";
                        }
                        if ($row[10] == "Authorized") {
                            $athrztnStatus = "<span style=\"color:green;font-weight:bold;\">" . $row[10] . "</span>";
                        } else {
                            $athrztnStatus = "<span style=\"color:red;font-weight:bold;\">" . $row[10] . "</span>";
                        }
                        if ($voidedTrnsHdrID <= 0) {
                            $vmsTrnsDesc = $row[4];
                        } else {
                            $vmsTrnsDesc = $row[36];
                        }
                        $vmsTrnsClsfctn = $row[9];
                        $vmsTrnsTtlAmnt = (float) $row[21];
                        $vmsPymtTtlAmnt = (float) $row[34];
                        $vmsPymtCrncyID = (float) $row[32];
                        $vmsPymtCrncyNm = $row[33];
                        $cstmrID = (float) $row[5];
                        $cstmrNm = $row[6];
                        $cstmrSiteID = (float) $row[7];
                        $exchangeRate = $row[35];
                        $vmsTrnsPrsn = $row[38];
                        $vmsOffctStaffLocID = $row[39];
                        $vmsOffctStaff = $row[40];
                        $vmsChequeNo = $row[42];
                        $vmsOffctStaffPrsID = (float) $row[41];
                    }
                } else {
                    $sbmtdVmsTrnsHdrID = getNewTrnsHdrID();
                    if ($sbmtdShelfID > 0 && $sbmtdStoreID >= 0 && $trnsType = "Teller/Cashier Transfers") {
                        $srcVltID = $sbmtdStoreID;
                        $srcCageID = $sbmtdShelfID;
                        $srcVltNm = getGnrlRecNm("inv.inv_itm_subinventories", "subinv_id", "subinv_name", $srcVltID);
                        $srcCageNm = getGnrlRecNm("inv.inv_shelf", "line_id", "shelve_name", $srcCageID);
                        //$destVltID = -1;
                        //$destCageID = -1;
                    }
                    createVMSTrnsHdr($sbmtdVmsTrnsHdrID, $gnrtdTrnsDate1, $gnrtdTrnsNo, $trnsType, "", -1, -1, $voidedTrnsHdrID, $voidedTrnsType, "",
                            $brnchLocID, 0.00, $srcVltID, $srcCageID, $destVltID, $destCageID, $crncyID, -1, 0, 0, "1", $vmsTrnsPrsn,
                            $vmsOffctStaffPrsID);
                }
                if ($srcCageID <= 0 && $trnsType == "Vault/GL Account Transfers") {
                    $invAssetAcntID = -1;
                    $sbmtdShelfID = getLatestCage($prsnid, $srcCageID, $sbmtdStoreID, $invAssetAcntID);
                    $srcVltID = $sbmtdStoreID;
                    $srcCageID = $sbmtdShelfID;
                    $srcVltNm = getGnrlRecNm("inv.inv_itm_subinventories", "subinv_id", "subinv_name", $srcVltID);
                    $srcCageNm = getGnrlRecNm("inv.inv_shelf", "line_id", "shelve_name", $srcCageID);
                } else if ($destCageID <= 0 && $trnsType == "GL/Vault Account Transfers") {
                    $invAssetAcntID = -1;
                    $sbmtdShelfID = getLatestCage($prsnid, $destCageID, $sbmtdStoreID, $invAssetAcntID);
                    $destVltID = $sbmtdStoreID;
                    $destCageID = $sbmtdShelfID;
                    $destVltNm = getGnrlRecNm("inv.inv_itm_subinventories", "subinv_id", "subinv_name", $destVltID);
                    $destCageNm = getGnrlRecNm("inv.inv_shelf", "line_id", "shelve_name", $destCageID);
                }
                $routingID = getVMSMxRoutingID($sbmtdVmsTrnsHdrID);
                $reportTitle = $trnsType;
                $reportName = "VMS Transaction Voucher";
                if ($trnsType == $trnsTypes[4] || $trnsType == $trnsTypes[5] || $trnsType == $trnsTypes[6]) {
                    $reportName = "VMS DEP/WITHDRAW Voucher";
                }
                $rptID = getRptID($reportName);
                $prmID1 = getParamIDUseSQLRep("{:trns_id}", $rptID);
                $prmID2 = getParamIDUseSQLRep("{:documentTitle}", $rptID);
                $trnsID = $sbmtdVmsTrnsHdrID;
                $paramRepsNVals = $prmID1 . "~" . $trnsID . "|" . $prmID2 . "~" . $reportTitle . "|-130~" . $reportTitle . "|-190~PDF";
                $paramStr = urlencode($paramRepsNVals);

                $trayCnvFctr = 0;
                $bndlCnvFctr = 0;
                $curRslt = get_All_Crncies($crncyID, "Note");
                while ($rowCur = loc_db_fetch_array($curRslt)) {
                    $itmID = (int) $rowCur[0];
                    $trayCnvFctr = getUomCnvrsnFctr($itmID, "tray");
                    $bndlCnvFctr = getUomCnvrsnFctr($itmID, "bundle");
                    break;
                }
                ?>
                <form class="form-horizontal" id="oneVmsTrnsEDTForm">
                    <div class="row" style="margin: 0px 0px 10px 0px !important;">
                        <div class="col-md-6" style="padding:0px 15px 0px 0px !important;">
                            <div class="" style="padding:0px 0px 0px 0px;float:left !important;">                               
                                <button type="button" class="btn btn-default btn-sm" style="" id="myVmsTrnsStatusBtn"><span style="font-weight:bold;">Status: </span><span style="color:<?php echo $rqstatusColor; ?>;font-weight: bold;"><?php echo $rqStatus; ?></span></button>
                                <!--<button type="button" class="btn btn-default btn-sm" style="" onclick="clearVMSForm('oneVmsTrnsLnsTable');"><img src="cmn_images/undo_256.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;">Clear Form&nbsp;</button>-->
                                <?php //if ($rqStatus == "Authorized") {           ?>
                                <button type="button" class="btn btn-default" style=""  onclick="getSilentRptsRnSts(<?php echo $rptID; ?>, -1, '<?php echo $paramStr; ?>');" style="width:100% !important;">
                                    <img src="cmn_images/pdf.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;">
                                    Print Transaction
                                </button>
                                <?php //}           ?>
                            </div>
                        </div> 
                        <div class="col-md-6" style="padding:0px 0px 0px 0px !important;">
                            <div class="" style="padding:0px 0px 0px 0px;float:right !important;"> 
                                <?php
                                if ($rqStatus == "Not Submitted" || $rqStatus == "Withdrawn" || $rqStatus == "Rejected") {
                                    ?>
                                    <?php if ($voidedTrnsHdrID <= 0) { ?>  
                                        <button type="button" class="btn btn-default btn-sm" style="" onclick="saveVmsTrnsForm('<?php echo $fnccurnm; ?>', 0, <?php echo $tblrVwTyp; ?>, '<?php echo $srcMenu; ?>');"><img src="cmn_images/FloppyDisk.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;">Save&nbsp;</button>                                             
                                        <button type="button" class="btn btn-default btn-sm" style="" onclick="saveVmsTrnsForm('<?php echo $fnccurnm; ?>', 1, <?php echo $tblrVwTyp; ?>, '<?php echo $srcMenu; ?>');"><img src="cmn_images/Emailcon.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;">Submit&nbsp;</button>
                                    <?php } else if (($trnsType != "Vault/GL Account Transfers" && $trnsType != "GL/Vault Account Transfers") || 1 == 1) { ?>                                          
                                        <button id="fnlzeRvrslVmsTrnsBtn" type="button" class="btn btn-default btn-sm" style="" onclick="saveVmsRvrsTrnsForm('<?php echo $fnccurnm; ?>', 1, <?php echo $tblrVwTyp; ?>, '<?php echo $srcMenu; ?>');"><img src="cmn_images/Emailcon.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;">Submit Reversal&nbsp;</button>
                                    <?php } ?>
                                    <?php
                                } else if ($rqStatus != "Authorized") {
                                    ?>                                    
                                    <button type="button" class="btn btn-default btn-sm" style="" onclick="wthdrwVMSTrnsRqst('<?php echo $trnsType; ?>', 20, <?php echo $tblrVwTyp; ?>, '<?php echo $srcMenu; ?>');"><img src="cmn_images/withdraw_rqst.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;">Withdraw&nbsp;</button>                                      
                                    <button type="button" class="btn btn-default btn-sm" style="" onclick="authrzeVMSTrnsRqst('<?php echo $trnsType; ?>', 20, <?php echo $tblrVwTyp; ?>, '<?php echo $srcMenu; ?>');"><img src="cmn_images/Stamp-512.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;">Authorize&nbsp;</button>                                                                                                        
                                    <button type="button" class="btn btn-default btn-sm" style="" onclick="checkWkfRqstStatus(<?php echo $routingID; ?>, 'VMS Trns. Authorization Progress History');"><img src="cmn_images/workflow.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;">Progress&nbsp;</button>                                
                                    <?php
                                } else if ($rqStatus == "Authorized") {
                                    ?>
                                    <button type="button" class="btn btn-default btn-sm" style="" onclick="checkWkfRqstStatus(<?php echo $routingID; ?>, 'VMS Trns. Authorization Progress History');"><img src="cmn_images/workflow.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;" data-toggle="tooltip" title="Authorization Progress History">Progress&nbsp;</button>  
                                    <?php if (($trnsType != "Vault/GL Account Transfers" && $trnsType != "GL/Vault Account Transfers") || 1 == 1) { ?> 
                                        <button type="button" class="btn btn-default btn-sm" style="" onclick="saveVmsRvrsTrnsForm('<?php echo $fnccurnm; ?>', 0, <?php echo $tblrVwTyp; ?>, '<?php echo $srcMenu; ?>');"><img src="cmn_images/90.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;">Void Transaction&nbsp;</button>                                                                   
                                        <?php
                                    }
                                }
                                ?>
                            </div>
                        </div>                    
                    </div>
                    <fieldset class="basic_person_fs2" style="min-height:50px !important;">
                        <!--<legend class="basic_person_lg">Transaction Header Information</legend>-->
                        <div class="row" style="margin-top:5px;">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <div class="col-md-4">
                                        <label style="margin-bottom:0px !important;">Transaction No.:</label>
                                    </div>
                                    <div class="col-md-8">
                                        <input type="text" class="form-control" aria-label="..." id="vmsTrnsNum" name="vmsTrnsNum" value="<?php echo $gnrtdTrnsNo; ?>" readonly="true">
                                        <input class="form-control" type="hidden" id="vmsTrnsHdrID" value="<?php echo $sbmtdVmsTrnsHdrID; ?>"/>
                                        <input class="form-control" type="hidden" id="vmsVoidedTrnsHdrID" value="<?php echo $voidedTrnsHdrID; ?>"/>
                                        <input class="form-control" type="hidden" id="newVMSHdrID" value="-1"/>
                                        <input type="hidden" id="gnrlVmsOrgID" value="<?php echo $orgID; ?>">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-4">
                                        <label style="margin-bottom:0px !important;">Transaction Date:</label>
                                    </div>
                                    <div class="col-md-8">
                                        <input type="text" class="form-control" aria-label="..." id="vmsTrnsDate" name="vmsTrnsDate" value="<?php echo $gnrtdTrnsDate; ?>" readonly="true">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-4">
                                        <label style="margin-bottom:0px !important;">Transaction Type:</label>
                                    </div>
                                    <div class="col-md-8">
                                        <?php if ($trnsType != "") { ?>
                                            <input type="text" class="form-control" aria-label="..." id="vmsTrnsType" name="vmsTrnsType" value="<?php echo $trnsType; ?>" readonly="true">
                                        <?php } else { ?>
                                            <div class="input-group">
                                                <input type="text" class="form-control rqrdFld" aria-label="..." id="vmsTrnsType" name="vmsTrnsType" value="<?php echo $trnsType; ?>" <?php echo $mkReadOnly; ?>>
                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All Customers and Suppliers', 'gnrlVmsOrgID', '', '', 'radio', true, '', '', 'vmsTrnsType', 'clear', 1, '');">
                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                </label>
                                            </div>
                                        <?php } ?>
                                    </div>
                                </div>
                                <div class = "form-group">
                                    <div class = "col-md-4">
                                        <label style="margin-bottom:0px !important;margin-top:5px !important;">Location:</label>
                                    </div>
                                    <div class = "col-md-8">
                                        <input type="text" class="form-control" aria-label="..." id="vmsBrnchLoc" name="vmsBrnchLoc" value="<?php echo $brnchLoc; ?>" readonly="true">
                                        <input type="hidden" id="vmsBrnchLocID" value="<?php echo $brnchLocID; ?>">
                                    </div>
                                </div>
                                <!--<div class = "form-group">
                                    <div class = "col-md-4">
                                        <label style="margin-bottom:0px !important;">Prepared By:</label>
                                    </div>
                                    <div class = "col-md-8">
                                <?php echo $prprdBy; ?>
                                    </div>
                                </div>-->
                            </div>
                            <div class="col-md-4">  
                                <?php
                                $descRowHght = 9;
                                $fldLbl = "Client";
                                $slipNoLbl = "Waybill No.:";
                                $slipNoLblRqrd = "rqrdFld";
                                if ($trnsType == "Deposits") {
                                    $slipNoLbl = "Deposit Slip No.:";
                                } else if ($trnsType == "Withdrawals") {
                                    $slipNoLbl = "Cheque No.:";
                                } else if ($trnsType == "GL/Vault Account Transfers") {
                                    $slipNoLbl = "Cheque No.:";
                                    $slipNoLblRqrd = "";
                                } else if ($trnsType == "Vault/GL Account Transfers") {
                                    $slipNoLbl = "Voucher/Slip No.:";
                                    $slipNoLblRqrd = "";
                                }
                                if (strpos($trnsType, "Purchase") === TRUE && strpos($trnsType, "Importation") === TRUE) {
                                    $fldLbl = "Vendor";
                                }
                                if (strpos($trnsType, "Transfer") === FALSE && strpos($trnsType, "Exam") === FALSE && strpos($trnsType, "Transit") === FALSE && strpos($trnsType, "Adjustment") === FALSE) {
                                    $descRowHght = 7;
                                    ?>
                                    <div class="form-group form-group-sm">
                                        <label for="vmsCstmrNm" class="control-label col-md-4"><?php echo $fldLbl; ?>:</label>
                                        <div  class="col-md-8">
                                            <div class="input-group">
                                                <input type="text" class="form-control" aria-label="..." id="vmsCstmrNm" name="vmsCstmrNm" value="<?php echo $cstmrNm; ?>" readonly="true">
                                                <input type="hidden" id="vmsCstmrID" value="<?php echo $cstmrID; ?>">
                                                <input type="hidden" id="vmsCstmrClsfctn" value="<?php echo $vmsCstmrClsfctn; ?>">
                                                <input class="form-control" type="hidden" id="vmsCstmrSiteID" value="<?php echo $cstmrSiteID; ?>">
                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getCstmrSpplrForm(-1, 'Create/Edit <?php echo $fldLbl; ?>');" data-toggle="tooltip" title="Create New <?php echo $fldLbl; ?>">
                                                    <span class="glyphicon glyphicon-plus"></span>
                                                </label>
                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All Customers and Suppliers', 'gnrlVmsOrgID', '', 'vmsCstmrClsfctn', 'radio', true, '', 'vmsCstmrID', 'vmsCstmrNm', 'clear', 1, '');" data-toggle="tooltip" title="Existing Client/Vendor">
                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                <?php } ?>                                                              
                                <div class="form-group">
                                    <div class="col-md-4">
                                        <label style="margin-bottom:0px !important;">Remark / Narration:</label>
                                    </div>
                                    <div class="col-md-8">
                                        <div class="input-group">
                                            <textarea class="form-control rqrdFld input-group-addon" rows="<?php echo $descRowHght; ?>" id="vmsTrnsDesc" name="vmsTrnsDesc" <?php echo $mkRmrkReadOnly; ?> style="text-align:left !important;"><?php echo $vmsTrnsDesc; ?></textarea>
                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'VMS Transaction Classifications', '', '', '', 'radio', true, '', '', 'vmsTrnsDesc', 'clear', 1, '');">
                                                <span class="glyphicon glyphicon-th-list"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class = "col-md-4">
                                <div class = "form-group">
                                    <div class = "col-md-4">
                                        <label style="margin-bottom:0px !important;"><?php echo $slipNoLbl; ?></label>
                                    </div>
                                    <div class = "col-md-8">
                                        <input type="text" class="form-control <?php echo $slipNoLblRqrd; ?>" aria-label="..." id="vmsChequeNo" name="vmsChequeNo" value="<?php echo $vmsChequeNo; ?>" <?php echo $mkReadOnly; ?>>
                                    </div>
                                </div>                                
                                <div class = "form-group">
                                    <div class = "col-md-4">
                                        <label style="margin-bottom:0px !important;">Representative's Info:</label>
                                    </div>
                                    <div class = "col-md-8">
                                        <input type="text" class="form-control rqrdFld" aria-label="..." id="vmsTrnsPrsn" name="vmsTrnsPrsn" value="<?php echo $vmsTrnsPrsn; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?>>
                                    </div>
                                </div>
                                <div class = "form-group">
                                    <div class = "col-md-4">
                                        <label style="margin-bottom:0px !important;">Supervising Staff:</label>
                                    </div>
                                    <div class = "col-md-8">                                        
                                        <div class="input-group" style="width:100% !important;">
                                            <input type="text" class="form-control rqrdFld" aria-label="..." id="vmsOffctStaff" name="vmsOffctStaff" value="<?php echo $vmsOffctStaff; ?>" readonly="true" style="width:100% !important;">
                                            <input type="hidden" class="form-control" aria-label="..." id="vmsOffctStaffLocID" value="<?php echo $vmsOffctStaffLocID; ?>" style="width:100% !important;">                                                    
                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Active Persons', 'gnrlVmsOrgID', '', '', 'radio', true, '', 'vmsOffctStaffLocID', 'vmsOffctStaff', 'clear', 1, '');">
                                                <span class="glyphicon glyphicon-th-list"></span>
                                            </label>
                                        </div> 
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-4">
                                        <label style="margin-bottom:0px !important;color:blue;margin-top:5px;">Total Amount:</label>
                                    </div>
                                    <div class="col-md-8">
                                        <div class="input-group">                                    
                                            <input type="text" class="form-control" aria-label="..." id="vmsTrnsCrncyNm" name="vmsTrnsCrncyNm" value="<?php echo $crncyIDNm; ?>" readonly="true" style="width:40px;max-width:40px;">    
                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Currencies', '', '', '', 'radio', true, '<?php echo $crncyIDNm; ?>', 'vmsTrnsCrncyNm', '', 'clear', 0, '', function () {
                                                        reloadVMSTrnsLines(<?php echo $sbmtdVmsTrnsHdrID; ?>, '<?php echo $trnsType; ?>', 28);
                                                    });"> 
                                                <span class="glyphicon glyphicon-th-list"></span>
                                            </label> 
                                            <input class="form-control rqrdFld vmsTtlAmt" type="text" id="ttlVMSDocAmntVal" value="<?php
                                            echo number_format($vmsTrnsTtlAmnt, 2);
                                            ?>"  style="font-weight:bold;" onchange="fmtAsNumber('ttlVMSDocAmntVal');" <?php echo $mkReadOnly; ?>/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <fieldset class="">
                        <!--<legend class="basic_person_lg">Transactional Lines</legend>
                        <div class="row">
                            <div class="col-md-12">
                            </div>
                        </div>-->
                        <div class="row">
                            <div class="col-md-12">
                                <ul class="nav nav-tabs" style="margin-top:1px !important;">
                                    <?php if ($trnsType == $trnsTypes[12] || $trnsType == $trnsTypes[13]) {
                                        ?>
                                        <li class="active"><a data-toggle="tabajxdenoms" data-rhodata="" href="#cashItmsExpns" id="cashItmsExpnstab" style="padding: 3px 10px !important;">Breakdown of GL Transactions</a></li>
                                        <li><a data-toggle="tabajxdenoms" data-rhodata="" href="#cashItmsNotes" id="cashItmsNotestab" style="padding: 3px 10px !important;">Notes</a></li>
                                        <li><a data-toggle="tabajxdenoms" data-rhodata="" href="#cashItmsCoins" id="cashItmsCoinstab" style="padding: 3px 10px !important;">Coins</a></li>
                                    <?php } else { ?>
                                        <li class="active"><a data-toggle="tabajxdenoms" data-rhodata="" href="#cashItmsNotes" id="cashItmsNotestab" style="padding: 3px 10px !important;">Notes</a></li>
                                        <li><a data-toggle="tabajxdenoms" data-rhodata="" href="#cashItmsCoins" id="cashItmsCoinstab" style="padding: 3px 10px !important;">Coins</a></li>                                    
                                    <?php } ?>
                                </ul>  
                                <div class="custDiv" style="padding:0px !important;min-height: 40px !important;"> 
                                    <div class="tab-content" style="padding:5px !important;padding-top:7px !important;">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <?php
                                                $dsplyNwLine = "";
                                                $dsplyPymntInfo = "display:none;";
                                                $dsplyPymntCls1 = "col-md-12";
                                                $dsplyPymntCls2 = "";
                                                $dsplyPymntCls3 = "col-md-6";
                                                $dsplyPymntCls4 = "col-md-3";
                                                $srcVltCageDsply = "";
                                                $dstVltCageDsply = "";
                                                $srcCageColDsply = "display:none;";
                                                $dstCageColDsply = "";
                                                $dsplySrcItemState = "display:none;";
                                                $dsplyDstItemState = "display:none;";
                                                $dsplySrcBalance = "";
                                                $dsplyDstBalance = "";
                                                $isSrcDstCagesRqrd = "rqrdFld";
                                                $dsplyLnRemark = "";
                                                $dsplyTrays = "";
                                                $dsplyBundles = "";
                                                if ($trnsType == $trnsTypes[2] || $trnsType == $trnsTypes[3]) {
                                                    $srcCageColDsply = "";
                                                    $dstCageColDsply = "";
                                                    $dsplyDstBalance = "";
                                                    $dsplySrcBalance = "";
                                                } else if ($trnsType == $trnsTypes[8] || $trnsType == $trnsTypes[9] || $trnsType == $trnsTypes[6]) {
                                                    $dsplyNwLine = "display:none;";
                                                    $dsplyPymntInfo = "";
                                                    $dsplyPymntCls1 = "col-md-6";
                                                    $dsplyPymntCls2 = "col-md-6";
                                                    $dsplyPymntCls3 = "col-md-8";
                                                    $dsplyPymntCls4 = "col-md-4";
                                                    $srcCageColDsply = "display:none;";
                                                    $dstCageColDsply = "display:none;";
                                                    if ($trnsType == $trnsTypes[8]) {
                                                        $srcVltCageDsply = "";
                                                        $dsplySrcBalance = "";
                                                        $dstVltCageDsply = "display:none;";
                                                        $dsplyDstBalance = "display:none;";
                                                    } else if ($trnsType == $trnsTypes[9]) {
                                                        $dsplySrcBalance = "display:none;";
                                                        $srcVltCageDsply = "display:none;";
                                                        $dstVltCageDsply = "";
                                                        $dsplyDstBalance = "";
                                                    } else if ($trnsType == $trnsTypes[6]) {
                                                        $srcVltCageDsply = "display:none;";
                                                        $dstVltCageDsply = "";
                                                        $srcCageColDsply = "display:none;";
                                                        $dstCageColDsply = "";
                                                        $dsplySrcBalance = "display:none;";
                                                        $dsplyDstBalance = "";
                                                    }
                                                } else if ($trnsType == $trnsTypes[10]) {
                                                    $srcVltCageDsply = "display:none;";
                                                    $dstVltCageDsply = "";
                                                    $srcCageColDsply = "display:none;";
                                                    $dstCageColDsply = "";
                                                    $dsplySrcBalance = "display:none;";
                                                    $dsplyDstBalance = "";
                                                    /* $srcVltCageDsply = "";
                                                      $dstVltCageDsply = "";
                                                      $srcCageColDsply = "";
                                                      $dstCageColDsply = ""; */
                                                    $isSrcDstCagesRqrd = "rqrdFld";
                                                    $dsplySrcItemState = "";
                                                    $dsplyDstItemState = "";
                                                    $dsplyLnRemark = "display:none;";
                                                } else if ($trnsType == $trnsTypes[11] || $trnsType == $trnsTypes[0] || $trnsType == $trnsTypes[1] || $trnsType == $trnsTypes[3]) {
                                                    $srcVltCageDsply = "";
                                                    $dstVltCageDsply = "";
                                                    $srcCageColDsply = "";
                                                    $dstCageColDsply = "";
                                                    $isSrcDstCagesRqrd = "";
                                                } else if ($trnsType == $trnsTypes[4]) {
                                                    $srcVltCageDsply = "display:none;";
                                                    $dstVltCageDsply = "";
                                                    $srcCageColDsply = "display:none;";
                                                    $dstCageColDsply = "display:none;";
                                                    $dsplySrcBalance = "display:none;";
                                                    $dsplyDstBalance = "";
                                                } else if ($trnsType == $trnsTypes[5]) {
                                                    $srcVltCageDsply = "";
                                                    $dstVltCageDsply = "display:none;";
                                                    $srcCageColDsply = "display:none;";
                                                    $dstCageColDsply = "display:none;";
                                                    $dsplySrcBalance = "";
                                                    $dsplyDstBalance = "display:none;";
                                                } else if ($trnsType == $trnsTypes[7] || $trnsType == $trnsTypes[12]) {
                                                    $srcVltCageDsply = "";
                                                    $dstVltCageDsply = "display:none;";
                                                    $srcCageColDsply = "";
                                                    $dstCageColDsply = "display:none;";
                                                    $dsplySrcBalance = "";
                                                    $dsplyDstBalance = "display:none;";
                                                    if ($trnsType == $trnsTypes[12]) {
                                                        $dsplyTrays = "display:none;";
                                                        $dsplyBundles = "display:none;";
                                                    }
                                                } else if ($trnsType == $trnsTypes[13]) {
                                                    $srcVltCageDsply = "display:none;";
                                                    $dstVltCageDsply = "";
                                                    $srcCageColDsply = "display:none;";
                                                    $dstCageColDsply = "";
                                                    $dsplySrcBalance = "display:none;";
                                                    $dsplyDstBalance = "";
                                                    $dsplyTrays = "display:none;";
                                                    $dsplyBundles = "display:none;";
                                                }
                                                $nwRowHtml2 = urlencode("<tr id=\"oneVmsExpnsTrnsRow__WWW123WWW\" onclick=\"$('#allOtherInputData99').val($('#oneVmsTrnsLnsTable tr').index(this));\">"
                                                        . "<td class=\"lovtd\"><span class=\"normaltd\">New</span></td>"
                                                        . "<td class=\"lovtd\"  style=\"\">
                                                                            <input type=\"text\" class=\"form-control rqrdFld vmsExpDesc\" aria-label=\"...\" id=\"oneVmsExpnsTrnsRow_WWW123WWW_LineDesc\" name=\"oneVmsExpnsTrnsRow_WWW123WWW_LineDesc\" value=\"\" style=\"width:100% !important;\" onkeypress=\"gnrlFldKeyPress(event, 'oneVmsExpnsTrnsRow_WWW123WWW_ExchgRate', 'oneVmsExpnsTrnsLnsTable', 'vmsExpDesc');\">                                                    
                                                                        </td>                                                 
                                                                        <td class=\"lovtd\">
                                                                            <div class=\"\" style=\"width:100% !important;\">
                                                                                <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsExpnsTrnsRow_WWW123WWW_TrnsCurNm\" name=\"oneVmsExpnsTrnsRow_WWW123WWW_TrnsCurNm\" value=\"" . $crncyIDNm . "\" readonly=\"true\" style=\"width:100% !important;\">
                                                                                <label class=\"btn btn-primary btn-file\" onclick=\"getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Currencies', '', '', '', 'radio', true, '', 'oneVmsExpnsTrnsRow_WWW123WWW_TrnsCurNm', '', 'clear', 1, '', function () {
                                                                                            $('#oneVmsExpnsTrnsRow_WWW123WWW_TrnsCurNm1').html($('#oneVmsExpnsTrnsRow_WWW123WWW_TrnsCurNm').val());
                                                                                        });\">
                                                                                    <span class=\"\" id=\"oneVmsExpnsTrnsRow_WWW123WWW_TrnsCurNm1\">" . $crncyIDNm . "</span>
                                                                                </label>
                                                                            </div>                                              
                                                                        </td>
                                                                        <td class=\"lovtd\">
                                                                            <input type=\"text\" class=\"form-control rqrdFld vmsExpTtl\" aria-label=\"...\" id=\"oneVmsExpnsTrnsRow_WWW123WWW_TtlVal\" name=\"oneVmsExpnsTrnsRow_WWW123WWW_TtlVal\" value=\"0.00\" onkeypress=\"gnrlFldKeyPress(event, 'oneVmsExpnsTrnsRow_WWW123WWW_TtlVal', 'oneVmsExpnsTrnsLnsTable', 'vmsExpTtl');\" style=\"width:100% !important;text-align: right;\" onchange=\"calcAllExpnsTrnsTtl();\">                                                    
                                                                        </td>
                                                                        <td class=\"lovtd\">
                                                                            <div class=\"input-group\" style=\"width:100% !important;\">
                                                                                <input type=\"text\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsExpnsTrnsRow_WWW123WWW_AccountNm\" name=\"oneVmsExpnsTrnsRow_WWW123WWW_AccountNm\" value=\"\" readonly=\"true\" style=\"width:100% !important;\">
                                                                                <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsExpnsTrnsRow_WWW123WWW_AccountID\" value=\"-1\" style=\"width:100% !important;\">  
                                                                                <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsExpnsTrnsRow_WWW123WWW_TrnsLnID\" value=\"-1\" style=\"width:100% !important;\">                                                      
                                                                                <label class=\"btn btn-primary btn-file input-group-addon\" onclick=\"getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Cheque Clearing Accounts', 'gnrlVmsOrgID', '', '', 'radio', true, '', 'oneVmsExpnsTrnsRow_WWW123WWW_AccountID', 'oneVmsExpnsTrnsRow_WWW123WWW_AccountNm', 'clear', 1, '', function () {
                                                                                            });\">
                                                                                    <span class=\"glyphicon glyphicon-th-list\"></span>
                                                                                </label>
                                                                            </div>                                               
                                                                        </td> 
                                                                        <td class=\"lovtd\" style=\"\">
                                                                            <input type=\"text\" class=\"form-control rqrdFld vmsExpRt\" aria-label=\"...\" id=\"oneVmsExpnsTrnsRow_WWW123WWW_ExchgRate\" name=\"oneVmsExpnsTrnsRow_WWW123WWW_ExchgRate\" value=\"1.0000\" onkeypress=\"gnrlFldKeyPress(event, 'oneVmsExpnsTrnsRow_WWW123WWW_ExchgRate', 'oneVmsExpnsTrnsLnsTable', 'vmsExpRt');\" style=\"width:100% !important;text-align: right;\" onchange=\"calcAllExpnsTrnsTtl();\">                                                    
                                                                        </td> 
                                                                        <td class=\"lovtd\">
                                                                            <button type=\"button\" class=\"btn btn-default\" style=\"margin: 0px !important;padding:0px 3px 2px 4px !important;\" onclick=\"delVmsExpnsTrnsLine('oneVmsExpnsTrnsRow__WWW123WWW');\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Delete GL Trns. Line\">
                                                                                <img src=\"cmn_images/no.png\" style=\"height:15px; width:auto; position: relative; vertical-align: middle;\">
                                                                            </button>
                                                                        </td>
                                                                    </tr>");
                                                $nwRowHtml1 = urlencode("<tr id=\"oneVmsTrnsRow__WWW123WWW\" onclick=\"$('#allOtherInputData99').val($('#oneVmsTrnsLnsTable tr').index(this));\">"
                                                        . "<!--<td class=\"lovtd\"><span class=\"normaltd\">New</span></td>-->"
                                                        . "<td class=\"lovtd\">
                                                <div class=\"input-group\" style=\"width:100% !important;\">
                                                    <input type=\"text\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_ItemNm\" name=\"oneVmsTrnsRow_WWW123WWW_ItemNm\" value=\"\" readonly=\"true\" style=\"width:100% !important;\">
                                                    <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_ItmID\" value=\"-1\" style=\"width:100% !important;\">
                                                    <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_BaseUoMID\" value=\"-1\" style=\"width:100% !important;\">     
                                                    <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_TrnsLnID\" value=\"-1\" style=\"width:100% !important;\">                                              
                                                    <label class=\"btn btn-primary btn-file input-group-addon\" onclick=\"getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsRow_WWW123WWW_ItmID', 'oneVmsTrnsRow_WWW123WWW_ItemNm', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsRow__WWW123WWW');
                                                                });\">
                                                        <span class=\"glyphicon glyphicon-th-list\"></span>
                                                    </label>
                                                </div>                                              
                                            </td>
                                            <td class=\"lovtd\" style=\"" . $srcCageColDsply . "\">
                                                <div class=\"input-group\" style=\"width:100% !important;\">
                                                    <input type=\"text\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_SrcCageNm\" name=\"oneVmsTrnsRow_WWW123WWW_SrcCageNm\" value=\"\" readonly=\"true\" style=\"width:100% !important;\">
                                                    <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_SrcCageID\" value=\"-1\" style=\"width:100% !important;\">                                              
                                                    <label class=\"btn btn-primary btn-file input-group-addon\" onclick=\"getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsRow_WWW123WWW_SrcCageID', 'oneVmsTrnsRow_WWW123WWW_SrcCageNm', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsRow__WWW123WWW');
                                                                });\">
                                                        <span class=\"glyphicon glyphicon-th-list\"></span>
                                                    </label>
                                                </div> 
                                            </td> 
                                            <td class=\"lovtd\" style=\"" . $dstCageColDsply . "\">
                                                <div class=\"input-group\" style=\"width:100% !important;\">
                                                    <input type=\"text\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_DstCageNm\" name=\"oneVmsTrnsRow_WWW123WWW_DstCageNm\" value=\"\" readonly=\"true\" style=\"width:100% !important;\">
                                                    <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_DstCageID\" value=\"-1\" style=\"width:100% !important;\">                                              
                                                    <label class=\"btn btn-primary btn-file input-group-addon\" onclick=\"getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsRow_WWW123WWW_DstCageID', 'oneVmsTrnsRow_WWW123WWW_DstCageNm', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsRow__WWW123WWW');
                                                                });\">
                                                        <span class=\"glyphicon glyphicon-th-list\"></span>
                                                    </label>
                                                </div> 
                                            </td>                                               
                                            <td class=\"lovtd\" style=\"\">
                                                <input type=\"text\" class=\"form-control rqrdFld\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_LineDesc\" name=\"oneVmsTrnsRow_WWW123WWW_LineDesc\" value=\"\" style=\"width:100% !important;\">                                                    
                                            </td>
                                            <td class=\"lovtd\" style=\"" . $dsplyTrays . "\">
                                                <input type=\"text\" class=\"form-control vmsCbTray\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_Tray\" name=\"oneVmsTrnsRow_WWW123WWW_Tray\" value=\"0\"  onchange=\"calcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow__WWW123WWW');\" onkeypress=\"vmsCbTrayKeyPress(event, 'oneVmsTrnsRow__WWW123WWW');\" style=\"width:100% !important;text-align: center;\" $mkReadOnly>                                            
                                            </td>
                                            <td class=\"lovtd\" style=\"" . $dsplyBundles . "\">
                                                <input type=\"text\" class=\"form-control vmsCbBndl\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_Bndl\" name=\"oneVmsTrnsRow_WWW123WWW_Bndl\" value=\"0\"  onchange=\"calcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow__WWW123WWW');\" onkeypress=\"vmsCbBndlKeyPress(event, 'oneVmsTrnsRow__WWW123WWW');\" style=\"width:100% !important;text-align: center;\" $mkReadOnly>                                            
                                            </td>
                                            <td class=\"lovtd\">
                                                <button type=\"button\" class=\"btn btn-default\" style=\"margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;\" onclick=\"getOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsRow__WWW123WWW');\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"View QTY Breakdown\">" . $itmBaseUomNm . "</button>
                                            </td>
                                            <td class=\"lovtd\">
                                                <input type=\"hidden\" class=\"form-control vmsCbQty\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_Qty\" name=\"oneVmsTrnsRow_WWW123WWW_Qty\" value=\"0.00\" onchange=\"calcCshBrkdwnRowVal('oneVmsTrnsRow__WWW123WWW');\" onkeypress=\"vmsTrnsFormKeyPress(event, 'oneVmsTrnsRow__WWW123WWW');\" style=\"width:100% !important;text-align: right;\" $mkReadOnly>     
                                                <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_UntVal\" name=\"oneVmsTrnsRow_WWW123WWW_UntVal\" value=\"1.00\" style=\"width:100% !important;\" readonly=\"true\">                                                                                            
                                                <input type=\"text\" class=\"form-control vmsCbTtl\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_TtlVal\" name=\"oneVmsTrnsRow_WWW123WWW_TtlVal\" value=\"0.00\" onchange=\"calcCshBrkdwnTtlVal('oneVmsTrnsRow__WWW123WWW');\" onkeypress=\"vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsRow__WWW123WWW');\" style=\"width:100% !important;text-align: right;\" $mkReadOnly>                                                    
                                            </td>
                                            <td class=\"lovtd\" style=\"" . $dsplyPymntInfo . "\">
                                                <input type=\"text\" class=\"form-control vmsFncCrncy\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_PymntCrncyRate\" name=\"oneVmsTrnsRow_WWW123WWW_PymntCrncyRate\" value=\"1.00\" onchange=\"calcPymtAmntTtl('oneVmsTrnsRow__WWW123WWW');\" onkeypress=\"vmsTrnsFormFnCrncyKeyPress(event, 'oneVmsTrnsRow__WWW123WWW');\" style=\"width:100% !important;text-align: right;\" $mkReadOnly>                                                    
                                            </td>
                                                <td class=\"lovtd\" style=\"" . $dsplySrcBalance . "\">
                                                    <input type=\"text\" class=\"form-control vmsCbRnngBal\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_SrcRnngBal\" name=\"oneVmsTrnsRow_WWW123WWW_SrcRnngBal\" value=\"0.00\" style=\"width:100% !important;text-align: right;font-weight:bold;color:blue;\" readonly=\"true\">                                                            
                                                </td> 
                                                <td class=\"lovtd\" style=\"" . $dsplyDstBalance . "\">
                                                    <input type=\"text\" class=\"form-control vmsCbRnngBal\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_DstRnngBal\" name=\"oneVmsTrnsRow_WWW123WWW_DstRnngBal\" value=\"0.00\" style=\"width:100% !important;text-align: right;font-weight:bold;color:blue;\" readonly=\"true\">
                                                </td>                                            
                                            <td class=\"lovtd\" style=\"" . $dsplySrcItemState . "\">
                                                <div class=\"input-group\" style=\"width:100% !important;\">
                                                    <input type=\"text\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_SrcItemState\" name=\"oneVmsTrnsRow_WWW123WWW_SrcItemState\" value=\"$dfltSrcItemState\" readonly=\"true\" style=\"width:100% !important;\">
                                                    <label class=\"btn btn-primary btn-file input-group-addon\" onclick=\"getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsRow_WWW123WWW_SrcItemState', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsRow__WWW123WWW');
                                                                });\">
                                                        <span class=\"glyphicon glyphicon-th-list\"></span>
                                                    </label>
                                                </div> 
                                            </td>                                             
                                            <td class=\"lovtd\" style=\"" . $dsplyDstItemState . "\">
                                                <div class=\"input-group\" style=\"width:100% !important;\">
                                                    <input type=\"text\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_DstItemState\" name=\"oneVmsTrnsRow_WWW123WWW_DstItemState\" value=\"$dfltDstItemState\" readonly=\"true\" style=\"width:100% !important;\">
                                                    <label class=\"btn btn-primary btn-file input-group-addon\" onclick=\"getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsRow_WWW123WWW_DstItemState', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsRow__WWW123WWW');
                                                                });\">
                                                        <span class=\"glyphicon glyphicon-th-list\"></span>
                                                    </label>
                                                </div> 
                                            </td> 
                                            <td class=\"lovtd\">
                                                <button type=\"button\" class=\"btn btn-default\" style=\"margin: 0px !important;padding:0px 3px 2px 4px !important;\" onclick=\"delVmsTrnsLine('oneVmsTrnsRow__WWW123WWW');\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Delete Trns. Line\">
                                                    <img src=\"cmn_images/no.png\" style=\"height:15px; width:auto; position: relative; vertical-align: middle;\">
                                                </button>
                                            </td>
                                        </tr>");
                                                $nwRowHtml = urlencode("<tr id=\"oneVmsTrnsRow__WWW123WWW\" onclick=\"$('#allOtherInputData99').val($('#oneVmsTrnsLnsTable tr').index(this));\">"
                                                        . "<!--<td class=\"lovtd\"><span class=\"normaltd\">New</span></td>-->"
                                                        . "<td class=\"lovtd\">
                                                <div class=\"input-group\" style=\"width:100% !important;\">
                                                    <input type=\"text\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_ItemNm\" name=\"oneVmsTrnsRow_WWW123WWW_ItemNm\" value=\"\" readonly=\"true\" style=\"width:100% !important;\">
                                                    <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_ItmID\" value=\"-1\" style=\"width:100% !important;\">
                                                    <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_BaseUoMID\" value=\"-1\" style=\"width:100% !important;\">     
                                                    <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_TrnsLnID\" value=\"-1\" style=\"width:100% !important;\">                                              
                                                    <label class=\"btn btn-primary btn-file input-group-addon\" onclick=\"getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsRow_WWW123WWW_ItmID', 'oneVmsTrnsRow_WWW123WWW_ItemNm', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsRow__WWW123WWW');
                                                                });\">
                                                        <span class=\"glyphicon glyphicon-th-list\"></span>
                                                    </label>
                                                </div>                                              
                                            </td>
                                            <td class=\"lovtd\" style=\"" . $srcCageColDsply . "\">
                                                <div class=\"input-group\" style=\"width:100% !important;\">
                                                    <input type=\"text\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_SrcCageNm\" name=\"oneVmsTrnsRow_WWW123WWW_SrcCageNm\" value=\"\" readonly=\"true\" style=\"width:100% !important;\">
                                                    <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_SrcCageID\" value=\"-1\" style=\"width:100% !important;\">                                              
                                                    <label class=\"btn btn-primary btn-file input-group-addon\" onclick=\"getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsRow_WWW123WWW_SrcCageID', 'oneVmsTrnsRow_WWW123WWW_SrcCageNm', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsRow__WWW123WWW');
                                                                });\">
                                                        <span class=\"glyphicon glyphicon-th-list\"></span>
                                                    </label>
                                                </div> 
                                            </td> 
                                            <td class=\"lovtd\" style=\"" . $dstCageColDsply . "\">
                                                <div class=\"input-group\" style=\"width:100% !important;\">
                                                    <input type=\"text\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_DstCageNm\" name=\"oneVmsTrnsRow_WWW123WWW_DstCageNm\" value=\"\" readonly=\"true\" style=\"width:100% !important;\">
                                                    <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_DstCageID\" value=\"-1\" style=\"width:100% !important;\">                                              
                                                    <label class=\"btn btn-primary btn-file input-group-addon\" onclick=\"getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsRow_WWW123WWW_DstCageID', 'oneVmsTrnsRow_WWW123WWW_DstCageNm', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsRow__WWW123WWW');
                                                                });\">
                                                        <span class=\"glyphicon glyphicon-th-list\"></span>
                                                    </label>
                                                </div> 
                                            </td>                                               
                                                <td class=\"lovtd\" style=\"\">
                                                    <input type=\"text\" class=\"form-control rqrdFld\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_LineDesc\" name=\"oneVmsTrnsRow_WWW123WWW_LineDesc\" value=\"\" style=\"width:100% !important;\">                                                    
                                                </td>
                                            <td class=\"lovtd\">
                                                <input type=\"text\" class=\"form-control vmsCbQty\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_Qty\" name=\"oneVmsTrnsRow_WWW123WWW_Qty\" value=\"0.00\" onchange=\"calcCshBrkdwnRowVal('oneVmsTrnsRow__WWW123WWW');\" onkeypress=\"vmsTrnsFormKeyPress(event, 'oneVmsTrnsRow__WWW123WWW');\" style=\"width:100% !important;text-align: right;\" $mkReadOnly>     
                                                <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_UntVal\" name=\"oneVmsTrnsRow_WWW123WWW_UntVal\" value=\"1.00\" style=\"width:100% !important;\" readonly=\"true\">                                                
                                            </td>
                                            <td class=\"lovtd\">
                                                <button type=\"button\" class=\"btn btn-default\" style=\"margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;\" onclick=\"getOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsRow__WWW123WWW');\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"View QTY Breakdown\">" . $itmBaseUomNm . "</button>
                                            </td>
                                            <td class=\"lovtd\">
                                                <input type=\"text\" class=\"form-control vmsCbTtl\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_TtlVal\" name=\"oneVmsTrnsRow_WWW123WWW_TtlVal\" value=\"0.00\" onchange=\"calcCshBrkdwnTtlVal('oneVmsTrnsRow__WWW123WWW');\" onkeypress=\"vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsRow__WWW123WWW');\" style=\"width:100% !important;text-align: right;\" $mkReadOnly>                                                    
                                            </td>
                                            <td class=\"lovtd\" style=\"" . $dsplyPymntInfo . "\">
                                                <input type=\"text\" class=\"form-control vmsFncCrncy\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_PymntCrncyRate\" name=\"oneVmsTrnsRow_WWW123WWW_PymntCrncyRate\" value=\"1.00\" onchange=\"calcPymtAmntTtl('oneVmsTrnsRow__WWW123WWW');\" onkeypress=\"vmsTrnsFormFnCrncyKeyPress(event, 'oneVmsTrnsRow__WWW123WWW');\" style=\"width:100% !important;text-align: right;\" $mkReadOnly>                                                    
                                            </td>
                                                <td class=\"lovtd\" style=\"" . $dsplySrcBalance . "\">
                                                    <input type=\"text\" class=\"form-control vmsCbRnngBal\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_SrcRnngBal\" name=\"oneVmsTrnsRow_WWW123WWW_SrcRnngBal\" value=\"0.00\" style=\"width:100% !important;text-align: right;font-weight:bold;color:blue;\" readonly=\"true\">                                                            
                                                </td> 
                                                <td class=\"lovtd\" style=\"" . $dsplyDstBalance . "\">
                                                    <input type=\"text\" class=\"form-control vmsCbRnngBal\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_DstRnngBal\" name=\"oneVmsTrnsRow_WWW123WWW_DstRnngBal\" value=\"0.00\" style=\"width:100% !important;text-align: right;font-weight:bold;color:blue;\" readonly=\"true\">
                                                </td>                                            
                                            <td class=\"lovtd\" style=\"" . $dsplySrcItemState . "\">
                                                <div class=\"input-group\" style=\"width:100% !important;\">
                                                    <input type=\"text\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_SrcItemState\" name=\"oneVmsTrnsRow_WWW123WWW_SrcItemState\" value=\"$dfltSrcItemState\" readonly=\"true\" style=\"width:100% !important;\">
                                                    <label class=\"btn btn-primary btn-file input-group-addon\" onclick=\"getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsRow_WWW123WWW_SrcItemState', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsRow__WWW123WWW');
                                                                });\">
                                                        <span class=\"glyphicon glyphicon-th-list\"></span>
                                                    </label>
                                                </div> 
                                            </td>                                             
                                            <td class=\"lovtd\" style=\"" . $dsplyDstItemState . "\">
                                                <div class=\"input-group\" style=\"width:100% !important;\">
                                                    <input type=\"text\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_DstItemState\" name=\"oneVmsTrnsRow_WWW123WWW_DstItemState\" value=\"$dfltDstItemState\" readonly=\"true\" style=\"width:100% !important;\">
                                                    <label class=\"btn btn-primary btn-file input-group-addon\" onclick=\"getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsRow_WWW123WWW_DstItemState', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsRow__WWW123WWW');
                                                                });\">
                                                        <span class=\"glyphicon glyphicon-th-list\"></span>
                                                    </label>
                                                </div> 
                                            </td> 
                                            <td class=\"lovtd\">
                                                <button type=\"button\" class=\"btn btn-default\" style=\"margin: 0px !important;padding:0px 3px 2px 4px !important;\" onclick=\"delVmsTrnsLine('oneVmsTrnsRow__WWW123WWW');\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Delete Trns. Line\">
                                                    <img src=\"cmn_images/no.png\" style=\"height:15px; width:auto; position: relative; vertical-align: middle;\">
                                                </button>
                                            </td>
                                        </tr>");
                                                $cashExpnsCls = "hideNotice";
                                                $cashItmsNotesCls = "active";
                                                $ttlPrce = 0;
                                                if ($trnsType == $trnsTypes[12] || $trnsType == $trnsTypes[13]) {
                                                    $cashItmsNotesCls = "hideNotice";
                                                    $cashExpnsCls = "active";
                                                }
                                                ?> 
                                                <div class="<?php echo $dsplyPymntCls3; ?>" style="padding:0px 0px 0px 0px !important;">
                                                    <div class="<?php echo $dsplyPymntCls1; ?>" style="padding:0px 0px 0px 0px !important;float:left;">
                                                        <button id="addNwExpnsBtn" type="button" class="btn btn-default <?php echo $cashExpnsCls; ?>" style="margin-bottom: 5px;<?php echo $dsplyNwLine; ?>" onclick="insertNewVmsExpnsTrnsRows('oneVmsExpnsTrnsLnsTable', 0, '<?php echo $nwRowHtml2; ?>');" data-toggle="tooltip" data-placement="bottom" title = "New GL Transaction Line">
                                                            <img src="cmn_images/add1-64.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                        </button>
                                                        <button id="addNwNoteBtn" type="button" class="btn btn-default <?php echo $cashItmsNotesCls; ?>" style="margin-bottom: 5px;<?php echo $dsplyNwLine; ?>" onclick="insertNewVMSTrnsRows('oneVmsTrnsLnsTable', 0, '<?php echo $nwRowHtml1; ?>');" data-toggle="tooltip" data-placement="bottom" title = "New Transaction Line">
                                                            <img src="cmn_images/add1-64.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                        </button>
                                                        <button id="addNwCoinBtn" type="button" class="btn btn-default hideNotice" style="margin-bottom: 5px;<?php echo $dsplyNwLine; ?>" onclick="insertNewVMSTrnsRows('oneVmsTrnsCoinsLnsTable', 0, '<?php echo $nwRowHtml; ?>');" data-toggle="tooltip" data-placement="bottom" title = "New Transaction Line">
                                                            <img src="cmn_images/add1-64.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                        </button>
                                                        <div id="btnGrpForNotes" class="btn-group <?php echo $cashItmsNotesCls; ?>" style="margin-bottom: 5px;<?php echo $dsplyNwLine; ?>">
                                                            <button type="button" class="btn btn-default btn-sm" style="height: 30px !important;" onclick="" data-toggle="tooltip" data-placement="bottom" title = "Select Denomination">
                                                                Notes
                                                            </button>
                                                            <button class="btn btn-info dropdown-toggle btn-sm" style="height:30px !important;" type="button" data-toggle="dropdown">
                                                                <span class="caret"></span>
                                                            </button>
                                                            <input type="hidden" id="chooseNote"/>
                                                            <ul class="dropdown-menu" role="menu" style="margin-left: 15px !important;">
                                                                <?php
                                                                $denomRslt = get_All_Crncies($crncyID, "Note");
                                                                while ($rowDnm = loc_db_fetch_array($denomRslt)) {
                                                                    $denomNm = $rowDnm[6];
                                                                    $itmCatgry = $rowDnm[9];
                                                                    $itmID = (int) $rowDnm[0];
                                                                    ?>  
                                                                    <li>
                                                                        <a href="javascript:reloadVMSTrnsLines(<?php echo $sbmtdVmsTrnsHdrID; ?>, '<?php echo $trnsType; ?>', 28, <?php echo $itmID; ?>, '<?php echo $itmCatgry; ?>');">
                                                                            <img src="cmn_images/cheque.png" style="left: 0.5%; padding-right: 5px; height:20px; width:auto; position: relative; vertical-align: middle;">
                                                                            <?php echo $denomNm; ?>
                                                                        </a>
                                                                    </li>
                                                                <?php } ?>
                                                            </ul>
                                                        </div>
                                                        <div id="btnGrpForCoins" class="btn-group hideNotice" style="margin-bottom: 5px;<?php echo $dsplyNwLine; ?>">
                                                            <button type="button" class="btn btn-default btn-sm" style="height: 30px !important;" onclick="" data-toggle="tooltip" data-placement="bottom" title = "Select Denomination">
                                                                Coins
                                                            </button>
                                                            <button class="btn btn-info dropdown-toggle btn-sm" style="height:30px !important;" type="button" data-toggle="dropdown">
                                                                <span class="caret"></span>
                                                            </button>
                                                            <input type="hidden" id="chooseCoin"/>
                                                            <ul class="dropdown-menu" role="menu" style="margin-left: 15px !important;">
                                                                <?php
                                                                $denomRslt = get_All_Crncies($crncyID, "Coin");
                                                                while ($rowDnm = loc_db_fetch_array($denomRslt)) {
                                                                    $denomNm = $rowDnm[6];
                                                                    $itmCatgry = $rowDnm[9];
                                                                    $itmID = (int) $rowDnm[0];
                                                                    ?>  
                                                                    <li>
                                                                        <a href="javascript:reloadVMSTrnsLines(<?php echo $sbmtdVmsTrnsHdrID; ?>, '<?php echo $trnsType; ?>', 28, <?php echo $itmID; ?>, '<?php echo $itmCatgry; ?>');">
                                                                            <img src="cmn_images/cheque.png" style="left: 0.5%; padding-right: 5px; height:20px; width:auto; position: relative; vertical-align: middle;">
                                                                            <?php echo $denomNm; ?>
                                                                        </a>
                                                                    </li>
                                                                <?php } ?>
                                                            </ul>
                                                        </div>                                      
                                                        <button type="button" class="btn btn-default" style="margin-bottom: 5px;" onclick="getOneVmsDocsForm(<?php echo $sbmtdVmsTrnsHdrID; ?>, '<?php echo $trnsType; ?>', 24);" data-toggle="tooltip" data-placement="bottom" title = "Attached Documents">
                                                            <img src="cmn_images/adjunto.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                        </button>
                                                        <!--<button type="button" class="btn btn-default" style="margin-bottom: 5px;" onclick="clearVMSTrnsRows('oneVmsTrnsLnsTable');" data-toggle="tooltip" data-placement="bottom" title = "Clear Lines">
                                                            <img src="cmn_images/undo_256.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                        </button>-->
                                                        <button type="button" class="btn btn-default" style="margin-bottom: 5px;" onclick="reloadVMSTrnsLines(<?php echo $sbmtdVmsTrnsHdrID; ?>, '<?php echo $trnsType; ?>', 28);" data-toggle="tooltip" data-placement="bottom" title = "Load Defaults">
                                                            <img src="cmn_images/98.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                        </button>
                                                        <button type="button" class="btn btn-default btn-sm" style="height:30px;min-height:30px;margin-bottom: 5px;">
                                                            <span style="font-weight:bold;color:black;">Total: </span>
                                                            <span style="color:red;font-weight: bold;" id="myCptrdValsTtlBtn"><?php echo $crncyIDNm; ?> 
                                                                <?php
                                                                echo number_format($vmsTrnsTtlAmnt, 2);
                                                                ?>
                                                            </span>
                                                            <input type="hidden" id="myCptrdValsTtlVal" value="<?php echo $vmsTrnsTtlAmnt; ?>">
                                                        </button>
                                                    </div>                                    
                                                    <div class="<?php echo $dsplyPymntCls2; ?>" style="padding:0px 0px 0px 0px !important;<?php echo $dsplyPymntInfo; ?>">
                                                        <div class="col-md-9" style="">
                                                            <div class = "form-group">
                                                                <div class="input-group" style="height:30px;min-height:30px;margin-bottom: 5px;">
                                                                    <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Currencies', '', '', '', 'radio', true, '<?php echo $vmsPymtCrncyNm; ?>', 'vmsPymtCrncyNm', '', 'clear', 0, '');">
                                                                        <span style="font-weight:bold;color:black;">Payment: </span>
                                                                    </label>
                                                                    <input type="text" class="form-control input-group-addon" aria-label="..." id="vmsPymtCrncyNm" name="vmsPymtCrncyNm" value="<?php echo $vmsPymtCrncyNm; ?>" readonly="true" style="width:40px;max-width:40px;">    
                                                                    <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Currencies', '', '', '', 'radio', true, '<?php echo $vmsPymtCrncyNm; ?>', 'vmsPymtCrncyNm', '', 'clear', 0, '');"> 
                                                                        <span class="glyphicon glyphicon-th-list"></span>
                                                                    </label>
                                                                    <input type="text" class="form-control input-group-addon" aria-label="..." id="myPymntValsTtlBtn" name="myPymntValsTtlBtn" value="<?php
                                                                    echo number_format($vmsPymtTtlAmnt, 2);
                                                                    ?>" readonly="true" style="width:100%;color:red;font-weight: bold;text-align: left;">                                                        
                                                                    <input type="hidden" id="myPymntValsTtlVal" value="<?php echo $vmsPymtTtlAmnt; ?>">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-3" style="padding:0px 0px 0px 0px !important;">
                                                            <button type="button" class="btn btn-default" style="margin-bottom: 5px;" onclick="getVMSTrnsPymtForm('<?php echo $trnsType; ?>', 32);" data-toggle="tooltip" data-placement="bottom" title = "Payment Form">
                                                                <img src="cmn_images/payment_256.png" style="height:20px; width:auto; position: relative; vertical-align: middle;"> Process
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>                                
                                                <div class="<?php echo $dsplyPymntCls4; ?>">
                                                    <div class="form-group form-group-sm" style="<?php echo $srcVltCageDsply; ?>">
                                                        <div class = "col-md-2" style="padding:0px 0px 0px 0px !important;">
                                                            <label style="margin-bottom:0px !important;padding:2px 0px 0px 5px !important;">From:&nbsp;</label>
                                                        </div>
                                                        <div class = "col-md-5" style="padding:0px 0px 0px 0px !important;">
                                                            <div class="input-group">
                                                                <input type="text" class="form-control <?php echo $isSrcDstCagesRqrd; ?>" aria-label="..." id="vmsDfltSrcVlt" name="vmsDfltSrcVlt" value="<?php echo $srcVltNm; ?>" readonly="true">
                                                                <input type="hidden" id="vmsDfltSrcVltID" value="<?php echo $srcVltID; ?>">
                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'VMS Vaults', 'gnrlVmsOrgID', '', '', 'radio', true, '<?php echo $srcVltID; ?>', 'vmsDfltSrcVltID', 'vmsDfltSrcVlt', 'clear', 1, '');">
                                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                                </label>
                                                            </div>
                                                        </div>
                                                        <div class = "col-md-5" style="padding:0px 0px 0px 0px !important;">
                                                            <div class="input-group">
                                                                <input type="text" class="form-control <?php echo $isSrcDstCagesRqrd; ?>" aria-label="..." id="vmsDfltSrcCage" name="vmsDfltSrcCage" value="<?php echo $srcCageNm; ?>" readonly="true">
                                                                <input type="hidden" id="vmsDfltSrcCageID" value="<?php echo $srcCageID; ?>">
                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'VMS Vault Cages', 'vmsDfltSrcVltID', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $srcCageID; ?>', 'vmsDfltSrcCageID', 'vmsDfltSrcCage', 'clear', 1, '', function () {
                                                                            reloadVMSTrnsLines(<?php echo $sbmtdVmsTrnsHdrID; ?>, '<?php echo $trnsType; ?>', 28);
                                                                        });">
                                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                                </label>
                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getDynmcCageFnPos('vmsDfltSrcCageID', 7);">
                                                                    <span class="glyphicon glyphicon-info-sign"></span>
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>                               
                                                <div class="<?php echo $dsplyPymntCls4; ?>">
                                                    <div class="form-group form-group-sm" style="<?php echo $dstVltCageDsply; ?>">
                                                        <div class = "col-md-2" style="padding:0px 0px 0px 0px !important;">
                                                            <label style="margin-bottom:0px !important;padding:2px 0px 0px 5px !important;">To:&nbsp;</label>
                                                        </div>
                                                        <div class = "col-md-5" style="padding:0px 0px 0px 0px !important;">
                                                            <div class="input-group">
                                                                <input type="text" class="form-control <?php echo $isSrcDstCagesRqrd; ?>" aria-label="..." id="vmsDfltDestVlt" name="vmsDfltDestVlt" value="<?php echo $destVltNm; ?>" readonly="true">
                                                                <input type="hidden" id="vmsDfltDestVltID" value="<?php echo $destVltID; ?>">
                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'VMS Vaults', 'gnrlVmsOrgID', '', '', 'radio', true, '<?php echo $destVltID; ?>', 'vmsDfltDestVltID', 'vmsDfltDestVlt', 'clear', 1, '');">
                                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                                </label>
                                                            </div>
                                                        </div>
                                                        <div class = "col-md-5" style="padding:0px 0px 0px 0px !important;">
                                                            <div class="input-group">
                                                                <input type="text" class="form-control <?php echo $isSrcDstCagesRqrd; ?>" aria-label="..." id="vmsDfltDestCage" name="vmsDfltDestCage" value="<?php echo $destCageNm; ?>" readonly="true">
                                                                <input type="hidden" id="vmsDfltDestCageID" value="<?php echo $destCageID; ?>">
                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'VMS Vault Cages', 'vmsDfltDestVltID', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $destCageID; ?>', 'vmsDfltDestCageID', 'vmsDfltDestCage', 'clear', 1, '', function () {
                                                                            reloadVMSTrnsLines(<?php echo $sbmtdVmsTrnsHdrID; ?>, '<?php echo $trnsType; ?>', 28);
                                                                        });">
                                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                                </label>
                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getDynmcCageFnPos('vmsDfltDestCageID', 7);">
                                                                    <span class="glyphicon glyphicon-info-sign"></span>
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="custDiv" style="padding:0px !important;min-height: 40px !important;" id="oneVmsTrnsLnsTblSctn"> 
                                    <div class="tab-content" style="padding:5px !important;padding-top:7px !important;">                                
                                        <div id="cashItmsExpns" class="tab-pane fadein <?php echo $cashExpnsCls; ?>" style="border:none !important;padding:0px !important;">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <table class="table table-striped table-bordered table-responsive" id="oneVmsExpnsTrnsLnsTable" cellspacing="0" width="100%" style="width:100%;min-width: 900px !important;">
                                                        <thead>
                                                            <tr>
                                                                <th>No.</th>
                                                                <th style="">Narration/Remark</th>
                                                                <th>CUR.</th>
                                                                <th>Entered Amount</th>
                                                                <th style="min-width:300px;width:300px;">GL Transaction Account</th>
                                                                <th style="">Payment Currency Exchange Rate</th>
                                                                <th>&nbsp;</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>                                                                                                        
                                                            <?php
                                                            if ($trnsType == $trnsTypes[12] || $trnsType == $trnsTypes[13]) {
                                                                $cntr = 0;
                                                                $resultRw = get_One_PtCshExpnsLines($sbmtdVmsTrnsHdrID);
                                                                $maxNoRows = loc_db_num_rows($resultRw);
                                                                $excludedItems = "";
                                                                while ($cntr < $maxNoRows) {
                                                                    $ptycshLineID = -1;
                                                                    $ptycshLineDesc = "";
                                                                    $entrdCurID = -1;
                                                                    $entrdAmnt = 0.00;
                                                                    $entrdCurNm = "";
                                                                    $expnsAcntID = -1;
                                                                    $expnsAcntNm = -1;
                                                                    $acntCrncyRate = 0;
                                                                    if ($rowRw = loc_db_fetch_array($resultRw)) {
                                                                        $ptycshLineID = (float) $rowRw[0];
                                                                        $ptycshLineDesc = $rowRw[2];
                                                                        $entrdCurID = (int) $rowRw[11];
                                                                        $entrdAmnt = (float) $rowRw[3];
                                                                        $entrdCurNm = $rowRw[12];
                                                                        $expnsAcntID = $rowRw[7];
                                                                        $expnsAcntNm = $rowRw[22];
                                                                        $acntCrncyRate = (float) $rowRw[18];
                                                                        $ttlPrce += $entrdAmnt * $acntCrncyRate;
                                                                    }
                                                                    $cntr += 1;
                                                                    ?>
                                                                    <tr id="oneVmsExpnsTrnsRow_<?php echo $cntr; ?>">                                    
                                                                        <td class="lovtd"><span><?php echo ($cntr); ?></span></td>                                              
                                                                        <td class="lovtd"  style="">
                                                                            <input type="text" class="form-control rqrdFld vmsExpDesc" aria-label="..." id="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_LineDesc" name="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_LineDesc" value="<?php echo $ptycshLineDesc; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?> onkeypress="gnrlFldKeyPress(event, 'oneVmsExpnsTrnsRow<?php echo $cntr; ?>_LineDesc', 'oneVmsExpnsTrnsLnsTable', 'vmsExpDesc');">                                                    
                                                                        </td>                                                  
                                                                        <td class="lovtd">
                                                                            <div class="" style="width:100% !important;">
                                                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TrnsCurNm" name="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TrnsCurNm" value="<?php echo $entrdCurNm; ?>" readonly="true" style="width:100% !important;">
                                                                                <label class="btn btn-primary btn-file" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Currencies', '', '', '', 'radio', true, '', 'oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TrnsCurNm', '', 'clear', 1, '', function () {
                                                                                            $('#oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TrnsCurNm1').html($('#oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TrnsCurNm').val());
                                                                                        });">
                                                                                    <span class="" id="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TrnsCurNm1"><?php echo $entrdCurNm; ?></span>
                                                                                </label>
                                                                            </div>                                              
                                                                        </td>
                                                                        <td class="lovtd">
                                                                            <input type="text" class="form-control rqrdFld vmsExpTtl" aria-label="..." id="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                                                            echo number_format($entrdAmnt, 2); /* Asset and Expenditure Accounts */
                                                                            ?>" onkeypress="gnrlFldKeyPress(event, 'oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TtlVal', 'oneVmsExpnsTrnsLnsTable', 'vmsExpTtl');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?> onchange="calcAllExpnsTrnsTtl();">                                                    
                                                                        </td>
                                                                        <td class="lovtd">
                                                                            <div class="input-group" style="width:100% !important;">
                                                                                <input type="text" class="form-control" aria-label="..." id="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_AccountNm" name="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_AccountNm" value="<?php echo $expnsAcntNm; ?>" readonly="true" style="width:100% !important;">
                                                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_AccountID" value="<?php echo $expnsAcntID; ?>" style="width:100% !important;">  
                                                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $ptycshLineID; ?>" style="width:100% !important;">                                                      
                                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Cheque Clearing Accounts', 'gnrlVmsOrgID', '', '', 'radio', true, '', 'oneVmsExpnsTrnsRow<?php echo $cntr; ?>_AccountID', 'oneVmsExpnsTrnsRow<?php echo $cntr; ?>_AccountNm', 'clear', 1, '', function () {

                                                                                        });">
                                                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                                                </label>
                                                                            </div>                                               
                                                                        </td>
                                                                        <td class="lovtd" style="">
                                                                            <input type="text" class="form-control rqrdFld vmsExpRt" aria-label="..." id="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_ExchgRate" name="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_ExchgRate" value="<?php
                                                                            echo number_format($acntCrncyRate, 15);
                                                                            ?>" onkeypress="gnrlFldKeyPress(event, 'oneVmsExpnsTrnsRow<?php echo $cntr; ?>_ExchgRate', 'oneVmsExpnsTrnsLnsTable', 'vmsExpRt');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?> onchange="calcAllExpnsTrnsTtl();">                                                    
                                                                        </td> 
                                                                        <td class="lovtd">
                                                                            <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsExpnsTrnsLine('oneVmsExpnsTrnsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete GL Trns. Line">
                                                                                <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                                            </button>
                                                                        </td>
                                                                    </tr>
                                                                    <?php
                                                                }
                                                            }
                                                            ?>
                                                        </tbody>
                                                        <tfoot>                                                            
                                                            <tr>
                                                                <th>&nbsp;</th>
                                                                <th>TOTALS:</th>
                                                                <th style=""><?php echo $crncyIDNm; ?></th>
                                                                <th style="text-align: right;">
                                                                    <?php
                                                                    echo "<span style=\"color:red;font-weight:bold;font-size:14px;\" id=\"myCptrdExpnsTtlBtn\">" . number_format($ttlPrce,
                                                                            2, '.', ',') . "</span>";
                                                                    ?>
                                                                    <input type="hidden" id="myCptrdExpnsTtlVal" value="<?php echo $ttlPrce; ?>">
                                                                </th>
                                                                <th style="">&nbsp;</th>                                           
                                                                <th style="">&nbsp;</th>
                                                                <th style="">&nbsp;</th>
                                                            </tr>
                                                        </tfoot>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div id = "cashItmsNotes" class = "tab-pane fadein <?php echo $cashItmsNotesCls; ?>" style = "border:none !important;padding:0px !important;">
                                            <div class = "row">
                                                <div class = "col-md-12">
                                                    <table class = "table table-striped table-bordered table-responsive" id = "oneVmsTrnsLnsTable" cellspacing = "0" width = "100%" style = "width:100%;min-width: 900px !important;">
                                                        <thead>
                                                            <tr>
                                                            <!--<th>No.</th> -->
                                                                <th style = "max-width:100px;width:100px;">Denomination</th>
                                                                <th style = "<?php echo $srcCageColDsply; ?>max-width:70px;width:70px;">Src. Cage</th>
                                                                <th style = "<?php echo $dstCageColDsply; ?>max-width:70px;width:70px;">Dest. Cage</th>
                                                                <th style = "<?php echo $dsplyLnRemark; ?>">Narration/Remark</th>
                                                                <th style="text-align: center;max-width:70px;width:70px;<?php echo $dsplyTrays; ?>">Trays</th>
                                                                <th style="text-align: center;max-width:70px;width:70px;<?php echo $dsplyBundles; ?>">Bundles</th>
                                                                                    <!--<th style = "display:none;">Pieces</th> -->
                                                                <th>UOM</th>
                                                                <th>Total Value</th>
                                                                <th style = "<?php echo $dsplyPymntInfo; ?>">Payment Currency Exchange Rate</th>
                                                                <th style = "<?php echo $dsplySrcBalance; ?>">Source Cage Running Balance</th>
                                                                <th style = "<?php echo $dsplyDstBalance; ?>">Destination Cage Running Balance</th>
                                                                <th style = "<?php echo $dsplySrcItemState; ?>">Source Cage Money Type</th>
                                                                <th style = "<?php echo $dsplyDstItemState; ?>">Destination Cage Money Type</th>
                                                                <th>&nbsp;
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <?php
                                                            $cntr = 0;
                                                            $resultRw = get_One_VMSTrnsLines($sbmtdVmsTrnsHdrID, -1, "Note");
                                                            $maxNoRows = loc_db_num_rows($resultRw);
                                                            $excludedItems = "";
                                                            while ($cntr < $maxNoRows) {
                                                                $itemID = -1;
                                                                $trnsLnID = -1;
                                                                $itemName = "";
                                                                $baseUOMID = -1;
                                                                $unitVal = 0.00;
                                                                $qty = 0.00;
                                                                $baseUOMNm = "";
                                                                $ttlRowVal = 0.00;
                                                                $srcItemState = $dfltSrcItemState;
                                                                $dstItemState = $dfltDstItemState;
                                                                $funcCrncyRate = 0;
                                                                $lineDesc = "";
                                                                $srcRunningBalance = 0;
                                                                $dstRunningBalance = 0;
                                                                $srcCageID1 = -1;
                                                                $destCageID1 = -1;
                                                                $srcCageNm1 = "";
                                                                $destCageNm1 = "";
                                                                if ($rowRw = loc_db_fetch_array($resultRw)) {
                                                                    $trnsLnID = (float) $rowRw[0];
                                                                    $itemID = (int) $rowRw[2];
                                                                    $lineDesc = $rowRw[36];
                                                                    $srcRunningBalance = (float) $rowRw[35];
                                                                    $dstRunningBalance = (float) $rowRw[37];
                                                                    $excludedItems .= $itemID . ", ";
                                                                    $itemName = $rowRw[29];
                                                                    $unitVal = (float) $rowRw[9];
                                                                    $baseUOMNm = $rowRw[31];
                                                                    $baseUOMID = (int) $rowRw[26];
                                                                    $qty = (float) $rowRw[7];
                                                                    $tray = (float) $rowRw[46];
                                                                    $bundle = (float) $rowRw[47];
                                                                    $ttlRowVal = $qty * $unitVal;
                                                                    if ($trnsLnID > 0) {
                                                                        $srcItemState = $rowRw[27];
                                                                        $dstItemState = $rowRw[34];
                                                                    } else {
                                                                        $srcItemState = $dfltSrcItemState;
                                                                        $dstItemState = $dfltDstItemState;
                                                                    }
                                                                    $funcCrncyRate = (float) $rowRw[21];
                                                                    $srcCageID1 = (int) $rowRw[4];
                                                                    $destCageID1 = (int) $rowRw[6];
                                                                    $srcCageNm1 = $rowRw[39];
                                                                    $destCageNm1 = $rowRw[41];
                                                                }
                                                                $cntr += 1;
                                                                ?>
                                                                <tr id="oneVmsTrnsRow_<?php echo $cntr; ?>">                                    
                                                                    <!--<td class="lovtd"><span><?php echo ($cntr); ?></span></td>-->
                                                                    <td class="lovtd">
                                                                        <div class="input-group" style="width:100% !important;">
                                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm" name="oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm" value="<?php echo $itemName; ?>" readonly="true" style="width:100% !important;">
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_ItmID" value="<?php echo $itemID; ?>" style="width:100% !important;">
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_BaseUoMID" value="<?php echo $baseUOMID; ?>" style="width:100% !important;">     
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $trnsLnID; ?>" style="width:100% !important;">                                                      
                                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsRow<?php echo $cntr; ?>_ItmID', 'oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm', 'clear', 1, '', function () {
                                                                                        afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                                    });">
                                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                                            </label>
                                                                        </div>                                               
                                                                    </td> 
                                                                    <td class="lovtd"  style="<?php echo $srcCageColDsply; ?>">
                                                                        <div class="input-group" style="width:100% !important;">
                                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageNm" name="oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageNm" value="<?php echo $srcCageNm1; ?>" readonly="true" style="width:100% !important;">
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageID" value="<?php echo $srcCageID1; ?>" style="width:100% !important;">                                              
                                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $srcCageID1; ?>', 'oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageID', 'oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageNm', 'clear', 1, '', function () {
                                                                                        afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                                    });">
                                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                                            </label>
                                                                        </div> 
                                                                    </td> 
                                                                    <td class="lovtd" style="<?php echo $dstCageColDsply; ?>">
                                                                        <div class="input-group" style="width:100% !important;">
                                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_DstCageNm" name="oneVmsTrnsRow<?php echo $cntr; ?>_DstCageNm" value="<?php echo $destCageNm1; ?>" readonly="true" style="width:100% !important;">
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_DstCageID" value="<?php echo $destCageID1; ?>" style="width:100% !important;">                                              
                                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $destCageID1; ?>', 'oneVmsTrnsRow<?php echo $cntr; ?>_DstCageID', 'oneVmsTrnsRow<?php echo $cntr; ?>_DstCageNm', 'clear', 1, '', function () {
                                                                                        afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                                    });">
                                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                                            </label>
                                                                        </div> 
                                                                    </td>                                                
                                                                    <td class="lovtd"  style="<?php echo $dsplyLnRemark; ?>">
                                                                        <input type="text" class="form-control rqrdFld" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_LineDesc" name="oneVmsTrnsRow<?php echo $cntr; ?>_LineDesc" value="<?php echo $lineDesc; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?>>                                                    
                                                                    </td>
                                                                    <td class="lovtd" style="<?php echo $dsplyTrays; ?>">
                                                                        <input type="text" class="form-control vmsCbTray" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Tray" name="oneVmsTrnsRow<?php echo $cntr; ?>_Tray" value="<?php
                                                                        echo number_format($tray, 0);
                                                                        ?>"  onchange="calcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsCbTrayKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: center;" <?php echo $mkReadOnly; ?>>                                            
                                                                    </td>
                                                                    <td class="lovtd" style="<?php echo $dsplyBundles; ?>">
                                                                        <input type="text" class="form-control vmsCbBndl" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Bndl" name="oneVmsTrnsRow<?php echo $cntr; ?>_Bndl" value="<?php
                                                                        echo number_format($bundle, 0);
                                                                        ?>"  onchange="calcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsCbBndlKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: center;" <?php echo $mkReadOnly; ?>>                                            
                                                                    </td>
                                                                    <td class="lovtd">
                                                                        <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;" onclick="getOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="View QTY Breakdown"><?php echo $baseUOMNm; ?></button>
                                                                    </td>
                                                                    <td class="lovtd">
                                                                        <input type="hidden" class="form-control vmsCbQty" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Qty" name="oneVmsTrnsRow<?php echo $cntr; ?>_Qty" value="<?php
                                                                        echo number_format($qty, 0);
                                                                        ?>"  onchange="calcCshBrkdwnRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                            
                                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_UntVal" name="oneVmsTrnsRow<?php echo $cntr; ?>_UntVal" value="<?php echo $unitVal;
                                                                        ?>" style="width:100% !important;" readonly="true">             
                                                                        <input type="text" class="form-control vmsCbTtl" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsTrnsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                                                        echo number_format($ttlRowVal, 2);
                                                                        ?>" onchange="calcCshBrkdwnTtlVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                                    </td>
                                                                    <td class="lovtd" style="<?php echo $dsplyPymntInfo; ?>">
                                                                        <input type="text" class="form-control vmsFncCrncy" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_PymntCrncyRate" name="oneVmsTrnsRow<?php echo $cntr; ?>_PymntCrncyRate" value="<?php
                                                                        echo number_format($funcCrncyRate, 15);
                                                                        ?>" onchange="calcPymtAmntTtl('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormFnCrncyKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                                    </td> 
                                                                    <td class="lovtd" style="<?php echo $dsplySrcBalance; ?>">
                                                                        <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_SrcRnngBal" name="oneVmsTrnsRow<?php echo $cntr; ?>_SrcRnngBal" value="<?php
                                                                        if ($srcCageID1 > 0) {
                                                                            echo number_format($srcRunningBalance, 2);
                                                                        } else {
                                                                            echo "0.00";
                                                                        }
                                                                        ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                                               <?php
                                                                               if (strpos($capturedItemIDs, ";S" . $itemID . "_" . $srcCageID1 . ";") === FALSE) {
                                                                                   $capturedItemIDs .= ";S" . $itemID . "_" . $srcCageID1 . ";";
                                                                                   $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmSrcCage_" . $itemID . "_" . $srcCageID1 . "\" name=\"oneVmsTrnsFrmSrcCage_" . $itemID . "_" . $srcCageID1 . "\" value=\"" . number_format($srcRunningBalance,
                                                                                                   2) . "\" readonly=\"true\">";
                                                                               }
                                                                               if (strpos($capturedItemIDs, ";D" . $itemID . "_" . $destCageID1 . ";") === FALSE) {
                                                                                   $capturedItemIDs .= ";D" . $itemID . "_" . $destCageID1 . ";";
                                                                                   $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmDstCage_" . $itemID . "_" . $destCageID1 . "\" name=\"oneVmsTrnsFrmDstCage_" . $itemID . "_" . $destCageID1 . "\" value=\"" . number_format($dstRunningBalance,
                                                                                                   2) . "\" readonly=\"true\">";
                                                                               }
                                                                               ?>
                                                                    </td> 
                                                                    <td class="lovtd" style="<?php echo $dsplyDstBalance; ?>">
                                                                        <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_DstRnngBal" name="oneVmsTrnsRow<?php echo $cntr; ?>_DstRnngBal" value="<?php
                                                                        if ($destCageID1 > 0) {
                                                                            echo number_format($dstRunningBalance, 2);
                                                                        } else {
                                                                            echo "0.00";
                                                                        }
                                                                        ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                                    </td>
                                                                    <td class="lovtd" style="<?php echo $dsplySrcItemState; ?>">
                                                                        <div class="input-group" style="width:100% !important;">
                                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_SrcItemState" name="oneVmsTrnsRow<?php echo $cntr; ?>_SrcItemState" value="<?php echo $srcItemState; ?>" readonly="true" style="width:100% !important;">
                                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsRow<?php echo $cntr; ?>_SrcItemState', 'clear', 1, '', function () {
                                                                                        afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                                    });">
                                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                                            </label>
                                                                        </div> 
                                                                    </td> 
                                                                    <td class="lovtd" style="<?php echo $dsplyDstItemState; ?>">
                                                                        <div class="input-group" style="width:100% !important;">
                                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_DstItemState" name="oneVmsTrnsRow<?php echo $cntr; ?>_DstItemState" value="<?php echo $dstItemState; ?>" readonly="true" style="width:100% !important;">
                                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsRow<?php echo $cntr; ?>_DstItemState', 'clear', 1, '', function () {
                                                                                        afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                                    });">
                                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                                            </label>
                                                                        </div> 
                                                                    </td> 
                                                                    <td class="lovtd">
                                                                        <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsTrnsLine('oneVmsTrnsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete Trns. Line">
                                                                            <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                                        </button>
                                                                    </td>
                                                                </tr>
                                                                <?php
                                                            }

                                                            if (($voidedTrnsHdrID <= 0 || $orgnlVmsTrnsHdrID <= 0) && ($rqStatus == "Not Submitted" ||
                                                                    $rqStatus == "Withdrawn" || $rqStatus == "Rejected")) {
                                                                $excludedItems = trim($excludedItems, ", ");
                                                                $resultRw = get_Fresh_VMSTrnsLines($sbmtdVmsTrnsHdrID, $crncyID, $destCageID,
                                                                        $excludedItems, $destVltID, $dfltDstItemState, $srcCageID, $srcVltID,
                                                                        $dfltSrcItemState);
                                                                $maxNoRows = loc_db_num_rows($resultRw);
                                                                $nwcntr = 0;
                                                                while ($nwcntr < $maxNoRows) {
                                                                    $itemID = -1;
                                                                    $trnsLnID = -1;
                                                                    $itemName = "";
                                                                    $baseUOMID = -1;
                                                                    $unitVal = 0.00;
                                                                    $qty = 0.00;
                                                                    $tray = 0.00;
                                                                    $bundle = 0.00;
                                                                    $baseUOMNm = "";
                                                                    $ttlRowVal = 0.00;
                                                                    $srcItemState = $dfltSrcItemState;
                                                                    $dstItemState = $dfltDstItemState;
                                                                    $funcCrncyRate = 0;
                                                                    $lineDesc = "";
                                                                    $srcRunningBalance = 0;
                                                                    $dstRunningBalance = 0;
                                                                    if ($rowRw = loc_db_fetch_array($resultRw)) {
                                                                        $trnsLnID = (float) $rowRw[0];
                                                                        $itemID = (int) $rowRw[2];
                                                                        $lineDesc = $rowRw[36];
                                                                        if ($lineDesc == "") {
                                                                            $lineDesc = $vmsTrnsDesc;
                                                                        }
                                                                        $srcRunningBalance = (float) $rowRw[35];
                                                                        $dstRunningBalance = (float) $rowRw[37];
                                                                        $itemName = $rowRw[29];
                                                                        $unitVal = (float) $rowRw[9];
                                                                        $baseUOMNm = $rowRw[31];
                                                                        $baseUOMID = (int) $rowRw[26];
                                                                        $qty = (float) $rowRw[7];
                                                                        $ttlRowVal = $qty * $unitVal;
                                                                        if ($trnsLnID > 0) {
                                                                            $srcItemState = $rowRw[27];
                                                                            $dstItemState = $rowRw[34];
                                                                        } else {
                                                                            $srcItemState = $dfltSrcItemState;
                                                                            $dstItemState = $dfltDstItemState;
                                                                        }
                                                                        $funcCrncyRate = (float) $rowRw[21];
                                                                    }
                                                                    $cntr += 1;
                                                                    $nwcntr += 1;
                                                                    ?>
                                                                    <tr id="oneVmsTrnsRow_<?php echo $cntr; ?>">                                    
                                                                        <!--<td class="lovtd"><span><?php echo ($cntr); ?></span></td>-->
                                                                        <td class="lovtd">
                                                                            <div class="input-group" style="width:100% !important;">
                                                                                <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm" name="oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm" value="<?php echo $itemName; ?>" readonly="true" style="width:100% !important;">
                                                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_ItmID" value="<?php echo $itemID; ?>" style="width:100% !important;">
                                                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_BaseUoMID" value="<?php echo $baseUOMID; ?>" style="width:100% !important;">     
                                                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $trnsLnID; ?>" style="width:100% !important;">                                                      
                                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsRow<?php echo $cntr; ?>_ItmID', 'oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm', 'clear', 1, '', function () {
                                                                                            afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                                        });">
                                                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                                                </label>
                                                                            </div>                                               
                                                                        </td> 
                                                                        <td class="lovtd"  style="<?php echo $srcCageColDsply; ?>">
                                                                            <div class="input-group" style="width:100% !important;">
                                                                                <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageNm" name="oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageNm" value="<?php echo $srcCageNm; ?>" readonly="true" style="width:100% !important;">
                                                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageID" value="<?php echo $srcCageID; ?>" style="width:100% !important;">                                              
                                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $srcCageID; ?>', 'oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageID', 'oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageNm', 'clear', 1, '', function () {
                                                                                            afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                                        });">
                                                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                                                </label>
                                                                            </div> 
                                                                        </td> 
                                                                        <td class="lovtd" style="<?php echo $dstCageColDsply; ?>">
                                                                            <div class="input-group" style="width:100% !important;">
                                                                                <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_DstCageNm" name="oneVmsTrnsRow<?php echo $cntr; ?>_DstCageNm" value="<?php echo $destCageNm; ?>" readonly="true" style="width:100% !important;">
                                                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_DstCageID" value="<?php echo $destCageID; ?>" style="width:100% !important;">                                              
                                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $destCageID; ?>', 'oneVmsTrnsRow<?php echo $cntr; ?>_DstCageID', 'oneVmsTrnsRow<?php echo $cntr; ?>_DstCageNm', 'clear', 1, '', function () {
                                                                                            afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                                        });">
                                                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                                                </label>
                                                                            </div> 
                                                                        </td>                                               
                                                                        <td class="lovtd" style="<?php echo $dsplyLnRemark; ?>">
                                                                            <input type="text" class="form-control rqrdFld" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_LineDesc" name="oneVmsTrnsRow<?php echo $cntr; ?>_LineDesc" value="<?php echo $lineDesc; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?>>                                                    
                                                                        </td>
                                                                        <td class="lovtd" style="<?php echo $dsplyTrays; ?>">
                                                                            <input type="text" class="form-control vmsCbTray" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Tray" name="oneVmsTrnsRow<?php echo $cntr; ?>_Tray" value="<?php
                                                                            echo number_format($tray, 0);
                                                                            ?>"  onchange="calcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsCbTrayKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: center;" <?php echo $mkReadOnly; ?>>                                            
                                                                        </td>
                                                                        <td class="lovtd" style="<?php echo $dsplyBundles; ?>">
                                                                            <input type="text" class="form-control vmsCbBndl" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Bndl" name="oneVmsTrnsRow<?php echo $cntr; ?>_Bndl" value="<?php
                                                                            echo number_format($bundle, 0);
                                                                            ?>"  onchange="calcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsCbBndlKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: center;" <?php echo $mkReadOnly; ?>>                                            
                                                                        </td>
                                                                        <td class="lovtd">
                                                                            <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;" onclick="getOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="View QTY Breakdown"><?php echo $baseUOMNm; ?></button>
                                                                        </td>
                                                                        <td class="lovtd">
                                                                            <input type="hidden" class="form-control vmsCbQty" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Qty" name="oneVmsTrnsRow<?php echo $cntr; ?>_Qty" value="<?php
                                                                            echo number_format($qty, 0);
                                                                            ?>"  onchange="calcCshBrkdwnRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                            
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_UntVal" name="oneVmsTrnsRow<?php echo $cntr; ?>_UntVal" value="<?php echo $unitVal;
                                                                            ?>" style="width:100% !important;" readonly="true">  
                                                                            <input type="text" class="form-control vmsCbTtl" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsTrnsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                                                            echo number_format($ttlRowVal, 2);
                                                                            ?>" onchange="calcCshBrkdwnTtlVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                                        </td>
                                                                        <td class="lovtd" style="<?php echo $dsplyPymntInfo; ?>">
                                                                            <input type="text" class="form-control vmsFncCrncy" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_PymntCrncyRate" name="oneVmsTrnsRow<?php echo $cntr; ?>_PymntCrncyRate" value="<?php
                                                                            echo number_format($funcCrncyRate, 15);
                                                                            ?>" onchange="calcPymtAmntTtl('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormFnCrncyKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                                        </td>
                                                                        <td class="lovtd" style="<?php echo $dsplySrcBalance; ?>">
                                                                            <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_SrcRnngBal" name="oneVmsTrnsRow<?php echo $cntr; ?>_SrcRnngBal" value="<?php
                                                                            if ($srcCageID > 0) {
                                                                                echo number_format($srcRunningBalance, 2);
                                                                            } else {
                                                                                echo "0.00";
                                                                            }
                                                                            ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                                                   <?php
                                                                                   if (strpos($capturedItemIDs,
                                                                                                   ";S" . $itemID . "_" . $srcCageID . ";") === FALSE) {
                                                                                       $capturedItemIDs .= ";S" . $itemID . "_" . $srcCageID . ";";
                                                                                       $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmSrcCage_" . $itemID . "_" . $srcCageID . "\" name=\"oneVmsTrnsFrmSrcCage_" . $itemID . "_" . $srcCageID . "\" value=\"" . number_format($srcRunningBalance,
                                                                                                       2) . "\" readonly=\"true\">";
                                                                                   }
                                                                                   if (strpos($capturedItemIDs,
                                                                                                   ";D" . $itemID . "_" . $destCageID . ";") === FALSE) {
                                                                                       $capturedItemIDs .= ";D" . $itemID . "_" . $destCageID . ";";
                                                                                       $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmDstCage_" . $itemID . "_" . $destCageID . "\" name=\"oneVmsTrnsFrmDstCage_" . $itemID . "_" . $destCageID . "\" value=\"" . number_format($dstRunningBalance,
                                                                                                       2) . "\" readonly=\"true\">";
                                                                                   }
                                                                                   ?>
                                                                        </td> 
                                                                        <td class="lovtd" style="<?php echo $dsplyDstBalance; ?>">
                                                                            <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_DstRnngBal" name="oneVmsTrnsRow<?php echo $cntr; ?>_DstRnngBal" value="<?php
                                                                            if ($destCageID > 0) {
                                                                                echo number_format($dstRunningBalance, 2);
                                                                            } else {
                                                                                echo "0.00";
                                                                            }
                                                                            ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                                        </td>
                                                                        <td class="lovtd" style="<?php echo $dsplySrcItemState; ?>">
                                                                            <div class="input-group" style="width:100% !important;">
                                                                                <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_SrcItemState" name="oneVmsTrnsRow<?php echo $cntr; ?>_SrcItemState" value="<?php echo $srcItemState; ?>" readonly="true" style="width:100% !important;">
                                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsRow<?php echo $cntr; ?>_SrcItemState', 'clear', 1, '', function () {
                                                                                            afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                                        });">
                                                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                                                </label>
                                                                            </div> 
                                                                        </td> 
                                                                        <td class="lovtd" style="<?php echo $dsplyDstItemState; ?>">
                                                                            <div class="input-group" style="width:100% !important;">
                                                                                <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_DstItemState" name="oneVmsTrnsRow<?php echo $cntr; ?>_DstItemState" value="<?php echo $dstItemState; ?>" readonly="true" style="width:100% !important;">
                                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsRow<?php echo $cntr; ?>_DstItemState', 'clear', 1, '', function () {
                                                                                            afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                                        });">
                                                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                                                </label>
                                                                            </div> 
                                                                        </td> 
                                                                        <td class="lovtd">
                                                                            <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsTrnsLine('oneVmsTrnsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete Trns. Line">
                                                                                <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                                            </button>
                                                                        </td>
                                                                    </tr>
                                                                    <?php
                                                                }
                                                            }
                                                            ?>
                                                        </tbody>
                                                    </table> 
                                                </div>
                                            </div>
                                        </div>                                    
                                        <div id="cashItmsCoins" class="tab-pane fade hideNotice" style="border:none !important;padding:0px !important;">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <table class="table table-striped table-bordered table-responsive" id="oneVmsTrnsCoinsLnsTable" cellspacing="0" width="100%" style="width:100%;min-width: 900px !important;">
                                                        <thead>
                                                            <tr>
                                                                <!--<th>No.</th>-->
                                                                <th style="max-width:100px;width:100px;">Denomination</th>
                                                                <th style="<?php echo $srcCageColDsply; ?>max-width:70px;width:70px;">Src. Cage</th>
                                                                <th style="<?php echo $dstCageColDsply; ?>max-width:70px;width:70px;">Dest. Cage</th>
                                                                <th style="<?php echo $dsplyLnRemark; ?>">Narration/Remark</th>
                                                                <th style="">Pieces</th>
                                                                <th>UOM</th>
                                                                <th>Total Value</th>
                                                                <th style="<?php echo $dsplyPymntInfo; ?>">Payment Currency Exchange Rate</th>
                                                                <th style="<?php echo $dsplySrcBalance; ?>">Source Cage Running Balance</th>
                                                                <th style="<?php echo $dsplyDstBalance; ?>">Destination Cage Running Balance</th>
                                                                <th style="<?php echo $dsplySrcItemState; ?>">Source Cage Money Type</th>
                                                                <th style="<?php echo $dsplyDstItemState; ?>">Destination Cage Money Type</th>
                                                                <th>&nbsp;</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <?php
                                                            $cntr = 0;
                                                            $resultRw = get_One_VMSTrnsLines($sbmtdVmsTrnsHdrID, -1, "Coin");
                                                            $maxNoRows = loc_db_num_rows($resultRw);
                                                            $excludedItems = "";
                                                            while ($cntr < $maxNoRows) {
                                                                $itemID = -1;
                                                                $trnsLnID = -1;
                                                                $itemName = "";
                                                                $baseUOMID = -1;
                                                                $unitVal = 0.00;
                                                                $qty = 0.00;
                                                                $baseUOMNm = "";
                                                                $ttlRowVal = 0.00;
                                                                $srcItemState = $dfltSrcItemState;
                                                                $dstItemState = $dfltDstItemState;
                                                                $funcCrncyRate = 0;
                                                                $lineDesc = "";
                                                                $srcRunningBalance = 0;
                                                                $dstRunningBalance = 0;
                                                                $srcCageID1 = -1;
                                                                $destCageID1 = -1;
                                                                $srcCageNm1 = "";
                                                                $destCageNm1 = "";
                                                                if ($rowRw = loc_db_fetch_array($resultRw)) {
                                                                    $trnsLnID = (float) $rowRw[0];
                                                                    $itemID = (int) $rowRw[2];
                                                                    $lineDesc = $rowRw[36];
                                                                    $srcRunningBalance = (float) $rowRw[35];
                                                                    $dstRunningBalance = (float) $rowRw[37];
                                                                    $excludedItems .= $itemID . ", ";
                                                                    $itemName = $rowRw[29];
                                                                    $unitVal = (float) $rowRw[9];
                                                                    $baseUOMNm = $rowRw[31];
                                                                    $baseUOMID = (int) $rowRw[26];
                                                                    $qty = (float) $rowRw[7];
                                                                    $tray = (float) $rowRw[46];
                                                                    $bundle = (float) $rowRw[47];
                                                                    $ttlRowVal = $qty * $unitVal;
                                                                    if ($trnsLnID > 0) {
                                                                        $srcItemState = $rowRw[27];
                                                                        $dstItemState = $rowRw[34];
                                                                    } else {
                                                                        $srcItemState = $dfltSrcItemState;
                                                                        $dstItemState = $dfltDstItemState;
                                                                    }
                                                                    $funcCrncyRate = (float) $rowRw[21];
                                                                    $srcCageID1 = (int) $rowRw[4];
                                                                    $destCageID1 = (int) $rowRw[6];
                                                                    $srcCageNm1 = $rowRw[39];
                                                                    $destCageNm1 = $rowRw[41];
                                                                }
                                                                $cntr += 1;
                                                                ?>
                                                                <tr id="oneVmsTrnsCoinsRow_<?php echo $cntr; ?>">                                    
                                                                    <!--<td class="lovtd"><span><?php echo ($cntr); ?></span></td>-->
                                                                    <td class="lovtd">
                                                                        <div class="input-group" style="width:100% !important;">
                                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm" value="<?php echo $itemName; ?>" readonly="true" style="width:100% !important;">
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItmID" value="<?php echo $itemID; ?>" style="width:100% !important;">
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_BaseUoMID" value="<?php echo $baseUOMID; ?>" style="width:100% !important;">     
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $trnsLnID; ?>" style="width:100% !important;">                                                      
                                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItmID', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm', 'clear', 1, '', function () {
                                                                                        afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                                    });">
                                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                                            </label>
                                                                        </div>                                               
                                                                    </td> 
                                                                    <td class="lovtd"  style="<?php echo $srcCageColDsply; ?>">
                                                                        <div class="input-group" style="width:100% !important;">
                                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageNm" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageNm" value="<?php echo $srcCageNm1; ?>" readonly="true" style="width:100% !important;">
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageID" value="<?php echo $srcCageID1; ?>" style="width:100% !important;">                                              
                                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $srcCageID1; ?>', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageID', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageNm', 'clear', 1, '', function () {
                                                                                        afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                                    });">
                                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                                            </label>
                                                                        </div> 
                                                                    </td> 
                                                                    <td class="lovtd" style="<?php echo $dstCageColDsply; ?>">
                                                                        <div class="input-group" style="width:100% !important;">
                                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageNm" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageNm" value="<?php echo $destCageNm1; ?>" readonly="true" style="width:100% !important;">
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageID" value="<?php echo $destCageID1; ?>" style="width:100% !important;">                                              
                                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $destCageID1; ?>', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageID', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageNm', 'clear', 1, '', function () {
                                                                                        afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                                    });">
                                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                                            </label>
                                                                        </div> 
                                                                    </td>                                                
                                                                    <td class="lovtd"  style="<?php echo $dsplyLnRemark; ?>">
                                                                        <input type="text" class="form-control rqrdFld" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LineDesc" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LineDesc" value="<?php echo $lineDesc; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?>>                                                    
                                                                    </td>
                                                                    <td class="lovtd">                                                                        
                                                                        <input type="text" class="form-control vmsCbQty" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_Qty" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_Qty" value="<?php
                                                                        echo number_format($qty, 0);
                                                                        ?>"  onchange="calcCshBrkdwnRowVal('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                            
                                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_UntVal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_UntVal" value="<?php echo $unitVal;
                                                                        ?>" style="width:100% !important;" readonly="true">   
                                                                    </td>
                                                                    <td class="lovtd">
                                                                        <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;" onclick="getOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="View QTY Breakdown"><?php echo $baseUOMNm; ?></button>
                                                                    </td>
                                                                    <td class="lovtd">          
                                                                        <input type="text" class="form-control vmsCbTtl" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                                                        echo number_format($ttlRowVal, 2);
                                                                        ?>" onchange="calcCshBrkdwnTtlVal('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                                    </td>
                                                                    <td class="lovtd" style="<?php echo $dsplyPymntInfo; ?>">
                                                                        <input type="text" class="form-control vmsFncCrncy" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_PymntCrncyRate" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_PymntCrncyRate" value="<?php
                                                                        echo number_format($funcCrncyRate, 15);
                                                                        ?>" onchange="calcPymtAmntTtl('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormFnCrncyKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                                    </td> 
                                                                    <td class="lovtd" style="<?php echo $dsplySrcBalance; ?>">
                                                                        <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcRnngBal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcRnngBal" value="<?php
                                                                        if ($srcCageID1 > 0) {
                                                                            echo number_format($srcRunningBalance, 2);
                                                                        } else {
                                                                            echo "0.00";
                                                                        }
                                                                        ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                                               <?php
                                                                               if (strpos($capturedItemIDs, ";S" . $itemID . "_" . $srcCageID1 . ";") === FALSE) {
                                                                                   $capturedItemIDs .= ";S" . $itemID . "_" . $srcCageID1 . ";";
                                                                                   $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmSrcCage_" . $itemID . "_" . $srcCageID1 . "\" name=\"oneVmsTrnsFrmSrcCage_" . $itemID . "_" . $srcCageID1 . "\" value=\"" . number_format($srcRunningBalance,
                                                                                                   2) . "\" readonly=\"true\">";
                                                                               }
                                                                               if (strpos($capturedItemIDs, ";D" . $itemID . "_" . $destCageID1 . ";") === FALSE) {
                                                                                   $capturedItemIDs .= ";D" . $itemID . "_" . $destCageID1 . ";";
                                                                                   $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmDstCage_" . $itemID . "_" . $destCageID1 . "\" name=\"oneVmsTrnsFrmDstCage_" . $itemID . "_" . $destCageID1 . "\" value=\"" . number_format($dstRunningBalance,
                                                                                                   2) . "\" readonly=\"true\">";
                                                                               }
                                                                               ?>
                                                                    </td> 
                                                                    <td class="lovtd" style="<?php echo $dsplyDstBalance; ?>">
                                                                        <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstRnngBal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstRnngBal" value="<?php
                                                                        if ($destCageID1 > 0) {
                                                                            echo number_format($dstRunningBalance, 2);
                                                                        } else {
                                                                            echo "0.00";
                                                                        }
                                                                        ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                                    </td>
                                                                    <td class="lovtd" style="<?php echo $dsplySrcItemState; ?>">
                                                                        <div class="input-group" style="width:100% !important;">
                                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcItemState" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcItemState" value="<?php echo $srcItemState; ?>" readonly="true" style="width:100% !important;">
                                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcItemState', 'clear', 1, '', function () {
                                                                                        afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                                    });">
                                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                                            </label>
                                                                        </div> 
                                                                    </td> 
                                                                    <td class="lovtd" style="<?php echo $dsplyDstItemState; ?>">
                                                                        <div class="input-group" style="width:100% !important;">
                                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstItemState" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstItemState" value="<?php echo $dstItemState; ?>" readonly="true" style="width:100% !important;">
                                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstItemState', 'clear', 1, '', function () {
                                                                                        afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                                    });">
                                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                                            </label>
                                                                        </div> 
                                                                    </td> 
                                                                    <td class="lovtd">
                                                                        <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsTrnsLine('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete Trns. Line">
                                                                            <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                                        </button>
                                                                    </td>
                                                                </tr>
                                                                <?php
                                                            }

                                                            if (($voidedTrnsHdrID <= 0 || $orgnlVmsTrnsHdrID <= 0) && ($rqStatus == "Not Submitted" ||
                                                                    $rqStatus == "Withdrawn" || $rqStatus == "Rejected")) {
                                                                $excludedItems = trim($excludedItems, ", ");
                                                                $resultRw = get_Fresh_VMSTrnsLines($sbmtdVmsTrnsHdrID, $crncyID, $destCageID,
                                                                        $excludedItems, $destVltID, $dfltDstItemState, $srcCageID, $srcVltID,
                                                                        $dfltSrcItemState, -1, "Coin");
                                                                $maxNoRows = loc_db_num_rows($resultRw);
                                                                $nwcntr = 0;
                                                                while ($nwcntr < $maxNoRows) {
                                                                    $itemID = -1;
                                                                    $trnsLnID = -1;
                                                                    $itemName = "";
                                                                    $baseUOMID = -1;
                                                                    $unitVal = 0.00;
                                                                    $qty = 0.00;
                                                                    $tray = 0.00;
                                                                    $bundle = 0.00;
                                                                    $baseUOMNm = "";
                                                                    $ttlRowVal = 0.00;
                                                                    $srcItemState = $dfltSrcItemState;
                                                                    $dstItemState = $dfltDstItemState;
                                                                    $funcCrncyRate = 0;
                                                                    $lineDesc = "";
                                                                    $srcRunningBalance = 0;
                                                                    $dstRunningBalance = 0;
                                                                    if ($rowRw = loc_db_fetch_array($resultRw)) {
                                                                        $trnsLnID = (float) $rowRw[0];
                                                                        $itemID = (int) $rowRw[2];
                                                                        $lineDesc = $rowRw[36];
                                                                        if ($lineDesc == "") {
                                                                            $lineDesc = $vmsTrnsDesc;
                                                                        }
                                                                        $srcRunningBalance = (float) $rowRw[35];
                                                                        $dstRunningBalance = (float) $rowRw[37];
                                                                        $itemName = $rowRw[29];
                                                                        $unitVal = (float) $rowRw[9];
                                                                        $baseUOMNm = $rowRw[31];
                                                                        $baseUOMID = (int) $rowRw[26];
                                                                        $qty = (float) $rowRw[7];
                                                                        $ttlRowVal = $qty * $unitVal;
                                                                        if ($trnsLnID > 0) {
                                                                            $srcItemState = $rowRw[27];
                                                                            $dstItemState = $rowRw[34];
                                                                        } else {
                                                                            $srcItemState = $dfltSrcItemState;
                                                                            $dstItemState = $dfltDstItemState;
                                                                        }
                                                                        $funcCrncyRate = (float) $rowRw[21];
                                                                    }
                                                                    $cntr += 1;
                                                                    $nwcntr += 1;
                                                                    ?>
                                                                    <tr id="oneVmsTrnsCoinsRow_<?php echo $cntr; ?>">                                    
                                                                        <!--<td class="lovtd"><span><?php echo ($cntr); ?></span></td>-->
                                                                        <td class="lovtd">
                                                                            <div class="input-group" style="width:100% !important;">
                                                                                <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm" value="<?php echo $itemName; ?>" readonly="true" style="width:100% !important;">
                                                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItmID" value="<?php echo $itemID; ?>" style="width:100% !important;">
                                                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_BaseUoMID" value="<?php echo $baseUOMID; ?>" style="width:100% !important;">     
                                                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $trnsLnID; ?>" style="width:100% !important;">                                                      
                                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItmID', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm', 'clear', 1, '', function () {
                                                                                            afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                                        });">
                                                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                                                </label>
                                                                            </div>                                               
                                                                        </td> 
                                                                        <td class="lovtd"  style="<?php echo $srcCageColDsply; ?>">
                                                                            <div class="input-group" style="width:100% !important;">
                                                                                <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageNm" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageNm" value="<?php echo $srcCageNm; ?>" readonly="true" style="width:100% !important;">
                                                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageID" value="<?php echo $srcCageID; ?>" style="width:100% !important;">                                              
                                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $srcCageID; ?>', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageID', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageNm', 'clear', 1, '', function () {
                                                                                            afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                                        });">
                                                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                                                </label>
                                                                            </div> 
                                                                        </td> 
                                                                        <td class="lovtd" style="<?php echo $dstCageColDsply; ?>">
                                                                            <div class="input-group" style="width:100% !important;">
                                                                                <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageNm" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageNm" value="<?php echo $destCageNm; ?>" readonly="true" style="width:100% !important;">
                                                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageID" value="<?php echo $destCageID; ?>" style="width:100% !important;">                                              
                                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $destCageID; ?>', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageID', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageNm', 'clear', 1, '', function () {
                                                                                            afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                                        });">
                                                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                                                </label>
                                                                            </div> 
                                                                        </td>                                               
                                                                        <td class="lovtd" style="<?php echo $dsplyLnRemark; ?>">
                                                                            <input type="text" class="form-control rqrdFld" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LineDesc" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LineDesc" value="<?php echo $lineDesc; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?>>                                                    
                                                                        </td>
                                                                        <td class="lovtd">                                                                            
                                                                            <input type="text" class="form-control vmsCbQty" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_Qty" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_Qty" value="<?php
                                                                            echo number_format($qty, 0);
                                                                            ?>"  onchange="calcCshBrkdwnRowVal('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                            
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_UntVal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_UntVal" value="<?php echo $unitVal;
                                                                            ?>" style="width:100% !important;" readonly="true">  
                                                                        </td>
                                                                        <td class="lovtd">
                                                                            <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;" onclick="getOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="View QTY Breakdown"><?php echo $baseUOMNm; ?></button>
                                                                        </td>
                                                                        <td class="lovtd">
                                                                            <input type="text" class="form-control vmsCbTtl" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                                                            echo number_format($ttlRowVal, 2);
                                                                            ?>" onchange="calcCshBrkdwnTtlVal('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                                        </td>
                                                                        <td class="lovtd" style="<?php echo $dsplyPymntInfo; ?>">
                                                                            <input type="text" class="form-control vmsFncCrncy" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_PymntCrncyRate" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_PymntCrncyRate" value="<?php
                                                                            echo number_format($funcCrncyRate, 15);
                                                                            ?>" onchange="calcPymtAmntTtl('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormFnCrncyKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                                        </td>
                                                                        <td class="lovtd" style="<?php echo $dsplySrcBalance; ?>">
                                                                            <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcRnngBal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcRnngBal" value="<?php
                                                                            if ($srcCageID > 0) {
                                                                                echo number_format($srcRunningBalance, 2);
                                                                            } else {
                                                                                echo "0.00";
                                                                            }
                                                                            ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                                                   <?php
                                                                                   if (strpos($capturedItemIDs,
                                                                                                   ";S" . $itemID . "_" . $srcCageID . ";") === FALSE) {
                                                                                       $capturedItemIDs .= ";S" . $itemID . "_" . $srcCageID . ";";
                                                                                       $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmSrcCage_" . $itemID . "_" . $srcCageID . "\" name=\"oneVmsTrnsFrmSrcCage_" . $itemID . "_" . $srcCageID . "\" value=\"" . number_format($srcRunningBalance,
                                                                                                       2) . "\" readonly=\"true\">";
                                                                                   }
                                                                                   if (strpos($capturedItemIDs,
                                                                                                   ";D" . $itemID . "_" . $destCageID . ";") === FALSE) {
                                                                                       $capturedItemIDs .= ";D" . $itemID . "_" . $destCageID . ";";
                                                                                       $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmDstCage_" . $itemID . "_" . $destCageID . "\" name=\"oneVmsTrnsFrmDstCage_" . $itemID . "_" . $destCageID . "\" value=\"" . number_format($dstRunningBalance,
                                                                                                       2) . "\" readonly=\"true\">";
                                                                                   }
                                                                                   ?>
                                                                        </td> 
                                                                        <td class="lovtd" style="<?php echo $dsplyDstBalance; ?>">
                                                                            <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstRnngBal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstRnngBal" value="<?php
                                                                            if ($destCageID > 0) {
                                                                                echo number_format($dstRunningBalance, 2);
                                                                            } else {
                                                                                echo "0.00";
                                                                            }
                                                                            ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                                        </td>
                                                                        <td class="lovtd" style="<?php echo $dsplySrcItemState; ?>">
                                                                            <div class="input-group" style="width:100% !important;">
                                                                                <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcItemState" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcItemState" value="<?php echo $srcItemState; ?>" readonly="true" style="width:100% !important;">
                                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcItemState', 'clear', 1, '', function () {
                                                                                            afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                                        });">
                                                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                                                </label>
                                                                            </div> 
                                                                        </td> 
                                                                        <td class="lovtd" style="<?php echo $dsplyDstItemState; ?>">
                                                                            <div class="input-group" style="width:100% !important;">
                                                                                <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstItemState" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstItemState" value="<?php echo $dstItemState; ?>" readonly="true" style="width:100% !important;">
                                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstItemState', 'clear', 1, '', function () {
                                                                                            afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                                        });">
                                                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                                                </label>
                                                                            </div> 
                                                                        </td> 
                                                                        <td class="lovtd">
                                                                            <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsTrnsLine('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete Trns. Line">
                                                                                <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                                            </button>
                                                                        </td>
                                                                    </tr>
                                                                    <?php
                                                                }
                                                            }
                                                            ?>
                                                        </tbody>
                                                    </table> 
                                                </div>
                                            </div>
                                        </div>                                        
                                        <div id="rnngBalsHiddenFields">                        
                                            <input type="hidden" id="oneVmsUomCnvFctr_Tray" value="<?php echo $trayCnvFctr; ?>"/>
                                            <input type="hidden" id="oneVmsUomCnvFctr_Bndl" value="<?php echo $bndlCnvFctr; ?>"/>
                                            <?php echo $extrInputFlds; ?>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </form>
                <?php
            } else if ($vwtyp == 22) {
                if (!$canAddTrns && !$canEdtTrns) {
                    restricted();
                    exit();
                }
                $itemID = isset($_POST['sbmtdItemID']) ? cleanInputData($_POST['sbmtdItemID']) : 0;
                $varTtlQty = isset($_POST['varTtlQty']) ? cleanInputData($_POST['varTtlQty']) : 0;
                $sbmtdRwNum = isset($_POST['sbmtdRwNum']) ? cleanInputData($_POST['sbmtdRwNum']) : -1;
                $sbmtdTblRowID = isset($_POST['sbmtdTblRowID']) ? cleanInputData($_POST['sbmtdTblRowID']) : "";
                $rowIDAttrb = isset($_POST['rowIDAttrb']) ? cleanInputData($_POST['rowIDAttrb']) : "";
                $sbmtdCrncyNm = isset($_POST['sbmtdCrncyNm']) ? cleanInputData($_POST['sbmtdCrncyNm']) : -1;
                $sbmtdCrncyID = getPssblValID($sbmtdCrncyNm, getLovID("Currencies"));
                $ttlQty = $varTtlQty;
                $nwQty = 0;
                $rmndPrtVal = $ttlQty;
                $ttlPrce = 0;
                $fnccurid = $sbmtdCrncyID;
                $fnccurnm = $sbmtdCrncyNm;
                if ($sbmtdCrncyID <= 0) {
                    $fnccurid = getOrgFuncCurID($orgID);
                    $fnccurnm = getPssblValNm($fnccurid);
                }
                ?>
                <div class="row">
                    <div class="col-md-12">
                        <table class="table table-striped table-bordered table-responsive" id="oneVmsQtyBrkDwnTable" cellspacing="0" width="100%" style="width:100%;min-width: 300px !important;">
                            <thead>
                                <tr>
                                    <th>No.</th>
                                    <th>UOM</th>
                                    <th style="text-align: right;">UOM QTY</th>
                                    <th style="text-align: right;">EQUIV BASE QTY</th>
                                    <th style="text-align: right;">Total Value</th>
                                </tr>
                            </thead>
                            <tbody>
                                <?php
                                $cntr = 0;
                                $crncyID = $fnccurid;
                                $crncyIDNm = $fnccurnm;
                                $whlPrtVal = 0;
                                $rngSum = 0;
                                $cnvrtdQty = 0;
                                $result = getUomBrkDwn($itemID);
                                while ($row = loc_db_fetch_array($result)) {
                                    $cntr++;
                                    $cnvsnFctr = $row[4];
                                    if ($rngSum == $ttlQty) {
                                        $cnvrtdQty = 0;
                                        $whlPrtVal = 0;
                                    } else {
                                        if ($rmndPrtVal >= $cnvsnFctr) {
                                            $whlPrt = (int) ($rmndPrtVal / $cnvsnFctr);
                                            $rmndPrt = $rmndPrtVal % $cnvsnFctr;
                                            if ($whlPrt > 0) {
                                                $whlPrtVal = $whlPrt;
                                                $cnvrtdQty = $whlPrtVal * $cnvsnFctr;
                                            }
                                            if ($rmndPrt > 0) {
                                                $rmndPrtVal = $rmndPrt;
                                            }
                                        } else {
                                            $cnvrtdQty = 0;
                                            $whlPrtVal = 0;
                                        }
                                        $rngSum = $rngSum + $cnvrtdQty;
                                    }
                                    $ttlPrce += $whlPrtVal * ($row[6]);
                                    $nwQty += $cnvrtdQty;
                                    ?>
                                    <tr id="oneVmsQtyBrkRow_<?php echo $cntr; ?>">                                    
                                        <td class="lovtd"><span><?php echo ($cntr); ?></span></td>
                                        <td class="lovtd">
                                            <span><?php echo $row[1] ?></span>
                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsQtyBrkRow<?php echo $cntr; ?>_ItmUomID" value="<?php echo $row[2]; ?>" style="width:100% !important;">
                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsQtyBrkRow<?php echo $cntr; ?>_UntVal" value="<?php echo $row[6]; ?>" style="width:100% !important;">
                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsQtyBrkRow<?php echo $cntr; ?>_CnvFctr" value="<?php echo $row[4]; ?>" style="width:100% !important;">                                                                                                
                                        </td>
                                        <td class="lovtd" style="text-align: right;">
                                            <input type="text" class="form-control vmsUmbQty" aria-label="..." id="oneVmsQtyBrkRow<?php echo $cntr; ?>_BaseQty" name="oneVmsQtyBrkRow<?php echo $cntr; ?>_BaseQty" value="<?php
                                            echo number_format($whlPrtVal, 0);
                                            ?>"  onchange="calcUomBrkdwnRowVal('oneVmsQtyBrkRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsUomFormKeyPress(event, 'oneVmsQtyBrkRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;">   
                                        </td>
                                        <td class="lovtd" style="text-align: right;">
                                            <input type="text" class="form-control vmsUmbEqQty" aria-label="..." id="oneVmsQtyBrkRow<?php echo $cntr; ?>_EquivQty" name="oneVmsQtyBrkRow<?php echo $cntr; ?>_EquivQty" value="<?php
                                            echo number_format($cnvrtdQty, 0);
                                            ?>" style="width:100% !important;text-align: right;" readonly="true"> 
                                        </td>
                                        <td class="lovtd" style="text-align: right;">
                                            <input type="text" class="form-control vmsUmbTtl" aria-label="..." id="oneVmsQtyBrkRow<?php echo $cntr; ?>_TtlVal" name="oneVmsQtyBrkRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                            echo number_format($whlPrtVal * $row[6], 2);
                                            ?>" style="width:100% !important;text-align: right;" readonly="true">                                                    
                                        </td>
                                    </tr>
                                <?php } ?>
                            </tbody>
                            <tfoot>                                                            
                                <tr>
                                    <th>&nbsp;</th>
                                    <th>&nbsp;</th>
                                    <th>TOTALS:</th>
                                    <th style="text-align: right;">
                                        <?php
                                        echo "<span style=\"color:blue;\" id=\"myCptrdQtyTtlBtn\">" . number_format($nwQty, 0, '.', ',') . "</span>";
                                        ?>
                                        <input type="hidden" id="myCptrdQtyTtlVal" value="<?php echo $nwQty; ?>">
                                    </th>
                                    <th style="text-align: right;">
                                        <?php
                                        echo "<span style=\"color:blue;\" id=\"myCptrdUmValsTtlBtn\">" . number_format($ttlPrce, 2, '.', ',') . "</span>";
                                        ?>
                                        <input type="hidden" id="myCptrdUmValsTtlVal" value="<?php echo $ttlPrce; ?>">
                                    </th>
                                </tr>
                            </tfoot>
                        </table>   
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div style="float:right;">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-primary" onclick="applyNewVMSQtyVal(<?php echo $sbmtdRwNum; ?>, 'myFormsModalx', '<?php echo $rowIDAttrb; ?>');">Apply Changes</button>
                        </div>
                    </div>
                </div>
                <?php
            } else if ($vwtyp == 23) {
                $itemID = isset($_POST['sbmtdItemID']) ? cleanInputData($_POST['sbmtdItemID']) : 0;
                $varTtlQty = isset($_POST['varTtlQty']) ? cleanInputData($_POST['varTtlQty']) : 0;
                $sbmtdCrncyNm = isset($_POST['sbmtdCrncyNm']) ? cleanInputData($_POST['sbmtdCrncyNm']) : -1;
                $sbmtdCrncyID = getPssblValID($sbmtdCrncyNm, getLovID("Currencies"));
                $ttlQty = $varTtlQty;
                $nwQty = 0;
                $rmndPrtVal = $ttlQty;
                $ttlPrce = 0;
                $fnccurid = $sbmtdCrncyID;
                $fnccurnm = $sbmtdCrncyNm;
                if ($sbmtdCrncyID <= 0) {
                    $fnccurid = getOrgFuncCurID($orgID);
                    $fnccurnm = getPssblValNm($fnccurid);
                }
                ?>
                <div class="row">
                    <div class="col-md-12">
                        <table class="table table-striped table-bordered table-responsive" id="oneVmsQtyBrkDwnTable" cellspacing="0" width="100%" style="width:100%;min-width: 300px !important;">
                            <thead>
                                <tr>
                                    <th>No.</th>
                                    <th>UOM</th>
                                    <th style="text-align: right;">UOM QTY</th>
                                    <th style="text-align: right;">EQUIV BASE QTY</th>
                                    <th style="text-align: right;">Total Value</th>
                                </tr>
                            </thead>
                            <tbody>
                                <?php
                                $cntr = 0;
                                $crncyID = $fnccurid;
                                $crncyIDNm = $fnccurnm;
                                $whlPrtVal = 0;
                                $rngSum = 0;
                                $cnvrtdQty = 0;
                                $result = getUomBrkDwn($itemID);
                                while ($row = loc_db_fetch_array($result)) {
                                    $cntr++;
                                    $cnvsnFctr = $row[4];
                                    if ($rngSum == $ttlQty) {
                                        $cnvrtdQty = 0;
                                        $whlPrtVal = 0;
                                    } else {
                                        if ($rmndPrtVal >= $cnvsnFctr) {
                                            $whlPrt = (int) ($rmndPrtVal / $cnvsnFctr);
                                            $rmndPrt = $rmndPrtVal % $cnvsnFctr;
                                            if ($whlPrt > 0) {
                                                $whlPrtVal = $whlPrt;
                                                $cnvrtdQty = $whlPrtVal * $cnvsnFctr;
                                            }
                                            if ($rmndPrt > 0) {
                                                $rmndPrtVal = $rmndPrt;
                                            }
                                        } else {
                                            $cnvrtdQty = 0;
                                            $whlPrtVal = 0;
                                        }
                                        $rngSum = $rngSum + $cnvrtdQty;
                                    }
                                    $ttlPrce += $whlPrtVal * ($row[6]);
                                    $nwQty += $cnvrtdQty;
                                    ?>
                                    <tr id="oneVmsQtyBrkRow_<?php echo $cntr; ?>">                                    
                                        <td class="lovtd"><span><?php echo ($cntr); ?></span></td>
                                        <td class="lovtd">
                                            <span><?php echo $row[1] ?></span>
                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsQtyBrkRow<?php echo $cntr; ?>_ItmUomID" value="<?php echo $row[2]; ?>" style="width:100% !important;">
                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsQtyBrkRow<?php echo $cntr; ?>_UntVal" value="<?php echo $row[6]; ?>" style="width:100% !important;">
                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsQtyBrkRow<?php echo $cntr; ?>_CnvFctr" value="<?php echo $row[4]; ?>" style="width:100% !important;">                                                                                                
                                        </td>
                                        <td class="lovtd" style="text-align: right;">
                                            <span><?php echo number_format($whlPrtVal, 0); ?></span> 
                                        </td>
                                        <td class="lovtd" style="text-align: right;">
                                            <span><?php echo number_format($cnvrtdQty, 0); ?></span>
                                        </td>
                                        <td class="lovtd" style="text-align: right;">
                                            <span><?php echo number_format($whlPrtVal * $row[6], 2); ?></span>                                                  
                                        </td>
                                    </tr>
                                <?php } ?>
                            </tbody>
                            <tfoot>                                                            
                                <tr>
                                    <th>&nbsp;</th>
                                    <th>&nbsp;</th>
                                    <th>TOTALS:</th>
                                    <th style="text-align: right;">
                                        <?php
                                        echo "<span style=\"color:blue;\" id=\"myCptrdQtyTtlBtn\">" . number_format($nwQty, 0, '.', ',') . "</span>";
                                        ?>
                                        <input type="hidden" id="myCptrdQtyTtlVal" value="<?php echo $nwQty; ?>">
                                    </th>
                                    <th style="text-align: right;">
                                        <?php
                                        echo "<span style=\"color:blue;\" id=\"myCptrdUmValsTtlBtn\">" . number_format($ttlPrce, 2, '.', ',') . "</span>";
                                        ?>
                                        <input type="hidden" id="myCptrdUmValsTtlVal" value="<?php echo $ttlPrce; ?>">
                                    </th>
                                </tr>
                            </tfoot>
                        </table>   
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div style="float:right;">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
                <?php
            } else if ($vwtyp == 24) {
                /* All Attached Documents */
                $sbmtdVmsTrnsHdrID = isset($_POST['sbmtdVmsTrnsHdrID']) ? cleanInputData($_POST['sbmtdVmsTrnsHdrID']) : -1;
                $trnsType = isset($_POST['trnsType']) ? cleanInputData($_POST['trnsType']) : "";
                if (!$canAddTrns || ($sbmtdVmsTrnsHdrID > 0 && !$canEdtTrns)) {
                    restricted();
                    exit();
                }
                $pkID = $sbmtdVmsTrnsHdrID;
                $total = get_Total_VMSAttachments($srchFor, $pkID);
                if ($pageNo > ceil($total / $lmtSze)) {
                    $pageNo = 1;
                } else if ($pageNo < 1) {
                    $pageNo = ceil($total / $lmtSze);
                }
                $curIdx = $pageNo - 1;
                $attchSQL = "";
                $result2 = get_VMSAttachments($srchFor, $curIdx, $lmtSze, $pkID, $attchSQL);
                $colClassType1 = "col-lg-2";
                $colClassType2 = "col-lg-3";
                $colClassType3 = "col-lg-4";
                ?>       
                <fieldset class="" style="padding:10px 0px 5px 0px !important;">
                    <form class="" id="attchdVMSDocsTblForm">
                        <div class="row">
                            <?php
                            $nwRowHtml = urlencode("<tr id=\"attchdVMSDocsRow__WWW123WWW\">"
                                    . "<td class=\"lovtd\"><span>New</span></td>"
                                    . "<td class=\"lovtd\">
                                              <div class=\"form-group form-group-sm\" style=\"width:100% !important;\">
                                              <div class=\"input-group\" style=\"width:100% !important;\">
                                                <input type=\"text\" class=\"form-control\" aria-label=\"...\" id=\"attchdVMSDocsRow_WWW123WWW_DocCtgryNm\" value=\"\">
                                                <input class=\"form-control\" aria-label=\"...\" id=\"attchdVMSDocsRow_WWW123WWW_DocFile\" type=\"file\" style=\"visibility:hidden;height:5px !important;display:none;\" />     
                                                <label class=\"btn btn-primary btn-file input-group-addon\" onclick=\"getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Attachment Document Categories', '', '', '', 'radio', true, '', 'attchdVMSDocsRow_WWW123WWW_DocCtgryNm', 'attchdVMSDocsRow_WWW123WWW_DocCtgryNm', 'clear', 0, '');\">
                                                    <span class=\"glyphicon glyphicon-th-list\"></span>
                                                </label>
                                              </div>
                                              </div>
                                              <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"attchdVMSDocsRow_WWW123WWW_AttchdVMSDocsID\" value=\"-1\" style=\"\">                                               
                                          </td>
                                          <td class=\"lovtd\">
                                                <button type=\"button\" class=\"btn btn-default\" style=\"margin: 0px !important;padding:0px 3px 2px 4px !important;\" onclick=\"uploadFileToVMSDocs('attchdVMSDocsRow_WWW123WWW_DocFile','attchdVMSDocsRow_WWW123WWW_AttchdVMSDocsID','attchdVMSDocsRow_WWW123WWW_DocCtgryNm'," . $pkID . ",'attchdVMSDocsRow__WWW123WWW');\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Download Document\">
                                                    <img src=\"cmn_images/openfileicon.png\" style=\"height:15px; width:auto; position: relative; vertical-align: middle;\"> Upload
                                                </button>
                                          </td>
                                          <td class=\"lovtd\">
                                                <button type=\"button\" class=\"btn btn-default\" style=\"margin: 0px !important;padding:0px 3px 2px 4px !important;\" onclick=\"delAttchdVMSDoc('attchdVMSDocsRow__WWW123WWW');\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Delete Document\">
                                                    <img src=\"cmn_images/no.png\" style=\"height:15px; width:auto; position: relative; vertical-align: middle;\">
                                                </button>
                                          </td>
                                        </tr>");
                            ?> 
                            <div class="<?php echo $colClassType3; ?>" style="padding:0px 1px 0px 1px !important;"> 
                                <div class="col-md-12">
                                    <button type="button" class="btn btn-default" style="margin-bottom: 5px;" onclick="insertNewRowBe4('attchdVMSDocsTable', 0, '<?php echo $nwRowHtml; ?>');" style="width:100% !important;">
                                        <img src="cmn_images/add1-64.png" style="left: 0.5%; padding-right: 5px; height:20px; width:auto; position: relative; vertical-align: middle;">
                                        New Document
                                    </button>
                                </div>
                            </div>
                            <div class="<?php echo $colClassType2; ?>" style="padding:0px 15px 0px 15px !important;">
                                <div class="input-group">
                                    <input class="form-control" id="attchdVMSDocsSrchFor" type = "text" placeholder="Search For" value="<?php
                                    echo trim(str_replace("%", " ", $srchFor));
                                    ?>" onkeyup="enterKeyFuncAttchdVMSDocs(event, '', '#myFormsModalyBody', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&sbmtdVmsTrnsHdrID=<?php echo $sbmtdVmsTrnsHdrID; ?>&trnsType=<?php echo $trnsType; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                    <input id="attchdVMSDocsPageNo" type = "hidden" value="<?php echo $pageNo; ?>">
                                    <label class="btn btn-primary btn-file input-group-addon" onclick="getAttchdVMSDocs('clear', '#myFormsModalyBody', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&sbmtdVmsTrnsHdrID=<?php echo $sbmtdVmsTrnsHdrID; ?>&trnsType=<?php echo $trnsType; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                        <span class="glyphicon glyphicon-remove"></span>
                                    </label>
                                    <label class="btn btn-primary btn-file input-group-addon" onclick="getAttchdVMSDocs('', '#myFormsModalyBody', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&sbmtdVmsTrnsHdrID=<?php echo $sbmtdVmsTrnsHdrID; ?>&trnsType=<?php echo $trnsType; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                        <span class="glyphicon glyphicon-search"></span>
                                    </label> 
                                </div>
                            </div>
                            <div class="<?php echo $colClassType2; ?>">
                                <div class="input-group">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-filter"></span></span>

                                    <span class="input-group-addon" style="max-width: 1px !important;padding:0px !important;width:1px !important;border:none !important;"></span>
                                    <select data-placeholder="Select..." class="form-control chosen-select" id="attchdVMSDocsDsplySze" style="min-width:70px !important;">                            
                                        <?php
                                        $valslctdArry = array("", "", "", "", "",
                                            "", "", "");
                                        $dsplySzeArry = array(1, 5, 10, 15, 30, 50,
                                            100, 500, 1000);
                                        for ($y = 0; $y < count($dsplySzeArry); $y++) {
                                            if ($lmtSze == $dsplySzeArry[$y]) {
                                                $valslctdArry[$y] = "selected";
                                            } else {
                                                $valslctdArry[$y] = "";
                                            }
                                            ?>
                                            <option value="<?php echo $dsplySzeArry[$y]; ?>" <?php echo $valslctdArry[$y]; ?>><?php echo $dsplySzeArry[$y]; ?></option>                            
                                            <?php
                                        }
                                        ?>
                                    </select>
                                </div>
                            </div>
                            <div class="<?php echo $colClassType1; ?>">
                                <nav aria-label="Page navigation">
                                    <ul class="pagination" style="margin: 0px !important;">
                                        <li>
                                            <a class="rhopagination" href="javascript:getAttchdVMSDocs('previous', '#myFormsModalyBody', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&sbmtdVmsTrnsHdrID=<?php echo $sbmtdVmsTrnsHdrID; ?>&trnsType=<?php echo $trnsType; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Previous">
                                                <span aria-hidden="true">&laquo;</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="rhopagination" href="javascript:getAttchdVMSDocs('next', '#myFormsModalyBody', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&sbmtdVmsTrnsHdrID=<?php echo $sbmtdVmsTrnsHdrID; ?>&trnsType=<?php echo $trnsType; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Next">
                                                <span aria-hidden="true">&raquo;</span>
                                            </a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                        <div class="row"> 
                            <div class="col-md-12">
                                <table class="table table-striped table-bordered table-responsive" id="attchdVMSDocsTable" cellspacing="0" width="100%" style="width:100%;min-width: 400px !important;">
                                    <thead>
                                        <tr>
                                            <th>No.</th>
                                            <th>Doc. Name/Description</th>
                                            <th>&nbsp;</th>
                                            <th>&nbsp;</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <?php
                                        $cntr = 0;
                                        while ($row2 = loc_db_fetch_array($result2)) {
                                            $cntr += 1;
                                            $doc_src = $ftp_base_db_fldr . "/Vms/" . $row2[3];
                                            $doc_src_encrpt = encrypt1($doc_src, $smplTokenWord1);
                                            if (file_exists($doc_src)) {
                                                //file exists!
                                            } else {
                                                //file does not exist.
                                                $doc_src_encrpt = "None";
                                            }
                                            ?>
                                            <tr id="attchdVMSDocsRow_<?php echo $cntr; ?>">                                    
                                                <td class="lovtd"><span><?php echo ($curIdx * $lmtSze) + ($cntr); ?></span></td>
                                                <td class="lovtd">                                                                   
                                                    <span><?php echo $row2[2]; ?></span>
                                                    <input type="hidden" class="form-control" aria-label="..." id="attchdVMSDocsRow<?php echo $cntr; ?>_AttchdVMSDocsID" value="<?php echo $row2[0]; ?>" style="width:100% !important;">                                              
                                                </td>
                                                <td class="lovtd">
                                                    <?php
                                                    if ($doc_src_encrpt == "None") {
                                                        ?>
                                                        <span style="font-weight: bold;color:#FF0000;">
                                                            <?php
                                                            echo "File Not Found!";
                                                            ?>
                                                        </span>
                                                        <?php
                                                    } else {
                                                        ?>
                                                        <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="doAjax('grp=1&typ=11&q=Download&fnm=<?php echo $doc_src_encrpt; ?>', '', 'Redirect', '', '', '');" data-toggle="tooltip" data-placement="bottom" title="Download Document">
                                                            <img src="cmn_images/dwldicon.png" style="height:15px; width:auto; position: relative; vertical-align: middle;"> Download
                                                        </button>
                                                    <?php } ?>
                                                </td>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delAttchdVMSDoc('attchdVMSDocsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete Document">
                                                        <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            </tr>
                                            <?php
                                        }
                                        ?>
                                    </tbody>
                                </table>
                            </div>                     
                        </div>
                    </form>
                </fieldset>         
                <?php
            } else if ($vwtyp == 26) {
                header("content-type:application/json");
                $sbmtdItemID = isset($_POST['sbmtdItemID']) ? (float) cleanInputData($_POST['sbmtdItemID']) : 0;

                $srcVltID = isset($_POST['srcVltID']) ? (float) cleanInputData($_POST['srcVltID']) : -1;
                $lnSrcCageID = isset($_POST['lnSrcCageID']) ? (float) cleanInputData($_POST['lnSrcCageID']) : -1;
                $lnSrcItmState = isset($_POST['lnSrcItmState']) ? cleanInputData($_POST['lnSrcItmState']) : "";
                if ($lnSrcCageID > 0) {
                    $srcVltID = (float) getGnrlRecNm("inv.inv_shelf", "line_id", "store_id", $lnSrcCageID);
                }
                if ($lnSrcItmState == "") {
                    $lnSrcItmState = getGnrlRecNm("inv.inv_shelf", "line_id", "dflt_item_state", $lnSrcCageID);
                }
                $dstVltID = isset($_POST['dstVltID']) ? (float) cleanInputData($_POST['dstVltID']) : -1;
                $lnDstCageID = isset($_POST['lnDstCageID']) ? (float) cleanInputData($_POST['lnDstCageID']) : -1;
                $lnDstItmState = isset($_POST['lnDstItmState']) ? cleanInputData($_POST['lnDstItmState']) : "";
                if ($lnDstCageID > 0) {
                    $dstVltID = (float) getGnrlRecNm("inv.inv_shelf", "line_id", "store_id", $lnDstCageID);
                }
                if ($lnDstItmState == "") {
                    $lnDstItmState = getGnrlRecNm("inv.inv_shelf", "line_id", "dflt_item_state", $lnDstCageID);
                }
                $itmUnitVal = (float) getGnrlRecNm("inv.inv_itm_list", "item_id", "orgnl_selling_price", $sbmtdItemID);

                $arr_content['UnitVal'] = $itmUnitVal;
                $arr_content['BaseUoMID'] = (int) getGnrlRecNm("inv.inv_itm_list", "item_id", "base_uom_id", $sbmtdItemID);
                $arr_content['SrcBalsB4'] = getStoreLstTotBls($srcVltID, $lnSrcCageID, $sbmtdItemID, $lnSrcItmState) * $itmUnitVal;
                $arr_content['DstBalsB4'] = getStoreLstTotBls($dstVltID, $lnDstCageID, $sbmtdItemID, $lnDstItmState) * $itmUnitVal;
                $arr_content['SrcItmState'] = $lnSrcItmState;
                $arr_content['DstItmState'] = $lnDstItmState;
                $arr_content['UnitVal'] = $itmUnitVal;
                $arr_content['BaseUoMID'] = (int) getGnrlRecNm("inv.inv_itm_list", "item_id", "base_uom_id", $sbmtdItemID);

                $errMsg = "Success";
                $arr_content['message'] = "<span style=\"color:green;\"><i class=\"fa fa-check\" aria-hidden=\"true\"></i></span>" . $errMsg;
                echo json_encode($arr_content);
                exit();
            } else if ($vwtyp == 28) {
                //var_dump($_POST);
                $sbmtdVmsTrnsHdrID = isset($_POST['sbmtdVmsTrnsHdrID']) ? cleanInputData($_POST['sbmtdVmsTrnsHdrID']) : -1;
                $trnsType = isset($_POST['trnsType']) ? cleanInputData($_POST['trnsType']) : "";
                $dfltSrcItemState = $trnsTypeDfltItmState[findArryIdx($trnsTypes, $trnsType)];
                $dfltDstItemState = $dfltSrcItemState;
                $crncyIDNm = isset($_POST['crncyIDNm']) ? cleanInputData($_POST['crncyIDNm']) : "";
                $crncyID = getPssblValID($crncyIDNm, getLovID("Currencies"));
                $destCageID = isset($_POST['destCageID']) ? cleanInputData($_POST['destCageID']) : -1;
                $destCageNm = getGnrlRecNm("inv.inv_shelf", "line_id", "shelve_name", $destCageID);
                $srcCageID = isset($_POST['srcCageID']) ? cleanInputData($_POST['srcCageID']) : -1;
                $srcCageNm = getGnrlRecNm("inv.inv_shelf", "line_id", "shelve_name", $srcCageID);
                $rqStatus = getGnrlRecNm("vms.vms_transactions_hdr", "trans_hdr_id", "approval_status", $sbmtdVmsTrnsHdrID);
                $voidedTrnsHdrID = (float) getGnrlRecNm("vms.vms_transactions_hdr", "trans_hdr_id", "voided_trns_hdr_id", $sbmtdVmsTrnsHdrID);
                $destVltID = isset($_POST['vmsDfltDestVltID']) ? cleanInputData($_POST['vmsDfltDestVltID']) : -1;
                $srcVltID = isset($_POST['vmsDfltSrcVltID']) ? cleanInputData($_POST['vmsDfltSrcVltID']) : -1;
                $vmsTrnsDesc = isset($_POST['vmsTrnsDesc']) ? cleanInputData($_POST['vmsTrnsDesc']) : "";
                $sbmtdItmID = isset($_POST['sbmtdItmID']) ? cleanInputData($_POST['sbmtdItmID']) : -1;
                //$itmCtgryID = getGnrlRecNm("inv.inv_itm_list", "item_id", "category_id", $sbmtdItmID);
                //$itmCtgry = getGnrlRecNm("inv.inv_product_categories", "cat_id", "cat_name", $itmCtgryID);

                $mkReadOnly = "";
                $mkRmrkReadOnly = "";

                $extrInputFlds = "";
                $capturedItemIDs = "";
                if ($srcCageID > 0) {
                    $dfltSrcItemState = getGnrlRecNm("inv.inv_shelf", "line_id", "dflt_item_state", $srcCageID);
                }
                if ($destCageID > 0) {
                    $dfltDstItemState = getGnrlRecNm("inv.inv_shelf", "line_id", "dflt_item_state", $destCageID);
                }
                if (!$canAddTrns || ($sbmtdVmsTrnsHdrID > 0 && !$canEdtTrns)) {
                    restricted();
                    exit();
                }
                $orgnlVmsTrnsHdrID = $sbmtdVmsTrnsHdrID;
                if ($crncyID <= 0) {
                    $fnccurid = getOrgFuncCurID($orgID);
                    $fnccurnm = getPssblValNm($fnccurid);
                    $crncyID = $fnccurid;
                }
                $trayCnvFctr = 0;
                $bndlCnvFctr = 0;
                $curRslt = get_All_Crncies($crncyID, "Note");
                while ($rowCur = loc_db_fetch_array($curRslt)) {
                    $itmID = (int) $rowCur[0];
                    $trayCnvFctr = getUomCnvrsnFctr($itmID, "tray");
                    $bndlCnvFctr = getUomCnvrsnFctr($itmID, "bundle");
                }
                $dsplyLnRemark = "";

                $dsplyNwLine = "";
                $dsplyPymntInfo = "display:none;";
                $dsplyPymntCls1 = "col-md-12";
                $dsplyPymntCls2 = "";
                $dsplyPymntCls3 = "col-md-6";
                $dsplyPymntCls4 = "col-md-3";
                $srcVltCageDsply = "";
                $dstVltCageDsply = "";
                $srcCageColDsply = "display:none;";
                $dstCageColDsply = "";
                $dsplySrcItemState = "display:none;";
                $dsplyDstItemState = "display:none;";
                $dsplySrcBalance = "";
                $dsplyDstBalance = "";
                $isSrcDstCagesRqrd = "rqrdFld";
                $dsplyTrays = "";
                $dsplyBundles = "";
                if ($trnsType == $trnsTypes[2] || $trnsType == $trnsTypes[3]) {
                    $srcCageColDsply = "";
                    $dstCageColDsply = "";
                    $dsplyDstBalance = "";
                    $dsplySrcBalance = "";
                } else if ($trnsType == $trnsTypes[8] || $trnsType == $trnsTypes[9] || $trnsType == $trnsTypes[6]) {
                    $dsplyNwLine = "display:none;";
                    $dsplyPymntInfo = "";
                    $dsplyPymntCls1 = "col-md-6";
                    $dsplyPymntCls2 = "col-md-6";
                    $dsplyPymntCls3 = "col-md-8";
                    $dsplyPymntCls4 = "col-md-4";
                    $srcCageColDsply = "display:none;";
                    $dstCageColDsply = "display:none;";
                    if ($trnsType == $trnsTypes[8]) {
                        $srcVltCageDsply = "";
                        $dsplySrcBalance = "";
                        $dstVltCageDsply = "display:none;";
                        $dsplyDstBalance = "display:none;";
                    } else if ($trnsType == $trnsTypes[9]) {
                        $dsplySrcBalance = "display:none;";
                        $srcVltCageDsply = "display:none;";
                        $dstVltCageDsply = "";
                        $dsplyDstBalance = "";
                    } else if ($trnsType == $trnsTypes[6]) {
                        $srcVltCageDsply = "display:none;";
                        $dstVltCageDsply = "";
                        $srcCageColDsply = "display:none;";
                        $dstCageColDsply = "";
                        $dsplySrcBalance = "display:none;";
                        $dsplyDstBalance = "";
                    }
                } else if ($trnsType == $trnsTypes[10]) {
                    $srcVltCageDsply = "display:none;";
                    $dstVltCageDsply = "";
                    $srcCageColDsply = "display:none;";
                    $dstCageColDsply = "";
                    $dsplySrcBalance = "display:none;";
                    $dsplyDstBalance = "";
                    /* $srcVltCageDsply = "";
                      $dstVltCageDsply = "";
                      $srcCageColDsply = "";
                      $dstCageColDsply = ""; */
                    $isSrcDstCagesRqrd = "rqrdFld";
                    $dsplySrcItemState = "";
                    $dsplyDstItemState = "";
                    $dsplyLnRemark = "display:none;";
                } else if ($trnsType == $trnsTypes[11] || $trnsType == $trnsTypes[0] || $trnsType == $trnsTypes[1] || $trnsType == $trnsTypes[3]) {
                    $srcVltCageDsply = "";
                    $dstVltCageDsply = "";
                    $srcCageColDsply = "";
                    $dstCageColDsply = "";
                    $isSrcDstCagesRqrd = "";
                } else if ($trnsType == $trnsTypes[4]) {
                    $srcVltCageDsply = "display:none;";
                    $dstVltCageDsply = "";
                    $srcCageColDsply = "display:none;";
                    $dstCageColDsply = "display:none;";
                    $dsplySrcBalance = "display:none;";
                    $dsplyDstBalance = "";
                } else if ($trnsType == $trnsTypes[5]) {
                    $srcVltCageDsply = "";
                    $dstVltCageDsply = "display:none;";
                    $srcCageColDsply = "display:none;";
                    $dstCageColDsply = "display:none;";
                    $dsplySrcBalance = "";
                    $dsplyDstBalance = "display:none;";
                } else if ($trnsType == $trnsTypes[7] || $trnsType == $trnsTypes[12]) {
                    $srcVltCageDsply = "";
                    $dstVltCageDsply = "display:none;";
                    $srcCageColDsply = "";
                    $dstCageColDsply = "display:none;";
                    $dsplySrcBalance = "";
                    $dsplyDstBalance = "display:none;";
                    if ($trnsType == $trnsTypes[12]) {
                        $dsplyTrays = "display:none;";
                        $dsplyBundles = "display:none;";
                    }
                } else if ($trnsType == $trnsTypes[13]) {
                    $srcVltCageDsply = "display:none;";
                    $dstVltCageDsply = "";
                    $srcCageColDsply = "display:none;";
                    $dstCageColDsply = "";
                    $dsplySrcBalance = "display:none;";
                    $dsplyDstBalance = "";
                    $dsplyTrays = "display:none;";
                    $dsplyBundles = "display:none;";
                }
                $cashExpnsCls = "hideNotice";
                $cashItmsNotesCls = "active";
                if ($trnsType == $trnsTypes[12] || $trnsType == $trnsTypes[13]) {
                    $cashItmsNotesCls = "hideNotice";
                    $cashExpnsCls = "active";
                }
                ?>                 
                <div class="tab-content" style="padding:5px !important;padding-top:7px !important;">
                    <div id="cashItmsExpns" class="tab-pane fadein <?php echo $cashExpnsCls; ?>" style="border:none !important;padding:0px !important;">
                        <div class="row">
                            <div class="col-md-12">
                                <table class="table table-striped table-bordered table-responsive" id="oneVmsExpnsTrnsLnsTable" cellspacing="0" width="100%" style="width:100%;min-width: 900px !important;">
                                    <thead>
                                        <tr>
                                            <th>No.</th>
                                            <th style="">Narration/Remark</th>
                                            <th>CUR.</th>
                                            <th>Entered Amount</th>
                                            <th style="min-width:300px;width:300px;">GL Transaction Account</th>
                                            <th style="">Payment Currency Exchange Rate</th>
                                            <th>&nbsp;</th>
                                        </tr>
                                    </thead>
                                    <tbody>                                                                                                        
                                        <?php
                                        $ttlPrce = 0;
                                        if ($trnsType == $trnsTypes[12] || $trnsType == $trnsTypes[13]) {
                                            $cntr = 0;
                                            $resultRw = get_One_PtCshExpnsLines($sbmtdVmsTrnsHdrID);
                                            $maxNoRows = loc_db_num_rows($resultRw);
                                            $excludedItems = "";
                                            while ($cntr < $maxNoRows) {
                                                $ptycshLineID = -1;
                                                $ptycshLineDesc = "";
                                                $entrdCurID = -1;
                                                $entrdAmnt = 0.00;
                                                $entrdCurNm = "";
                                                $expnsAcntID = -1;
                                                $expnsAcntNm = -1;
                                                $acntCrncyRate = 0;
                                                if ($rowRw = loc_db_fetch_array($resultRw)) {
                                                    $ptycshLineID = (float) $rowRw[0];
                                                    $ptycshLineDesc = $rowRw[2];
                                                    $entrdCurID = (int) $rowRw[11];
                                                    $entrdAmnt = (float) $rowRw[3];
                                                    $entrdCurNm = $rowRw[12];
                                                    $expnsAcntID = $rowRw[7];
                                                    $expnsAcntNm = $rowRw[22];
                                                    $acntCrncyRate = (float) $rowRw[18];
                                                    $ttlPrce += $entrdAmnt * $acntCrncyRate;
                                                }
                                                $cntr += 1;
                                                ?>
                                                <tr id="oneVmsExpnsTrnsRow_<?php echo $cntr; ?>">                                    
                                                    <td class="lovtd"><span><?php echo ($cntr); ?></span></td>                                              
                                                    <td class="lovtd"  style="">
                                                        <input type="text" class="form-control rqrdFld vmsExpDesc" aria-label="..." id="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_LineDesc" name="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_LineDesc" value="<?php echo $ptycshLineDesc; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?> onkeypress="gnrlFldKeyPress(event, 'oneVmsExpnsTrnsRow<?php echo $cntr; ?>_LineDesc', 'oneVmsExpnsTrnsLnsTable', 'vmsExpDesc');">                                                    
                                                    </td>                                                  
                                                    <td class="lovtd">
                                                        <div class="" style="width:100% !important;">
                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TrnsCurNm" name="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TrnsCurNm" value="<?php echo $entrdCurNm; ?>" readonly="true" style="width:100% !important;">
                                                            <label class="btn btn-primary btn-file" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Currencies', '', '', '', 'radio', true, '', 'oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TrnsCurNm', '', 'clear', 1, '', function () {
                                                                        $('#oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TrnsCurNm1').html($('#oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TrnsCurNm').val());
                                                                    });">
                                                                <span class="" id="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TrnsCurNm1"><?php echo $entrdCurNm; ?></span>
                                                            </label>
                                                        </div>                                              
                                                    </td>
                                                    <td class="lovtd">
                                                        <input type="text" class="form-control rqrdFld vmsExpTtl" aria-label="..." id="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                                        echo number_format($entrdAmnt, 2);
                                                        ?>" onkeypress="gnrlFldKeyPress(event, 'oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TtlVal', 'oneVmsExpnsTrnsLnsTable', 'vmsExpTtl');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?> onchange="calcAllExpnsTrnsTtl();">                                                    
                                                    </td>
                                                    <td class="lovtd">
                                                        <div class="input-group" style="width:100% !important;">
                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_AccountNm" name="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_AccountNm" value="<?php echo $expnsAcntNm; ?>" readonly="true" style="width:100% !important;">
                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_AccountID" value="<?php echo $expnsAcntID; ?>" style="width:100% !important;">  
                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $ptycshLineID; ?>" style="width:100% !important;">                                                      
                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Cheque Clearing Accounts', 'gnrlVmsOrgID', '', '', 'radio', true, '', 'oneVmsExpnsTrnsRow<?php echo $cntr; ?>_AccountID', 'oneVmsExpnsTrnsRow<?php echo $cntr; ?>_AccountNm', 'clear', 1, '', function () {

                                                                    });">
                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                            </label>
                                                        </div>                                               
                                                    </td>
                                                    <td class="lovtd" style="">
                                                        <input type="text" class="form-control rqrdFld vmsExpRt" aria-label="..." id="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_ExchgRate" name="oneVmsExpnsTrnsRow<?php echo $cntr; ?>_ExchgRate" value="<?php
                                                        echo number_format($acntCrncyRate, 15);
                                                        ?>" onkeypress="gnrlFldKeyPress(event, 'oneVmsExpnsTrnsRow<?php echo $cntr; ?>_ExchgRate', 'oneVmsExpnsTrnsLnsTable', 'vmsExpRt');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?> onchange="calcAllExpnsTrnsTtl();">                                                    
                                                    </td> 
                                                    <td class="lovtd">
                                                        <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsExpnsTrnsLine('oneVmsExpnsTrnsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete GL Trns. Line">
                                                            <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                        </button>
                                                    </td>
                                                </tr>
                                                <?php
                                            }
                                        }
                                        ?>
                                    </tbody>
                                    <tfoot>                                                            
                                        <tr>
                                            <th>&nbsp;</th>
                                            <th>TOTALS:</th>
                                            <th style=""><?php echo $crncyIDNm; ?></th>
                                            <th style="text-align: right;">
                                                <?php
                                                echo "<span style=\"color:red;font-weight:bold;font-size:14px;\" id=\"myCptrdExpnsTtlBtn\">" . number_format($ttlPrce,
                                                        2, '.', ',') . "</span>";
                                                ?>
                                                <input type="hidden" id="myCptrdExpnsTtlVal" value="<?php echo $ttlPrce; ?>">
                                            </th>
                                            <th style="">&nbsp;</th>                                           
                                            <th style="">&nbsp;</th>
                                            <th style="">&nbsp;</th>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div id="cashItmsNotes" class="tab-pane fadein  <?php echo $cashItmsNotesCls; ?>" style="border:none !important;padding:0px !important;">
                        <div class="row">
                            <div class="col-md-12">
                                <table class="table table-striped table-bordered table-responsive" id="oneVmsTrnsLnsTable" cellspacing="0" width="100%" style="width:100%;min-width: 900px !important;">
                                    <thead>
                                        <tr>
                                            <!--<th>No.</th>-->
                                            <th style="max-width:100px;width:100px;">Denomination</th>
                                            <th style="<?php echo $srcCageColDsply; ?>max-width:70px;width:70px;">Src. Cage</th>
                                            <th style="<?php echo $dstCageColDsply; ?>max-width:70px;width:70px;">Dest. Cage</th>
                                            <th style="<?php echo $dsplyLnRemark; ?>">Narration/Remark</th>
                                            <th style="text-align: center;max-width:70px;width:70px;<?php echo $dsplyTrays; ?>">Trays</th>
                                            <th style="text-align: center;max-width:70px;width:70px;<?php echo $dsplyBundles; ?>">Bundles</th>
                                            <!--<th style="display:none;">Pieces</th>-->
                                            <th>UOM</th>
                                            <th>Total Value</th>
                                            <th style="<?php echo $dsplyPymntInfo; ?>">Payment Currency Exchange Rate</th>
                                            <th style="<?php echo $dsplySrcBalance; ?>">Source Cage Running Balance</th>
                                            <th style="<?php echo $dsplyDstBalance; ?>">Destination Cage Running Balance</th>
                                            <th style="<?php echo $dsplySrcItemState; ?>">Source Cage Money Type</th>
                                            <th style="<?php echo $dsplyDstItemState; ?>">Destination Cage Money Type</th>
                                            <th>&nbsp;</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <?php
                                        $cntr = 0;
                                        $resultRw = get_One_VMSTrnsLines($sbmtdVmsTrnsHdrID, $sbmtdItmID, "Note");
                                        $maxNoRows = loc_db_num_rows($resultRw);
                                        $excludedItems = "";
                                        while ($cntr < $maxNoRows) {
                                            $itemID = -1;
                                            $trnsLnID = -1;
                                            $itemName = "";
                                            $baseUOMID = -1;
                                            $unitVal = 0.00;
                                            $qty = 0.00;
                                            $baseUOMNm = "";
                                            $ttlRowVal = 0.00;
                                            $srcItemState = $dfltSrcItemState;
                                            $dstItemState = $dfltDstItemState;
                                            $funcCrncyRate = 0;
                                            $lineDesc = "";
                                            $srcRunningBalance = 0;
                                            $dstRunningBalance = 0;
                                            $srcCageID1 = -1;
                                            $destCageID1 = -1;
                                            $srcCageNm1 = "";
                                            $destCageNm1 = "";
                                            if ($rowRw = loc_db_fetch_array($resultRw)) {
                                                $trnsLnID = (float) $rowRw[0];
                                                $itemID = (int) $rowRw[2];
                                                $lineDesc = $rowRw[36];
                                                $srcRunningBalance = (float) $rowRw[35];
                                                $dstRunningBalance = (float) $rowRw[37];
                                                $excludedItems .= $itemID . ", ";
                                                $itemName = $rowRw[29];
                                                $unitVal = (float) $rowRw[9];
                                                $baseUOMNm = $rowRw[31];
                                                $baseUOMID = (int) $rowRw[26];
                                                $qty = (float) $rowRw[7];
                                                $tray = (float) $rowRw[46];
                                                $bundle = (float) $rowRw[47];
                                                $ttlRowVal = $qty * $unitVal;
                                                if ($trnsLnID > 0) {
                                                    $srcItemState = $rowRw[27];
                                                    $dstItemState = $rowRw[34];
                                                } else {
                                                    $srcItemState = $dfltSrcItemState;
                                                    $dstItemState = $dfltDstItemState;
                                                }
                                                $funcCrncyRate = (float) $rowRw[21];
                                                $srcCageID1 = (int) $rowRw[4];
                                                $destCageID1 = (int) $rowRw[6];
                                                $srcCageNm1 = $rowRw[39];
                                                $destCageNm1 = $rowRw[41];
                                            }
                                            $cntr += 1;
                                            //echo $srcCageNm1.":".$destCageNm1;
                                            ?>
                                            <tr id="oneVmsTrnsRow_<?php echo $cntr; ?>">                                    
                                                <!--<td class="lovtd"><span><?php echo ($cntr); ?></span></td>-->
                                                <td class="lovtd">
                                                    <div class="input-group" style="width:100% !important;">
                                                        <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm" name="oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm" value="<?php echo $itemName; ?>" readonly="true" style="width:100% !important;">
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_ItmID" value="<?php echo $itemID; ?>" style="width:100% !important;">
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_BaseUoMID" value="<?php echo $baseUOMID; ?>" style="width:100% !important;">     
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $trnsLnID; ?>" style="width:100% !important;">                                                      
                                                        <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsRow<?php echo $cntr; ?>_ItmID', 'oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                });">
                                                            <span class="glyphicon glyphicon-th-list"></span>
                                                        </label>
                                                    </div>                                               
                                                </td> 
                                                <td class="lovtd"  style="<?php echo $srcCageColDsply; ?>">
                                                    <div class="input-group" style="width:100% !important;">
                                                        <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageNm" name="oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageNm" value="<?php echo $srcCageNm1; ?>" readonly="true" style="width:100% !important;">
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageID" value="<?php echo $srcCageID1; ?>" style="width:100% !important;">                                              
                                                        <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $srcCageID1; ?>', 'oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageID', 'oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageNm', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                });">
                                                            <span class="glyphicon glyphicon-th-list"></span>
                                                        </label>
                                                    </div> 
                                                </td> 
                                                <td class="lovtd" style="<?php echo $dstCageColDsply; ?>">
                                                    <div class="input-group" style="width:100% !important;">
                                                        <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_DstCageNm" name="oneVmsTrnsRow<?php echo $cntr; ?>_DstCageNm" value="<?php echo $destCageNm1; ?>" readonly="true" style="width:100% !important;">
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_DstCageID" value="<?php echo $destCageID1; ?>" style="width:100% !important;">                                              
                                                        <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $destCageID1; ?>', 'oneVmsTrnsRow<?php echo $cntr; ?>_DstCageID', 'oneVmsTrnsRow<?php echo $cntr; ?>_DstCageNm', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                });">
                                                            <span class="glyphicon glyphicon-th-list"></span>
                                                        </label>
                                                    </div> 
                                                </td>                                                
                                                <td class="lovtd" style="<?php echo $dsplyLnRemark; ?>">
                                                    <input type="text" class="form-control rqrdFld" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_LineDesc" name="oneVmsTrnsRow<?php echo $cntr; ?>_LineDesc" value="<?php echo $lineDesc; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?>>                                                    
                                                </td>
                                                <td class="lovtd" style="<?php echo $dsplyTrays; ?>">
                                                    <input type="text" class="form-control vmsCbTray" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Tray" name="oneVmsTrnsRow<?php echo $cntr; ?>_Tray" value="<?php
                                                    echo number_format($tray, 0);
                                                    ?>"  onchange="calcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsCbTrayKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: center;" <?php echo $mkReadOnly; ?>>                                            
                                                </td>
                                                <td class="lovtd" style="<?php echo $dsplyBundles; ?>">
                                                    <input type="text" class="form-control vmsCbBndl" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Bndl" name="oneVmsTrnsRow<?php echo $cntr; ?>_Bndl" value="<?php
                                                    echo number_format($bundle, 0);
                                                    ?>"  onchange="calcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsCbBndlKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: center;" <?php echo $mkReadOnly; ?>>                                            
                                                </td>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;" onclick="getOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="View QTY Breakdown"><?php echo $baseUOMNm; ?></button>
                                                </td>
                                                <td class="lovtd">
                                                    <input type="hidden" class="form-control vmsCbQty" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Qty" name="oneVmsTrnsRow<?php echo $cntr; ?>_Qty" value="<?php
                                                    echo number_format($qty, 0);
                                                    ?>"  onchange="calcCshBrkdwnRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                            
                                                    <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_UntVal" name="oneVmsTrnsRow<?php echo $cntr; ?>_UntVal" value="<?php echo $unitVal;
                                                    ?>" style="width:100% !important;" readonly="true">             
                                                    <input type="text" class="form-control vmsCbTtl" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsTrnsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                                    echo number_format($ttlRowVal, 2);
                                                    ?>" onchange="calcCshBrkdwnTtlVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                </td>
                                                <td class="lovtd" style="<?php echo $dsplyPymntInfo; ?>">
                                                    <input type="text" class="form-control vmsFncCrncy" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_PymntCrncyRate" name="oneVmsTrnsRow<?php echo $cntr; ?>_PymntCrncyRate" value="<?php
                                                    echo number_format($funcCrncyRate, 15);
                                                    ?>" onchange="calcPymtAmntTtl('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormFnCrncyKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                </td> 
                                                <td class="lovtd" style="<?php echo $dsplySrcBalance; ?>">
                                                    <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_SrcRnngBal" name="oneVmsTrnsRow<?php echo $cntr; ?>_SrcRnngBal" value="<?php
                                                    if ($srcCageID1 > 0) {
                                                        echo number_format($srcRunningBalance, 2);
                                                    } else {
                                                        echo "0.00";
                                                    }
                                                    ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                           <?php
                                                           if (strpos($capturedItemIDs, ";S" . $itemID . "_" . $srcCageID1 . ";") === FALSE) {
                                                               $capturedItemIDs .= ";S" . $itemID . "_" . $srcCageID1 . ";";
                                                               $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmSrcCage_" . $itemID . "_" . $srcCageID1 . "\" name=\"oneVmsTrnsFrmSrcCage_" . $itemID . "_" . $srcCageID1 . "\" value=\"" . number_format($srcRunningBalance,
                                                                               2) . "\" readonly=\"true\">";
                                                           }
                                                           if (strpos($capturedItemIDs, ";D" . $itemID . "_" . $destCageID1 . ";") === FALSE) {
                                                               $capturedItemIDs .= ";D" . $itemID . "_" . $destCageID1 . ";";
                                                               $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmDstCage_" . $itemID . "_" . $destCageID1 . "\" name=\"oneVmsTrnsFrmDstCage_" . $itemID . "_" . $destCageID1 . "\" value=\"" . number_format($dstRunningBalance,
                                                                               2) . "\" readonly=\"true\">";
                                                           }
                                                           ?>
                                                </td> 
                                                <td class="lovtd" style="<?php echo $dsplyDstBalance; ?>">
                                                    <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_DstRnngBal" name="oneVmsTrnsRow<?php echo $cntr; ?>_DstRnngBal" value="<?php
                                                    if ($destCageID1 > 0) {
                                                        echo number_format($dstRunningBalance, 2);
                                                    } else {
                                                        echo "0.00";
                                                    }
                                                    ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                </td>
                                                <td class="lovtd" style="<?php echo $dsplySrcItemState; ?>">
                                                    <div class="input-group" style="width:100% !important;">
                                                        <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_SrcItemState" name="oneVmsTrnsRow<?php echo $cntr; ?>_SrcItemState" value="<?php echo $srcItemState; ?>" readonly="true" style="width:100% !important;">
                                                        <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsRow<?php echo $cntr; ?>_SrcItemState', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                });">
                                                            <span class="glyphicon glyphicon-th-list"></span>
                                                        </label>
                                                    </div> 
                                                </td> 
                                                <td class="lovtd" style="<?php echo $dsplyDstItemState; ?>">
                                                    <div class="input-group" style="width:100% !important;">
                                                        <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_DstItemState" name="oneVmsTrnsRow<?php echo $cntr; ?>_DstItemState" value="<?php echo $dstItemState; ?>" readonly="true" style="width:100% !important;">
                                                        <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsRow<?php echo $cntr; ?>_DstItemState', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                });">
                                                            <span class="glyphicon glyphicon-th-list"></span>
                                                        </label>
                                                    </div> 
                                                </td> 
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsTrnsLine('oneVmsTrnsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete Trns. Line">
                                                        <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            </tr>
                                            <?php
                                        }
                                        if (($voidedTrnsHdrID <= 0 || $orgnlVmsTrnsHdrID <= 0) && ($rqStatus == "Not Submitted" || $rqStatus == "Withdrawn" ||
                                                $rqStatus == "Rejected")) {
                                            $excludedItems = trim($excludedItems, ", ");
                                            $resultRw = get_Fresh_VMSTrnsLines($sbmtdVmsTrnsHdrID, $crncyID, $destCageID, $excludedItems, $destVltID,
                                                    $dfltDstItemState, $srcCageID, $srcVltID, $dfltSrcItemState, $sbmtdItmID, "Note");
                                            $maxNoRows = loc_db_num_rows($resultRw);
                                            $nwcntr = 0;
                                            if ($sbmtdItmID > 0 && $maxNoRows == 1) {
                                                $maxNoRows = 5;
                                            }
                                            $itemID = -1;
                                            $trnsLnID = -1;
                                            $itemName = "";
                                            $baseUOMID = -1;
                                            $unitVal = 0.00;
                                            $qty = 0.00;
                                            $tray = 0;
                                            $bundle = 0;
                                            $baseUOMNm = "";
                                            $ttlRowVal = 0.00;
                                            $srcItemState = $dfltSrcItemState;
                                            $dstItemState = $dfltDstItemState;
                                            $funcCrncyRate = 0;
                                            $lineDesc = "";
                                            $srcRunningBalance = 0;
                                            $dstRunningBalance = 0;
                                            $rowRw = null;
                                            if ($sbmtdItmID > 0 && $nwcntr == 0) {
                                                $rowRw = loc_db_fetch_array($resultRw);
                                            }
                                            while ($nwcntr < $maxNoRows) {
                                                if ($sbmtdItmID > 0) {
                                                    /* Do Nothing */
                                                } else {
                                                    $rowRw = loc_db_fetch_array($resultRw);
                                                }
                                                $trnsLnID = (float) $rowRw[0];
                                                $itemID = (int) $rowRw[2];
                                                $lineDesc = $rowRw[36];
                                                if ($lineDesc == "") {
                                                    $lineDesc = $vmsTrnsDesc;
                                                }
                                                $srcRunningBalance = (float) $rowRw[35];
                                                $dstRunningBalance = (float) $rowRw[37];
                                                $itemName = $rowRw[29];
                                                $unitVal = (float) $rowRw[9];
                                                $baseUOMNm = $rowRw[31];
                                                $baseUOMID = (int) $rowRw[26];
                                                $qty = (float) $rowRw[7];
                                                $tray = 0;
                                                $bundle = 0;
                                                $ttlRowVal = $qty * $unitVal;
                                                if ($trnsLnID > 0) {
                                                    $srcItemState = $rowRw[27];
                                                    $dstItemState = $rowRw[34];
                                                } else {
                                                    $srcItemState = $dfltSrcItemState;
                                                    $dstItemState = $dfltDstItemState;
                                                }
                                                $funcCrncyRate = (float) $rowRw[21];
                                                $cntr += 1;
                                                $nwcntr += 1;
                                                ?>
                                                <tr id="oneVmsTrnsRow_<?php echo $cntr; ?>">                                    
                                                    <!--<td class="lovtd"><span><?php echo ($cntr); ?></span></td>-->
                                                    <td class="lovtd">
                                                        <div class="input-group" style="width:100% !important;">
                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm" name="oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm" value="<?php echo $itemName; ?>" readonly="true" style="width:100% !important;">
                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_ItmID" value="<?php echo $itemID; ?>" style="width:100% !important;">
                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_BaseUoMID" value="<?php echo $baseUOMID; ?>" style="width:100% !important;">     
                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $trnsLnID; ?>" style="width:100% !important;">                                                      
                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsRow<?php echo $cntr; ?>_ItmID', 'oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm', 'clear', 1, '', function () {
                                                                        afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                    });">
                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                            </label>
                                                        </div>                                               
                                                    </td> 
                                                    <td class="lovtd"  style="<?php echo $srcCageColDsply; ?>">
                                                        <div class="input-group" style="width:100% !important;">
                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageNm" name="oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageNm" value="<?php echo $srcCageNm; ?>" readonly="true" style="width:100% !important;">
                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageID" value="<?php echo $srcCageID; ?>" style="width:100% !important;">                                              
                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $srcCageID; ?>', 'oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageID', 'oneVmsTrnsRow<?php echo $cntr; ?>_SrcCageNm', 'clear', 1, '', function () {
                                                                        afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                    });">
                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                            </label>
                                                        </div> 
                                                    </td> 
                                                    <td class="lovtd" style="<?php echo $dstCageColDsply; ?>">
                                                        <div class="input-group" style="width:100% !important;">
                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_DstCageNm" name="oneVmsTrnsRow<?php echo $cntr; ?>_DstCageNm" value="<?php echo $destCageNm; ?>" readonly="true" style="width:100% !important;">
                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_DstCageID" value="<?php echo $destCageID; ?>" style="width:100% !important;">                                              
                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $destCageID; ?>', 'oneVmsTrnsRow<?php echo $cntr; ?>_DstCageID', 'oneVmsTrnsRow<?php echo $cntr; ?>_DstCageNm', 'clear', 1, '', function () {
                                                                        afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                    });">
                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                            </label>
                                                        </div> 
                                                    </td>                                               
                                                    <td class="lovtd" style="<?php echo $dsplyLnRemark; ?>">
                                                        <input type="text" class="form-control rqrdFld" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_LineDesc" name="oneVmsTrnsRow<?php echo $cntr; ?>_LineDesc" value="<?php echo $lineDesc; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?>>                                                    
                                                    </td>
                                                    <td class="lovtd" style="<?php echo $dsplyTrays; ?>">
                                                        <input type="text" class="form-control vmsCbTray" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Tray" name="oneVmsTrnsRow<?php echo $cntr; ?>_Tray" value="<?php
                                                        echo number_format($tray, 0);
                                                        ?>"  onchange="calcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsCbTrayKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: center;" <?php echo $mkReadOnly; ?>>                                            
                                                    </td>
                                                    <td class="lovtd" style="<?php echo $dsplyBundles; ?>">
                                                        <input type="text" class="form-control vmsCbBndl" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Bndl" name="oneVmsTrnsRow<?php echo $cntr; ?>_Bndl" value="<?php
                                                        echo number_format($bundle, 0);
                                                        ?>"  onchange="calcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsCbBndlKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: center;" <?php echo $mkReadOnly; ?>>                                            
                                                    </td>
                                                    <td class="lovtd">
                                                        <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;" onclick="getOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="View QTY Breakdown"><?php echo $baseUOMNm; ?></button>
                                                    </td>
                                                    <td class="lovtd">
                                                        <input type="hidden" class="form-control vmsCbQty" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Qty" name="oneVmsTrnsRow<?php echo $cntr; ?>_Qty" value="<?php
                                                        echo number_format($qty, 0);
                                                        ?>"  onchange="calcCshBrkdwnRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                            
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_UntVal" name="oneVmsTrnsRow<?php echo $cntr; ?>_UntVal" value="<?php echo $unitVal;
                                                        ?>" style="width:100% !important;" readonly="true">  
                                                        <input type="text" class="form-control vmsCbTtl" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsTrnsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                                        echo number_format($ttlRowVal, 2);
                                                        ?>" onchange="calcCshBrkdwnTtlVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                    </td>
                                                    <td class="lovtd" style="<?php echo $dsplyPymntInfo; ?>">
                                                        <input type="text" class="form-control vmsFncCrncy" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_PymntCrncyRate" name="oneVmsTrnsRow<?php echo $cntr; ?>_PymntCrncyRate" value="<?php
                                                        echo number_format($funcCrncyRate, 15);
                                                        ?>" onchange="calcPymtAmntTtl('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormFnCrncyKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                    </td>
                                                    <td class="lovtd" style="<?php echo $dsplySrcBalance; ?>">
                                                        <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_SrcRnngBal" name="oneVmsTrnsRow<?php echo $cntr; ?>_SrcRnngBal" value="<?php
                                                        if ($srcCageID > 0) {
                                                            echo number_format($srcRunningBalance, 2);
                                                        } else {
                                                            echo "0.00";
                                                        }
                                                        ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                               <?php
                                                               if (strpos($capturedItemIDs, ";S" . $itemID . "_" . $srcCageID . ";") === FALSE) {
                                                                   $capturedItemIDs .= ";S" . $itemID . "_" . $srcCageID . ";";
                                                                   $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmSrcCage_" . $itemID . "_" . $srcCageID . "\" name=\"oneVmsTrnsFrmSrcCage_" . $itemID . "_" . $srcCageID . "\" value=\"" . number_format($srcRunningBalance,
                                                                                   2) . "\" readonly=\"true\">";
                                                               }
                                                               if (strpos($capturedItemIDs, ";D" . $itemID . "_" . $destCageID . ";") === FALSE) {
                                                                   $capturedItemIDs .= ";D" . $itemID . "_" . $destCageID . ";";
                                                                   $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmDstCage_" . $itemID . "_" . $destCageID . "\" name=\"oneVmsTrnsFrmDstCage_" . $itemID . "_" . $destCageID . "\" value=\"" . number_format($dstRunningBalance,
                                                                                   2) . "\" readonly=\"true\">";
                                                               }
                                                               ?>
                                                    </td> 
                                                    <td class="lovtd" style="<?php echo $dsplyDstBalance; ?>">
                                                        <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_DstRnngBal" name="oneVmsTrnsRow<?php echo $cntr; ?>_DstRnngBal" value="<?php
                                                        if ($destCageID > 0) {
                                                            echo number_format($dstRunningBalance, 2);
                                                        } else {
                                                            echo "0.00";
                                                        }
                                                        ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                    </td>
                                                    <td class="lovtd" style="<?php echo $dsplySrcItemState; ?>">
                                                        <div class="input-group" style="width:100% !important;">
                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_SrcItemState" name="oneVmsTrnsRow<?php echo $cntr; ?>_SrcItemState" value="<?php echo $srcItemState; ?>" readonly="true" style="width:100% !important;">
                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsRow<?php echo $cntr; ?>_SrcItemState', 'clear', 1, '', function () {
                                                                        afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                    });">
                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                            </label>
                                                        </div> 
                                                    </td> 
                                                    <td class="lovtd" style="<?php echo $dsplyDstItemState; ?>">
                                                        <div class="input-group" style="width:100% !important;">
                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_DstItemState" name="oneVmsTrnsRow<?php echo $cntr; ?>_DstItemState" value="<?php echo $dstItemState; ?>" readonly="true" style="width:100% !important;">
                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsRow<?php echo $cntr; ?>_DstItemState', 'clear', 1, '', function () {
                                                                        afterVMSItemSlctn('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                    });">
                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                            </label>
                                                        </div> 
                                                    </td> 
                                                    <td class="lovtd">
                                                        <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsTrnsLine('oneVmsTrnsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete Trns. Line">
                                                            <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                        </button>
                                                    </td>
                                                </tr>
                                                <?php
                                            }
                                        }
                                        ?>
                                    </tbody>
                                </table> 
                            </div>
                        </div>
                    </div>                                    
                    <div id="cashItmsCoins" class="tab-pane fade hideNotice" style="border:none !important;padding:0px !important;">
                        <div class="row">
                            <div class="col-md-12">
                                <table class="table table-striped table-bordered table-responsive" id="oneVmsTrnsCoinsLnsTable" cellspacing="0" width="100%" style="width:100%;min-width: 900px !important;">
                                    <thead>
                                        <tr>
                                            <!--<th>No.</th>-->
                                            <th style="max-width:100px;width:100px;">Denomination</th>
                                            <th style="<?php echo $srcCageColDsply; ?>max-width:70px;width:70px;">Src. Cage</th>
                                            <th style="<?php echo $dstCageColDsply; ?>max-width:70px;width:70px;">Dest. Cage</th>
                                            <th style="<?php echo $dsplyLnRemark; ?>">Narration/Remark</th>
                                            <th style="">Pieces</th>
                                            <th>UOM</th>
                                            <th>Total Value</th>
                                            <th style="<?php echo $dsplyPymntInfo; ?>">Payment Currency Exchange Rate</th>
                                            <th style="<?php echo $dsplySrcBalance; ?>">Source Cage Running Balance</th>
                                            <th style="<?php echo $dsplyDstBalance; ?>">Destination Cage Running Balance</th>
                                            <th style="<?php echo $dsplySrcItemState; ?>">Source Cage Money Type</th>
                                            <th style="<?php echo $dsplyDstItemState; ?>">Destination Cage Money Type</th>
                                            <th>&nbsp;</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <?php
                                        $cntr = 0;
                                        $resultRw = get_One_VMSTrnsLines($sbmtdVmsTrnsHdrID, $sbmtdItmID, "Coin");
                                        $maxNoRows = loc_db_num_rows($resultRw);
                                        $excludedItems = "";
                                        while ($cntr < $maxNoRows) {
                                            $itemID = -1;
                                            $trnsLnID = -1;
                                            $itemName = "";
                                            $baseUOMID = -1;
                                            $unitVal = 0.00;
                                            $qty = 0.00;
                                            $baseUOMNm = "";
                                            $ttlRowVal = 0.00;
                                            $srcItemState = $dfltSrcItemState;
                                            $dstItemState = $dfltDstItemState;
                                            $funcCrncyRate = 0;
                                            $lineDesc = "";
                                            $srcRunningBalance = 0;
                                            $dstRunningBalance = 0;
                                            $srcCageID1 = -1;
                                            $destCageID1 = -1;
                                            $srcCageNm1 = "";
                                            $destCageNm1 = "";
                                            if ($rowRw = loc_db_fetch_array($resultRw)) {
                                                $trnsLnID = (float) $rowRw[0];
                                                $itemID = (int) $rowRw[2];
                                                $lineDesc = $rowRw[36];
                                                $srcRunningBalance = (float) $rowRw[35];
                                                $dstRunningBalance = (float) $rowRw[37];
                                                $excludedItems .= $itemID . ", ";
                                                $itemName = $rowRw[29];
                                                $unitVal = (float) $rowRw[9];
                                                $baseUOMNm = $rowRw[31];
                                                $baseUOMID = (int) $rowRw[26];
                                                $qty = (float) $rowRw[7];
                                                $tray = (float) $rowRw[46];
                                                $bundle = (float) $rowRw[47];
                                                $ttlRowVal = $qty * $unitVal;
                                                if ($trnsLnID > 0) {
                                                    $srcItemState = $rowRw[27];
                                                    $dstItemState = $rowRw[34];
                                                } else {
                                                    $srcItemState = $dfltSrcItemState;
                                                    $dstItemState = $dfltDstItemState;
                                                }
                                                $funcCrncyRate = (float) $rowRw[21];
                                                $srcCageID1 = (int) $rowRw[4];
                                                $destCageID1 = (int) $rowRw[6];
                                                $srcCageNm1 = $rowRw[39];
                                                $destCageNm1 = $rowRw[41];
                                            }
                                            $cntr += 1;
                                            ?>
                                            <tr id="oneVmsTrnsCoinsRow_<?php echo $cntr; ?>">                                    
                                                <!--<td class="lovtd"><span><?php echo ($cntr); ?></span></td>-->
                                                <td class="lovtd">
                                                    <div class="input-group" style="width:100% !important;">
                                                        <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm" value="<?php echo $itemName; ?>" readonly="true" style="width:100% !important;">
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItmID" value="<?php echo $itemID; ?>" style="width:100% !important;">
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_BaseUoMID" value="<?php echo $baseUOMID; ?>" style="width:100% !important;">     
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $trnsLnID; ?>" style="width:100% !important;">                                                      
                                                        <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItmID', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                });">
                                                            <span class="glyphicon glyphicon-th-list"></span>
                                                        </label>
                                                    </div>                                               
                                                </td> 
                                                <td class="lovtd"  style="<?php echo $srcCageColDsply; ?>">
                                                    <div class="input-group" style="width:100% !important;">
                                                        <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageNm" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageNm" value="<?php echo $srcCageNm1; ?>" readonly="true" style="width:100% !important;">
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageID" value="<?php echo $srcCageID1; ?>" style="width:100% !important;">                                              
                                                        <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $srcCageID1; ?>', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageID', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageNm', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                });">
                                                            <span class="glyphicon glyphicon-th-list"></span>
                                                        </label>
                                                    </div> 
                                                </td> 
                                                <td class="lovtd" style="<?php echo $dstCageColDsply; ?>">
                                                    <div class="input-group" style="width:100% !important;">
                                                        <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageNm" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageNm" value="<?php echo $destCageNm1; ?>" readonly="true" style="width:100% !important;">
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageID" value="<?php echo $destCageID1; ?>" style="width:100% !important;">                                              
                                                        <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $destCageID1; ?>', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageID', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageNm', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                });">
                                                            <span class="glyphicon glyphicon-th-list"></span>
                                                        </label>
                                                    </div> 
                                                </td>                                                
                                                <td class="lovtd"  style="<?php echo $dsplyLnRemark; ?>">
                                                    <input type="text" class="form-control rqrdFld" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LineDesc" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LineDesc" value="<?php echo $lineDesc; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?>>                                                    
                                                </td>
                                                <td class="lovtd">                                                                        
                                                    <input type="text" class="form-control vmsCbQty" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_Qty" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_Qty" value="<?php
                                                    echo number_format($qty, 0);
                                                    ?>"  onchange="calcCshBrkdwnRowVal('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                            
                                                    <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_UntVal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_UntVal" value="<?php echo $unitVal;
                                                    ?>" style="width:100% !important;" readonly="true">   
                                                </td>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;" onclick="getOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="View QTY Breakdown"><?php echo $baseUOMNm; ?></button>
                                                </td>
                                                <td class="lovtd">          
                                                    <input type="text" class="form-control vmsCbTtl" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                                    echo number_format($ttlRowVal, 2);
                                                    ?>" onchange="calcCshBrkdwnTtlVal('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                </td>
                                                <td class="lovtd" style="<?php echo $dsplyPymntInfo; ?>">
                                                    <input type="text" class="form-control vmsFncCrncy" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_PymntCrncyRate" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_PymntCrncyRate" value="<?php
                                                    echo number_format($funcCrncyRate, 15);
                                                    ?>" onchange="calcPymtAmntTtl('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormFnCrncyKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                </td> 
                                                <td class="lovtd" style="<?php echo $dsplySrcBalance; ?>">
                                                    <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcRnngBal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcRnngBal" value="<?php
                                                    if ($srcCageID1 > 0) {
                                                        echo number_format($srcRunningBalance, 2);
                                                    } else {
                                                        echo "0.00";
                                                    }
                                                    ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                           <?php
                                                           if (strpos($capturedItemIDs, ";S" . $itemID . "_" . $srcCageID1 . ";") === FALSE) {
                                                               $capturedItemIDs .= ";S" . $itemID . "_" . $srcCageID1 . ";";
                                                               $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmSrcCage_" . $itemID . "_" . $srcCageID1 . "\" name=\"oneVmsTrnsFrmSrcCage_" . $itemID . "_" . $srcCageID1 . "\" value=\"" . number_format($srcRunningBalance,
                                                                               2) . "\" readonly=\"true\">";
                                                           }
                                                           if (strpos($capturedItemIDs, ";D" . $itemID . "_" . $destCageID1 . ";") === FALSE) {
                                                               $capturedItemIDs .= ";D" . $itemID . "_" . $destCageID1 . ";";
                                                               $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmDstCage_" . $itemID . "_" . $destCageID1 . "\" name=\"oneVmsTrnsFrmDstCage_" . $itemID . "_" . $destCageID1 . "\" value=\"" . number_format($dstRunningBalance,
                                                                               2) . "\" readonly=\"true\">";
                                                           }
                                                           ?>
                                                </td> 
                                                <td class="lovtd" style="<?php echo $dsplyDstBalance; ?>">
                                                    <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstRnngBal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstRnngBal" value="<?php
                                                    if ($destCageID1 > 0) {
                                                        echo number_format($dstRunningBalance, 2);
                                                    } else {
                                                        echo "0.00";
                                                    }
                                                    ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                </td>
                                                <td class="lovtd" style="<?php echo $dsplySrcItemState; ?>">
                                                    <div class="input-group" style="width:100% !important;">
                                                        <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcItemState" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcItemState" value="<?php echo $srcItemState; ?>" readonly="true" style="width:100% !important;">
                                                        <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcItemState', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                });">
                                                            <span class="glyphicon glyphicon-th-list"></span>
                                                        </label>
                                                    </div> 
                                                </td> 
                                                <td class="lovtd" style="<?php echo $dsplyDstItemState; ?>">
                                                    <div class="input-group" style="width:100% !important;">
                                                        <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstItemState" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstItemState" value="<?php echo $dstItemState; ?>" readonly="true" style="width:100% !important;">
                                                        <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstItemState', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                });">
                                                            <span class="glyphicon glyphicon-th-list"></span>
                                                        </label>
                                                    </div> 
                                                </td> 
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsTrnsLine('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete Trns. Line">
                                                        <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            </tr>
                                            <?php
                                        }

                                        if (($voidedTrnsHdrID <= 0 || $orgnlVmsTrnsHdrID <= 0) && ($rqStatus == "Not Submitted" || $rqStatus == "Withdrawn" ||
                                                $rqStatus == "Rejected")) {
                                            $excludedItems = trim($excludedItems, ", ");
                                            $resultRw = get_Fresh_VMSTrnsLines($sbmtdVmsTrnsHdrID, $crncyID, $destCageID, $excludedItems, $destVltID,
                                                    $dfltDstItemState, $srcCageID, $srcVltID, $dfltSrcItemState, $sbmtdItmID, "Coin");
                                            $maxNoRows = loc_db_num_rows($resultRw);
                                            $nwcntr = 0;
                                            if ($sbmtdItmID > 0 && $maxNoRows == 1) {
                                                $maxNoRows = 5;
                                            }
                                            $itemID = -1;
                                            $trnsLnID = -1;
                                            $itemName = "";
                                            $baseUOMID = -1;
                                            $unitVal = 0.00;
                                            $qty = 0.00;
                                            $tray = 0;
                                            $bundle = 0;
                                            $baseUOMNm = "";
                                            $ttlRowVal = 0.00;
                                            $srcItemState = $dfltSrcItemState;
                                            $dstItemState = $dfltDstItemState;
                                            $funcCrncyRate = 0;
                                            $lineDesc = "";
                                            $srcRunningBalance = 0;
                                            $dstRunningBalance = 0;
                                            $rowRw = null;
                                            if ($sbmtdItmID > 0 && $nwcntr == 0) {
                                                $rowRw = loc_db_fetch_array($resultRw);
                                            }
                                            while ($nwcntr < $maxNoRows) {
                                                if ($sbmtdItmID > 0) {
                                                    /* Do Nothing */
                                                } else {
                                                    $rowRw = loc_db_fetch_array($resultRw);
                                                }
                                                $trnsLnID = (float) $rowRw[0];
                                                $itemID = (int) $rowRw[2];
                                                $lineDesc = $rowRw[36];
                                                if ($lineDesc == "") {
                                                    $lineDesc = $vmsTrnsDesc;
                                                }
                                                $srcRunningBalance = (float) $rowRw[35];
                                                $dstRunningBalance = (float) $rowRw[37];
                                                $itemName = $rowRw[29];
                                                $unitVal = (float) $rowRw[9];
                                                $baseUOMNm = $rowRw[31];
                                                $baseUOMID = (int) $rowRw[26];
                                                $qty = (float) $rowRw[7];
                                                $tray = 0;
                                                $bundle = 0;
                                                $ttlRowVal = $qty * $unitVal;
                                                if ($trnsLnID > 0) {
                                                    $srcItemState = $rowRw[27];
                                                    $dstItemState = $rowRw[34];
                                                } else {
                                                    $srcItemState = $dfltSrcItemState;
                                                    $dstItemState = $dfltDstItemState;
                                                }
                                                $funcCrncyRate = (float) $rowRw[21];
                                                $cntr += 1;
                                                $nwcntr += 1;
                                                ?>
                                                <tr id="oneVmsTrnsCoinsRow_<?php echo $cntr; ?>">                                    
                                                    <!--<td class="lovtd"><span><?php echo ($cntr); ?></span></td>-->
                                                    <td class="lovtd">
                                                        <div class="input-group" style="width:100% !important;">
                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm" value="<?php echo $itemName; ?>" readonly="true" style="width:100% !important;">
                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItmID" value="<?php echo $itemID; ?>" style="width:100% !important;">
                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_BaseUoMID" value="<?php echo $baseUOMID; ?>" style="width:100% !important;">     
                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $trnsLnID; ?>" style="width:100% !important;">                                                      
                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItmID', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm', 'clear', 1, '', function () {
                                                                        afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                    });">
                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                            </label>
                                                        </div>                                               
                                                    </td> 
                                                    <td class="lovtd"  style="<?php echo $srcCageColDsply; ?>">
                                                        <div class="input-group" style="width:100% !important;">
                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageNm" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageNm" value="<?php echo $srcCageNm; ?>" readonly="true" style="width:100% !important;">
                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageID" value="<?php echo $srcCageID; ?>" style="width:100% !important;">                                              
                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $srcCageID; ?>', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageID', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcCageNm', 'clear', 1, '', function () {
                                                                        afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                    });">
                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                            </label>
                                                        </div> 
                                                    </td> 
                                                    <td class="lovtd" style="<?php echo $dstCageColDsply; ?>">
                                                        <div class="input-group" style="width:100% !important;">
                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageNm" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageNm" value="<?php echo $destCageNm; ?>" readonly="true" style="width:100% !important;">
                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageID" value="<?php echo $destCageID; ?>" style="width:100% !important;">                                              
                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $destCageID; ?>', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageID', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstCageNm', 'clear', 1, '', function () {
                                                                        afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                    });">
                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                            </label>
                                                        </div> 
                                                    </td>                                               
                                                    <td class="lovtd" style="<?php echo $dsplyLnRemark; ?>">
                                                        <input type="text" class="form-control rqrdFld" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LineDesc" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LineDesc" value="<?php echo $lineDesc; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?>>                                                    
                                                    </td>
                                                    <td class="lovtd">                                                                            
                                                        <input type="text" class="form-control vmsCbQty" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_Qty" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_Qty" value="<?php
                                                        echo number_format($qty, 0);
                                                        ?>"  onchange="calcCshBrkdwnRowVal('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                            
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_UntVal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_UntVal" value="<?php echo $unitVal;
                                                        ?>" style="width:100% !important;" readonly="true">  
                                                    </td>
                                                    <td class="lovtd">
                                                        <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;" onclick="getOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="View QTY Breakdown"><?php echo $baseUOMNm; ?></button>
                                                    </td>
                                                    <td class="lovtd">
                                                        <input type="text" class="form-control vmsCbTtl" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                                        echo number_format($ttlRowVal, 2);
                                                        ?>" onchange="calcCshBrkdwnTtlVal('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                    </td>
                                                    <td class="lovtd" style="<?php echo $dsplyPymntInfo; ?>">
                                                        <input type="text" class="form-control vmsFncCrncy" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_PymntCrncyRate" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_PymntCrncyRate" value="<?php
                                                        echo number_format($funcCrncyRate, 15);
                                                        ?>" onchange="calcPymtAmntTtl('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormFnCrncyKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                    </td>
                                                    <td class="lovtd" style="<?php echo $dsplySrcBalance; ?>">
                                                        <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcRnngBal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcRnngBal" value="<?php
                                                        if ($srcCageID > 0) {
                                                            echo number_format($srcRunningBalance, 2);
                                                        } else {
                                                            echo "0.00";
                                                        }
                                                        ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                               <?php
                                                               if (strpos($capturedItemIDs, ";S" . $itemID . "_" . $srcCageID . ";") === FALSE) {
                                                                   $capturedItemIDs .= ";S" . $itemID . "_" . $srcCageID . ";";
                                                                   $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmSrcCage_" . $itemID . "_" . $srcCageID . "\" name=\"oneVmsTrnsFrmSrcCage_" . $itemID . "_" . $srcCageID . "\" value=\"" . number_format($srcRunningBalance,
                                                                                   2) . "\" readonly=\"true\">";
                                                               }
                                                               if (strpos($capturedItemIDs, ";D" . $itemID . "_" . $destCageID . ";") === FALSE) {
                                                                   $capturedItemIDs .= ";D" . $itemID . "_" . $destCageID . ";";
                                                                   $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmDstCage_" . $itemID . "_" . $destCageID . "\" name=\"oneVmsTrnsFrmDstCage_" . $itemID . "_" . $destCageID . "\" value=\"" . number_format($dstRunningBalance,
                                                                                   2) . "\" readonly=\"true\">";
                                                               }
                                                               ?>
                                                    </td> 
                                                    <td class="lovtd" style="<?php echo $dsplyDstBalance; ?>">
                                                        <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstRnngBal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstRnngBal" value="<?php
                                                        if ($destCageID > 0) {
                                                            echo number_format($dstRunningBalance, 2);
                                                        } else {
                                                            echo "0.00";
                                                        }
                                                        ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                    </td>
                                                    <td class="lovtd" style="<?php echo $dsplySrcItemState; ?>">
                                                        <div class="input-group" style="width:100% !important;">
                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcItemState" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcItemState" value="<?php echo $srcItemState; ?>" readonly="true" style="width:100% !important;">
                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_SrcItemState', 'clear', 1, '', function () {
                                                                        afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                    });">
                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                            </label>
                                                        </div> 
                                                    </td> 
                                                    <td class="lovtd" style="<?php echo $dsplyDstItemState; ?>">
                                                        <div class="input-group" style="width:100% !important;">
                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstItemState" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstItemState" value="<?php echo $dstItemState; ?>" readonly="true" style="width:100% !important;">
                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_DstItemState', 'clear', 1, '', function () {
                                                                        afterVMSItemSlctn('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                    });">
                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                            </label>
                                                        </div> 
                                                    </td> 
                                                    <td class="lovtd">
                                                        <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsTrnsLine('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete Trns. Line">
                                                            <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                        </button>
                                                    </td>
                                                </tr>
                                                <?php
                                            }
                                        }
                                        ?>
                                    </tbody>
                                </table> 
                            </div>
                        </div>
                    </div>                    
                    <div id="rnngBalsHiddenFields">                        
                        <input type="hidden" id="oneVmsUomCnvFctr_Tray" value="<?php echo $trayCnvFctr; ?>"/>
                        <input type="hidden" id="oneVmsUomCnvFctr_Bndl" value="<?php echo $bndlCnvFctr; ?>"/>
                        <?php echo $extrInputFlds; ?>
                    </div>
                </div>
                <?php
            } else if ($vwtyp == 30) {
                $sbmtdVmsTrnsHdrID = isset($_POST['sbmtdVmsTrnsHdrID']) ? cleanInputData($_POST['sbmtdVmsTrnsHdrID']) : -1;
                $trnsType = isset($_POST['trnsType']) ? cleanInputData($_POST['trnsType']) : "";
                getVMSTrnsRdOnlyDsply($sbmtdVmsTrnsHdrID, $trnsType);
            } else if ($vwtyp == 32) {
                //Get Currency Sale/Purchase Payment Interface
                $sbmtdVmsTrnsHdrID = isset($_POST['sbmtdVmsTrnsHdrID']) ? cleanInputData($_POST['sbmtdVmsTrnsHdrID']) : -1;
                $vmsPymtDfltDestCageID = isset($_POST['vmsPymtDfltDestCageID']) ? cleanInputData($_POST['vmsPymtDfltDestCageID']) : -1;
                $vmsPymtDfltDestVltID = isset($_POST['vmsPymtDfltDestVltID']) ? cleanInputData($_POST['vmsPymtDfltDestVltID']) : -1;
                $vmsVoidedTrnsHdrID = isset($_POST['vmsVoidedTrnsHdrID']) ? cleanInputData($_POST['vmsVoidedTrnsHdrID']) : -1;
                $trnsType = isset($_POST['trnsType']) ? cleanInputData($_POST['trnsType']) : "";
                $dfltItemState = $trnsTypeDfltItmState[findArryIdx($trnsTypes, $trnsType)];
                $sbmtdCrncyNm = isset($_POST['sbmtdCrncyNm']) ? cleanInputData($_POST['sbmtdCrncyNm']) : "";
                if (!$canAddTrns || ($sbmtdVmsTrnsHdrID > 0 && !$canEdtTrns)) {
                    restricted();
                    exit();
                }
                $orgnlVmsTrnsHdrID = $sbmtdVmsTrnsHdrID;
                $rqStatus = "Not Submitted";
                $fnccurid = getOrgFuncCurID($orgID);
                $fnccurnm = getPssblValNm($fnccurid);
                $crncyID = $fnccurid;
                $crncyIDNm = $fnccurnm;
                $pymtCrncyNm = "";
                $pymtCrncyID = -1;
                $srcVltID = -1;
                $srcCageID = -1;
                $destVltID = -1;
                $destCageID = -1;
                $srcVltNm = "";
                $srcCageNm = "";
                $destVltNm = "";
                $destCageNm = "";
                $vldtyStatus = "<span style=\"color:red;font-weight:bold;\">Not Validated</span>";
                $athrztnStatus = "<span style=\"color:red;font-weight:bold;\">Not Submitted</span>";
                $itmBaseUomNm = "pcs";
                $voidedTrnsHdrID = -1;
                $voidedTrnsType = "";
                $vmsTrnsDesc = "";
                $vmsTrnsClsfctn = "";
                $vmsTrnsTtlAmnt = 0;
                $vmsPymtTtlAmnt = 0;
                $vmsPymtCrncyID = -1;
                $vmsPymtCrncyNm = "";
                $mkReadOnly = "";
                $mkRmrkReadOnly = "";
                $extrInputFlds = "";
                $capturedItemIDs = "";
                if ($sbmtdVmsTrnsHdrID > 0) {
                    //Important! Must Check if One also has prmsn to Edit brought Trns Hdr ID 
                    $rsltVlts = get_One_VMSTrnsPymntCages($sbmtdVmsTrnsHdrID);
                    if ($rowVlt = loc_db_fetch_array($rsltVlts)) {
                        $srcVltID = (int) $rowVlt[0];
                        $srcCageID = (int) $rowVlt[1];
                        $destVltID = (int) $rowVlt[2];
                        $destCageID = (int) $rowVlt[3];
                        $srcVltNm = $rowVlt[4];
                        $srcCageNm = $rowVlt[5];
                        $destVltNm = $rowVlt[6];
                        $destCageNm = $rowVlt[7];
                        if ($destCageID <= 0) {
                            $destVltID = (int) $rowVlt[0];
                            $destCageID = (int) $rowVlt[1];
                            $destVltNm = $rowVlt[4];
                            $destCageNm = $rowVlt[5];
                        }
                    }
                    $result = get_One_VMSTrnsHdr($sbmtdVmsTrnsHdrID);
                    if ($row = loc_db_fetch_array($result)) {
                        $rqStatus = $row[10];
                        $voidedTrnsHdrID = (float) $row[13];
                        if ($rqStatus == "Not Submitted" || $rqStatus == "Withdrawn" || $rqStatus == "Rejected") {
                            $rqstatusColor = "red";
                            if ($voidedTrnsHdrID <= 0) {
                                $mkReadOnly = "";
                                $mkRmrkReadOnly = "";
                            } else {
                                $mkReadOnly = "readonly=\"true\"";
                                $mkRmrkReadOnly = "";
                            }
                        } else if ($rqStatus != "Authorized") {
                            $mkReadOnly = "readonly=\"true\"";
                            $mkRmrkReadOnly = "readonly=\"true\"";
                            $rqstatusColor = "brown";
                        } else {
                            $rqstatusColor = "green";
                            $mkReadOnly = "readonly=\"true\"";
                            $mkRmrkReadOnly = "readonly=\"true\"";
                        }
                        $vmsTrnsTtlAmnt = (float) $row[21];
                        $vmsPymtTtlAmnt = (float) $row[34];
                        $vmsPymtCrncyID = (float) $row[32];
                        $vmsPymtCrncyNm = $row[33];
                        if ($vmsPymtCrncyNm == "") {
                            $vmsPymtCrncyNm = $sbmtdCrncyNm;
                        }
                    }
                    if ($vmsPymtDfltDestVltID > 0 && $vmsPymtDfltDestCageID > 0 && ($vmsPymtDfltDestVltID != $destVltID || $vmsPymtDfltDestCageID != $destCageID)) {
                        $destVltID = (int) $vmsPymtDfltDestVltID;
                        $destCageID = (int) $vmsPymtDfltDestCageID;
                        $destVltNm = getGnrlRecNm("inv.inv_itm_subinventories", "subinv_id", "subinv_name", $destVltID);
                        $destCageNm = getGnrlRecNm("inv.inv_shelf", "line_id", "shelve_name", $destCageID);
                        execUpdtInsSQL("DELETE FROM vms.vms_transaction_pymnt WHERE trans_hdr_id=" . $sbmtdVmsTrnsHdrID);
                    }
                    $dfltItemState = getGnrlRecNm("inv.inv_shelf", "line_id", "dflt_item_state", $destCageID);
                } else {
                    restricted();
                    exit();
                }
                ?>
                <div class="row">
                    <div class="col-md-12">
                        <?php
                        $dsplyNwLine = "";
                        $dsplyPymntInfo = "display:none;";
                        $dsplyPymntCls1 = "col-md-12";
                        $dsplyPymntCls2 = "";
                        $dsplyPymntCls3 = "col-md-6";
                        $dsplyPymntCls4 = "col-md-6";
                        $dstVltCageDsply = "";
                        $srcCageColDsply = "display:none;";
                        $dstCageColDsply = "";
                        $dsplySrcItemState = "";
                        $dsplyDstItemState = "";
                        $isSrcDstCagesRqrd = "rqrdFld";
                        $dsplyBalance = "";
                        if ($trnsType == $trnsTypes[8] || $trnsType == $trnsTypes[9]) {
                            $dsplyNwLine = "display:none;";
                            $dsplyPymntInfo = "display:none;";
                            $dsplyPymntCls1 = "col-md-12";
                            $dsplyPymntCls3 = "col-md-6";
                            $dsplyPymntCls4 = "col-md-6";
                            $srcCageColDsply = "display:none;";
                            $dstCageColDsply = "display:none;";
                            if ($trnsType == $trnsTypes[8]) {
                                $dsplySrcItemState = "display:none;";
                                $dstVltCageDsply = "";
                                $dsplyDstItemState = "display:none;";
                            } else if ($trnsType == $trnsTypes[9]) {
                                $dsplySrcItemState = "display:none;";
                                $dstVltCageDsply = "";
                                $dsplyDstItemState = "display:none;";
                            }
                        } else {
                            restricted();
                            exit();
                        }
                        ?> 
                        <div class="<?php echo $dsplyPymntCls3; ?>" style="padding:0px 0px 0px 0px !important;">
                            <div class="<?php echo $dsplyPymntCls1; ?>" style="padding:0px 0px 0px 0px !important;float:left;">
                                <?php
                                if (($voidedTrnsHdrID <= 0 || $orgnlVmsTrnsHdrID <= 0) && ($rqStatus == "Not Submitted" || $rqStatus == "Withdrawn" ||
                                        $rqStatus == "Rejected")) {
                                    ?>
                                    <button type="button" class="btn btn-default btn-sm" style="margin-bottom: 5px;" onclick="saveVmsPymtForm('<?php echo $fnccurnm; ?>');">
                                        <img src="cmn_images/FloppyDisk.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">&nbsp;Save Payment&nbsp;
                                    </button>
                                <?php } ?>
                                <button type="button" class="btn btn-default btn-sm" style="height:30px;min-height:30px;margin-bottom: 5px;">
                                    <span style="font-weight:bold;color:black;">Amount Given: </span>
                                    <span style="color:red;font-weight: bold;" id="myPymntsTtlBtn"><?php echo $vmsPymtCrncyNm; ?> 
                                        <?php echo number_format($vmsPymtTtlAmnt, 2); ?>
                                    </span>
                                    <input type="hidden" id="myPymntsTtlVal" value="<?php echo $vmsPymtTtlAmnt; ?>">
                                </button>
                                <input type="hidden" id="vmsPymtFrmCrncyNm" value="<?php echo $vmsPymtCrncyNm; ?>">
                                <input type="hidden" id="gnrlVmsPymtOrgID" value="<?php echo $orgID; ?>">
                                <input type="hidden" id="sbmtdVmsPymtHdrID" value="<?php echo $sbmtdVmsTrnsHdrID; ?>">
                            </div> 
                        </div>                               
                        <div class="<?php echo $dsplyPymntCls4; ?>">
                            <div class="form-group form-group-sm" style="<?php echo $dstVltCageDsply; ?>">
                                <div class = "col-md-4" style="padding:0px 0px 0px 0px !important;">
                                    <label style="margin-bottom:0px !important;padding:2px 0px 0px 5px !important;">Current Till:&nbsp;</label>
                                </div>
                                <div class = "col-md-4" style="padding:0px 0px 0px 0px !important;">
                                    <div class="input-group">
                                        <input type="text" class="form-control <?php echo $isSrcDstCagesRqrd; ?>" aria-label="..." id="vmsPymtDfltDestVlt" name="vmsPymtDfltDestVlt" value="<?php echo $destVltNm; ?>" readonly="true">
                                        <input type="hidden" id="vmsPymtDfltDestVltID" value="<?php echo $destVltID; ?>">
                                        <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'VMS Vaults', 'gnrlVmsPymtOrgID', '', '', 'radio', true, '<?php echo $destVltID; ?>', 'vmsPymtDfltDestVltID', 'vmsPymtDfltDestVlt', 'clear', 1, '', function () {
                                                    $('#vmsPymtDfltDestCage').val('');
                                                    $('#vmsPymtDfltDestCageID').val('-1');
                                                });">
                                            <span class="glyphicon glyphicon-th-list"></span>
                                        </label>
                                    </div>
                                </div>
                                <div class = "col-md-4" style="padding:0px 0px 0px 0px !important;">
                                    <div class="input-group">
                                        <input type="text" class="form-control <?php echo $isSrcDstCagesRqrd; ?>" aria-label="..." id="vmsPymtDfltDestCage" name="vmsPymtDfltDestCage" value="<?php echo $destCageNm; ?>" readonly="true">
                                        <input type="hidden" id="vmsPymtDfltDestCageID" value="<?php echo $destCageID; ?>">
                                        <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'VMS Vault Cages', 'vmsPymtDfltDestVltID', 'vmsPymtFrmCrncyNm', '', 'radio', true, '<?php echo $destCageID; ?>', 'vmsPymtDfltDestCageID', 'vmsPymtDfltDestCage', 'clear', 1, '', function () {
                                                    getVMSTrnsPymtForm('<?php echo $trnsType; ?>', 32, 'ReloadDialog');
                                                });">
                                            <span class="glyphicon glyphicon-th-list"></span>
                                        </label>
                                        <label class="btn btn-primary btn-file input-group-addon" onclick="getDynmcCageFnPos('vmsPymtDfltDestCageID', 7);">
                                            <span class="glyphicon glyphicon-info-sign"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12" id="oneVmsPymtsLnsTblSctn">
                        <table class="table table-striped table-bordered table-responsive" id="oneVmsPymtsLnsTable" cellspacing="0" width="100%" style="width:100%;min-width: 400px !important;">
                            <thead>
                                <tr>
                                    <th>No.</th>
                                    <th style="max-width:70px;width:70px;">Denom.</th>
                                    <th style="<?php echo $srcCageColDsply; ?>">Src. Cage</th>
                                    <th style="<?php echo $dstCageColDsply; ?>">Dest. Cage</th>
                                    <th>Transaction Type</th>
                                    <th>Pieces</th>
                                    <th>UOM</th>
                                    <th>Total Value</th>
                                    <th style="<?php echo $dsplyPymntInfo; ?>">Payment Currency Exchange Rate</th>
                                    <th style="<?php echo $dsplyBalance; ?>">Running Balance</th>											
                                    <th style="<?php echo $dsplySrcItemState; ?>">Source Cage Money Type</th>
                                    <th style="<?php echo $dsplyDstItemState; ?>">Destination Cage Money Type</th>
                                    <th>&nbsp;</th>
                                </tr>
                            </thead>
                            <tbody>
                                <?php
                                $cntr = 0;
                                //$trnsTypIdx = findArryIdx($trnsTypes, $trnsType);
                                $resultRw = get_One_VMSTrnsPymntLines($sbmtdVmsTrnsHdrID, $crncyID, $destCageID);
                                $maxNoRows = loc_db_num_rows($resultRw);
                                $excludedItems = "";
                                while ($cntr < $maxNoRows) {
                                    $itemID = -1;
                                    $trnsLnID = -1;
                                    $itemName = "";
                                    $baseUOMID = -1;
                                    $unitVal = 0.00;
                                    $qty = 0.00;
                                    $baseUOMNm = "";
                                    $ttlRowVal = 0.00;
                                    $srcItemState = $dfltItemState;
                                    $dstItemState = $dfltItemState;
                                    $funcCrncyRate = 0;
                                    $lineDesc = "";
                                    $lineTrnsType = "";
                                    $runningBalance = 0;
                                    if ($rowRw = loc_db_fetch_array($resultRw)) {
                                        $trnsLnID = (float) $rowRw[0];
                                        $itemID = (int) $rowRw[2];
                                        $excludedItems .= $itemID . ", ";
                                        $itemName = $rowRw[29];
                                        $unitVal = (float) $rowRw[9];
                                        $baseUOMNm = $rowRw[31];
                                        $baseUOMID = (int) $rowRw[26];
                                        $qty = (float) $rowRw[7];
                                        $ttlRowVal = $qty * $unitVal;
                                        $srcItemState = $rowRw[27];
                                        $dstItemState = $rowRw[34];
                                        $funcCrncyRate = (float) $rowRw[21];
                                        $lineDesc = $rowRw[36];
                                        if ($trnsType == $trnsTypes[8]) {
                                            if (((int) $rowRw[4]) > 0) {
                                                $lineTrnsType = "Refund";
                                                $runningBalance = (float) $rowRw[37];
                                            } else if (((int) $rowRw[6]) > 0) {
                                                $lineTrnsType = "Payment";
                                                $runningBalance = (float) $rowRw[35];
                                            }
                                        } else {
                                            if (((int) $rowRw[4]) > 0) {
                                                $lineTrnsType = "Payment";
                                                $runningBalance = (float) $rowRw[35];
                                            } else if (((int) $rowRw[6]) > 0) {
                                                $lineTrnsType = "Refund";
                                                $runningBalance = (float) $rowRw[37];
                                            }
                                        }
                                    }
                                    $cntr += 1;
                                    ?>
                                    <tr id="oneVmsPymtsRow_<?php echo $cntr; ?>">                                    
                                        <td class="lovtd"><span><?php echo ($cntr); ?></span></td>
                                        <td class="lovtd">                                            
                                            <input type="text" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_ItemNm" name="oneVmsPymtsRow<?php echo $cntr; ?>_ItemNm" value="<?php echo $itemName; ?>" readonly="true" style="width:100% !important;">
                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_ItmID" value="<?php echo $itemID; ?>" style="width:100% !important;">
                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_BaseUoMID" value="<?php echo $baseUOMID; ?>" style="width:100% !important;">     
                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $trnsLnID; ?>" style="width:100% !important;">                                                      
                                        </td> 
                                        <td class="lovtd"  style="<?php echo $srcCageColDsply; ?>">
                                            <div class="input-group" style="width:100% !important;">
                                                <input type="text" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_SrcCageNm" name="oneVmsPymtsRow<?php echo $cntr; ?>_SrcCageNm" value="<?php echo $srcCageNm; ?>" readonly="true" style="width:100% !important;">
                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_SrcCageID" value="<?php echo $srcCageID; ?>" style="width:100% !important;">                                              
                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $srcCageID; ?>', 'oneVmsPymtsRow<?php echo $cntr; ?>_SrcCageID', 'oneVmsPymtsRow<?php echo $cntr; ?>_SrcCageNm', 'clear', 1, '', function () {
                                                            getVMSTrnsPymtForm('<?php echo $trnsType; ?>', 32, 'ReloadDialog');
                                                        });">
                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                </label>
                                            </div> 
                                        </td> 
                                        <td class="lovtd" style="<?php echo $dstCageColDsply; ?>">
                                            <div class="input-group" style="width:100% !important;">
                                                <input type="text" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_DstCageNm" name="oneVmsPymtsRow<?php echo $cntr; ?>_DstCageNm" value="<?php echo $destCageNm; ?>" readonly="true" style="width:100% !important;">
                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_DstCageID" value="<?php echo $destCageID; ?>" style="width:100% !important;">                                              
                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $destCageID; ?>', 'oneVmsPymtsRow<?php echo $cntr; ?>_DstCageID', 'oneVmsPymtsRow<?php echo $cntr; ?>_DstCageNm', 'clear', 1, '', function () {
                                                            getVMSTrnsPymtForm('<?php echo $trnsType; ?>', 32, 'ReloadDialog');
                                                        });">
                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                </label>
                                            </div> 
                                        </td> 
                                        <td class="lovtd"  style="">
                                            <select data-placeholder="Select..." class="form-control chosen-select" id="oneVmsPymtsRow<?php echo $cntr; ?>_LnTrnsType" style="width:100% !important;" onchange="calcAllPymtRowsTtlVals();">
                                                <?php
                                                $valslctdArry = array("", "");
                                                $srchInsArrys = array("Payment", "Refund");
                                                for ($z = 0; $z < count($srchInsArrys); $z++) {
                                                    if ($lineTrnsType == $srchInsArrys[$z]) {
                                                        $valslctdArry[$z] = "selected";
                                                    }
                                                    ?>
                                                    <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                                <?php } ?>
                                            </select>
                                        </td>
                                        <td class="lovtd">
                                            <input type="text" class="form-control vmsPymtQty" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_Qty" name="oneVmsPymtsRow<?php echo $cntr; ?>_Qty" value="<?php
                                            echo number_format($qty, 0);
                                            ?>"  onchange="calcPymtBrkdwnRowVal('oneVmsPymtsRow_<?php echo $cntr; ?>');" onkeypress="vmsPymtFormKeyPress(event, 'oneVmsPymtsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                            
                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_UntVal" name="oneVmsPymtsRow<?php echo $cntr; ?>_UntVal" value="<?php echo $unitVal;
                                            ?>" style="width:100% !important;" readonly="true">                                                      
                                        </td>
                                        <td class="lovtd">
                                            <span><?php echo $baseUOMNm; ?></span>
                                        </td>
                                        <td class="lovtd">
                                            <input type="text" class="form-control vmsPymtTtl" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsPymtsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                            echo number_format($ttlRowVal, 2);
                                            ?>" onchange="calcPymtBrkdwnTtlVal('oneVmsPymtsRow_<?php echo $cntr; ?>');" onkeypress="vmsPymtFormTtlFldKeyPress(event, 'oneVmsPymtsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                        </td>
                                        <td class="lovtd" style="<?php echo $dsplyPymntInfo; ?>">
                                            <input type="text" class="form-control vmsPymtFncCrncy" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_PymntCrncyRate" name="oneVmsPymtsRow<?php echo $cntr; ?>_PymntCrncyRate" value="<?php
                                            echo number_format($funcCrncyRate, 15);
                                            ?>" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                        </td> 
                                        <td class="lovtd" style="<?php echo $dsplyBalance; ?>">
                                            <input type="text" class="form-control vmsPymtRnngBal" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_RnngBal" name="oneVmsPymtsRow<?php echo $cntr; ?>_RnngBal" value="<?php
                                            if ($srcCageID > 0) {
                                                echo number_format($runningBalance, 2);
                                            } else {
                                                echo "0.00";
                                            }
                                            ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                   <?php
                                                   if (strpos($capturedItemIDs, ";" . $itemID . ";") === FALSE) {
                                                       $capturedItemIDs = ";" . $itemID . ";";
                                                       $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsPymtsFrmCage_" . $itemID . "\" name=\"oneVmsPymtsFrmCage_" . $itemID . "\" value=\"" . number_format($runningBalance,
                                                                       2) . "\" readonly=\"true\">";
                                                   }
                                                   ?>
                                        </td>
                                        <td class="lovtd" style="<?php echo $dsplySrcItemState; ?>">
                                            <div class="input-group" style="width:100% !important;">
                                                <input type="text" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_SrcItemState" name="oneVmsPymtsRow<?php echo $cntr; ?>_SrcItemState" value="<?php echo $srcItemState; ?>" readonly="true" style="width:100% !important;">
                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsPymtsRow<?php echo $cntr; ?>_SrcItemState', 'clear', 1, '', function () {
                                                            //alert('Item Selected');
                                                        });">
                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                </label>
                                            </div> 
                                        </td> 
                                        <td class="lovtd" style="<?php echo $dsplyDstItemState; ?>">
                                            <div class="input-group" style="width:100% !important;">
                                                <input type="text" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_DstItemState" name="oneVmsPymtsRow<?php echo $cntr; ?>_DstItemState" value="<?php echo $dstItemState; ?>" readonly="true" style="width:100% !important;">
                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsPymtsRow<?php echo $cntr; ?>_DstItemState', 'clear', 1, '', function () {
                                                            //alert('Item Selected');
                                                        });">
                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                </label>
                                            </div> 
                                        </td>
                                        <td class="lovtd">
                                            <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsPymtsLine('oneVmsPymtsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete Payment Line">
                                                <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                            </button>
                                        </td>
                                    </tr>
                                    <?php
                                }
                                if (($voidedTrnsHdrID <= 0 || $orgnlVmsTrnsHdrID <= 0) && ($rqStatus == "Not Submitted" || $rqStatus == "Withdrawn" ||
                                        $rqStatus == "Rejected")) {
                                    $excludedItems = trim($excludedItems, ", ");
                                    $resultRw = get_Fresh_VMSTrnsLines($sbmtdVmsTrnsHdrID, $vmsPymtCrncyID, $destCageID, $excludedItems, $destVltID,
                                            $dfltItemState, $srcCageID, $srcVltID, $dfltItemState, -1, "%");
                                    $maxNoRows = loc_db_num_rows($resultRw);
                                    $cntr1 = 0;
                                    while ($cntr1 < $maxNoRows) {
                                        $itemID = -1;
                                        $trnsLnID = -1;
                                        $itemName = "";
                                        $baseUOMID = -1;
                                        $unitVal = 0.00;
                                        $qty = 0.00;
                                        $baseUOMNm = "";
                                        $ttlRowVal = 0.00;
                                        $srcItemState = $dfltItemState;
                                        $dstItemState = $dfltItemState;
                                        $funcCrncyRate = 0;
                                        $lineDesc = "";
                                        $lineTrnsType = "Payment";
                                        $runningBalance = 0;
                                        if ($rowRw = loc_db_fetch_array($resultRw)) {
                                            $trnsLnID = (float) $rowRw[0];
                                            $itemID = (int) $rowRw[2];
                                            $itemName = $rowRw[29];
                                            $unitVal = (float) $rowRw[9];
                                            $baseUOMNm = $rowRw[31];
                                            $baseUOMID = (int) $rowRw[26];
                                            $qty = (float) $rowRw[7];
                                            $ttlRowVal = $qty * $unitVal;
                                            $lineDesc = $lineTrnsType;
                                            $runningBalance = (float) $rowRw[37];
                                            //$dstRunningBalance = (float) $rowRw[37];
                                            //$srcItemState = $rowRw[27];
                                            //$dstItemState = $rowRw[34];
                                            $funcCrncyRate = (float) $rowRw[21];
                                        }
                                        $cntr += 1;
                                        $cntr1 += 1;
                                        ?>
                                        <tr id="oneVmsPymtsRow_<?php echo $cntr; ?>">                                    
                                            <td class="lovtd"><span><?php echo ($cntr); ?></span></td>
                                            <td class="lovtd">                                            
                                                <input type="text" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_ItemNm" name="oneVmsPymtsRow<?php echo $cntr; ?>_ItemNm" value="<?php echo $itemName; ?>" readonly="true" style="width:100% !important;">
                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_ItmID" value="<?php echo $itemID; ?>" style="width:100% !important;">
                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_BaseUoMID" value="<?php echo $baseUOMID; ?>" style="width:100% !important;">     
                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $trnsLnID; ?>" style="width:100% !important;">                                                      
                                            </td>
                                            <td class="lovtd"  style="<?php echo $srcCageColDsply; ?>">
                                                <div class="input-group" style="width:100% !important;">
                                                    <input type="text" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_SrcCageNm" name="oneVmsPymtsRow<?php echo $cntr; ?>_SrcCageNm" value="<?php echo $srcCageNm; ?>" readonly="true" style="width:100% !important;">
                                                    <input type="hidden" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_SrcCageID" value="<?php echo $srcCageID; ?>" style="width:100% !important;">                                              
                                                    <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $srcCageID; ?>', 'oneVmsPymtsRow<?php echo $cntr; ?>_SrcCageID', 'oneVmsPymtsRow<?php echo $cntr; ?>_SrcCageNm', 'clear', 1, '', function () {
                                                                getVMSTrnsPymtForm('<?php echo $trnsType; ?>', 32, 'ReloadDialog');
                                                            });">
                                                        <span class="glyphicon glyphicon-th-list"></span>
                                                    </label>
                                                </div> 
                                            </td> 
                                            <td class="lovtd" style="<?php echo $dstCageColDsply; ?>">
                                                <div class="input-group" style="width:100% !important;">
                                                    <input type="text" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_DstCageNm" name="oneVmsPymtsRow<?php echo $cntr; ?>_DstCageNm" value="<?php echo $destCageNm; ?>" readonly="true" style="width:100% !important;">
                                                    <input type="hidden" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_DstCageID" value="<?php echo $destCageID; ?>" style="width:100% !important;">                                              
                                                    <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All VMS Vault Cages', '', 'vmsTrnsCrncyNm', '', 'radio', true, '<?php echo $destCageID; ?>', 'oneVmsPymtsRow<?php echo $cntr; ?>_DstCageID', 'oneVmsPymtsRow<?php echo $cntr; ?>_DstCageNm', 'clear', 1, '', function () {
                                                                getVMSTrnsPymtForm('<?php echo $trnsType; ?>', 32, 'ReloadDialog');
                                                            });">
                                                        <span class="glyphicon glyphicon-th-list"></span>
                                                    </label>
                                                </div> 
                                            </td> 
                                            <td class="lovtd"  style="">
                                                <select data-placeholder="Select..." class="form-control chosen-select" id="oneVmsPymtsRow<?php echo $cntr; ?>_LnTrnsType" style="width:100% !important;" onchange="calcAllPymtRowsTtlVals();">
                                                    <?php
                                                    $valslctdArry = array("", "");
                                                    $srchInsArrys = array("Payment", "Refund");
                                                    for ($z = 0; $z < count($srchInsArrys); $z++) {
                                                        if ($lineTrnsType == $srchInsArrys[$z]) {
                                                            $valslctdArry[$z] = "selected";
                                                        }
                                                        ?>
                                                        <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                                    <?php } ?>
                                                </select>
                                            </td>
                                            <td class="lovtd">
                                                <input type="text" class="form-control vmsPymtQty" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_Qty" name="oneVmsPymtsRow<?php echo $cntr; ?>_Qty" value="<?php
                                                echo number_format($qty, 0);
                                                ?>"  onchange="calcPymtBrkdwnRowVal('oneVmsPymtsRow_<?php echo $cntr; ?>');" onkeypress="vmsPymtFormKeyPress(event, 'oneVmsPymtsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;">                                            
                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_UntVal" name="oneVmsPymtsRow<?php echo $cntr; ?>_UntVal" value="<?php echo $unitVal;
                                                ?>" style="width:100% !important;" readonly="true">                                                      
                                            </td>
                                            <td class="lovtd">
                                                <span><?php echo $baseUOMNm; ?></span>
                                            </td>
                                            <td class="lovtd">
                                                <input type="text" class="form-control vmsPymtTtl" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsPymtsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                                echo number_format($ttlRowVal, 2);
                                                ?>" onchange="calcPymtBrkdwnTtlVal('oneVmsPymtsRow_<?php echo $cntr; ?>');" onkeypress="vmsPymtFormTtlFldKeyPress(event, 'oneVmsPymtsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;">                                                    
                                            </td>
                                            <td class="lovtd" style="<?php echo $dsplyPymntInfo; ?>">
                                                <input type="text" class="form-control vmsPymtFncCrncy" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_PymntCrncyRate" name="oneVmsPymtsRow<?php echo $cntr; ?>_PymntCrncyRate" value="<?php
                                                echo number_format($funcCrncyRate, 15);
                                                ?>" style="width:100% !important;text-align: right;">                                                    
                                            </td>
                                            <td class="lovtd" style="<?php echo $dsplyBalance; ?>">
                                                <input type="text" class="form-control vmsPymtRnngBal" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_RnngBal" name="oneVmsPymtsRow<?php echo $cntr; ?>_RnngBal" value="<?php
                                                echo number_format($runningBalance, 2);
                                                ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                       <?php
                                                       if (strpos($capturedItemIDs, ";" . $itemID . ";") === FALSE) {
                                                           $capturedItemIDs = ";" . $itemID . ";";
                                                           $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsPymtsFrmCage_" . $itemID . "\" name=\"oneVmsPymtsFrmCage_" . $itemID . "\" value=\"" . number_format($runningBalance,
                                                                           2) . "\" readonly=\"true\">";
                                                       }
                                                       ?>
                                            </td> 
                                            <td class="lovtd" style="<?php echo $dsplySrcItemState; ?>">
                                                <div class="input-group" style="width:100% !important;">
                                                    <input type="text" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_SrcItemState" name="oneVmsPymtsRow<?php echo $cntr; ?>_SrcItemState" value="<?php echo $srcItemState; ?>" readonly="true" style="width:100% !important;">
                                                    <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsPymtsRow<?php echo $cntr; ?>_SrcItemState', 'clear', 1, '', function () {
                                                                //alert('Item Selected');
                                                            });">
                                                        <span class="glyphicon glyphicon-th-list"></span>
                                                    </label>
                                                </div> 
                                            </td> 
                                            <td class="lovtd" style="<?php echo $dsplyDstItemState; ?>">
                                                <div class="input-group" style="width:100% !important;">
                                                    <input type="text" class="form-control" aria-label="..." id="oneVmsPymtsRow<?php echo $cntr; ?>_DstItemState" name="oneVmsPymtsRow<?php echo $cntr; ?>_DstItemState" value="<?php echo $dstItemState; ?>" readonly="true" style="width:100% !important;">
                                                    <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item States', '', '', '', 'radio', true, '', '', 'oneVmsPymtsRow<?php echo $cntr; ?>_DstItemState', 'clear', 1, '', function () {
                                                                //alert('Item Selected');
                                                            });">
                                                        <span class="glyphicon glyphicon-th-list"></span>
                                                    </label>
                                                </div> 
                                            </td>
                                            <td class="lovtd">
                                                <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsPymtsLine('oneVmsPymtsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete Payment Line">
                                                    <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                        </tr>
                                        <?php
                                    }
                                }
                                ?>
                            </tbody>
                        </table>                        
                        <div id="rnngPymtBalsHiddenFields">
                            <?php echo $extrInputFlds; ?>
                        </div>
                    </div>
                </div>
                <?php
            } else if ($vwtyp == 34) {
                //Direct Cage/Shelve Transaction
                $sbmtdVmsTrnsHdrID = isset($_POST['sbmtdVmsTrnsHdrID']) ? cleanInputData($_POST['sbmtdVmsTrnsHdrID']) : -1;
                $sbmtdShelfID = isset($_POST['sbmtdShelfID']) ? cleanInputData($_POST['sbmtdShelfID']) : -1;
                $sbmtdStoreID = isset($_POST['sbmtdStoreID']) ? cleanInputData($_POST['sbmtdStoreID']) : -1;
                $sbmtdSiteID = isset($_POST['sbmtdSiteID']) ? cleanInputData($_POST['sbmtdSiteID']) : -1;
                $sbmtdItmID = isset($_POST['sbmtdItmID']) ? cleanInputData($_POST['sbmtdItmID']) : -1;
                $isFrmBnkng = isset($_POST['isFrmBnkng']) ? cleanInputData($_POST['isFrmBnkng']) : -1;
                $tblrVwTyp = isset($_POST['tblrVwTyp']) ? cleanInputData($_POST['tblrVwTyp']) : 13;
                $trnsType = "Direct Cage/Shelve Transaction";
                $dfltItemState = getGnrlRecNm("inv.inv_shelf", "line_id", "dflt_item_state", $sbmtdShelfID);
                $crntVltNm = getGnrlRecNm("inv.inv_itm_subinventories", "subinv_id", "subinv_name", $sbmtdStoreID);
                $crntCageNm = getGnrlRecNm("inv.inv_shelf", "line_id", "shelve_name", $sbmtdShelfID);
                if (!$canAddTrns || ($sbmtdVmsTrnsHdrID > 0 && !$canEdtTrns)) {
                    restricted();
                    exit();
                }
                $orgnlVmsTrnsHdrID = $sbmtdVmsTrnsHdrID;
                $rqStatus = "Not Submitted";
                $actType = "";
                $rqstatusColor = "red";
                $dte = date('ymdHis');
                $usrTrnsCode = getGnrlRecNm("sec.sec_users", "user_id", "code_for_trns_nums", $usrID);
                $gnrtdTrnsNo = "DCT-" . $usrTrnsCode . "-" . $dte;
                $gnrtdTrnsDate = $gnrlTrnsDteDMYHMS; //date('d-M-Y H:i:s');
                $gnrtdTrnsDate1 = $gnrlTrnsDteYMDHMS; //date('Y-m-d H:i:s');
                $prprdBy = "<span style=\"color:blue;font-weight:bold;\">" . $uName . "@" . $gnrtdTrnsDate . "</span>";
                $brnchLocID = getLatestSiteID($prsnid);
                $brnchLoc = getGnrlRecNm("org.org_sites_locations", "location_id",
                        "REPLACE(location_code_name || '.' || site_desc, '.' || location_code_name,'')", $brnchLocID);
                $crncyID = $fnccurid;
                $crncyIDNm = $fnccurnm;
                $pymtCrncyNm = "";
                $pymtCrncyID = -1;
                $srcVltID = $sbmtdStoreID;
                $srcCageID = $sbmtdShelfID;
                $destVltID = $sbmtdStoreID;
                $destCageID = $sbmtdShelfID;
                $srcVltNm = $crntVltNm;
                $srcCageNm = $crntCageNm;
                $destVltNm = $crntVltNm;
                $destCageNm = $crntCageNm;
                $vldtyStatus = "<span style=\"color:red;font-weight:bold;\">Not Validated</span>";
                $athrztnStatus = "<span style=\"color:red;font-weight:bold;\">Not Submitted</span>";
                $itmBaseUomNm = "pcs";
                $voidedTrnsHdrID = -1;
                $voidedTrnsType = "";
                $vmsTrnsDesc = "";
                $vmsTrnsClsfctn = "";
                $vmsTrnsTtlAmnt = 0;
                $vmsPymtTtlAmnt = 0;
                $vmsPymtCrncyID = -1;
                $vmsPymtCrncyNm = "";
                $mkReadOnly = "";
                $mkRmrkReadOnly = "";
                $cstmrID = -1;
                $cstmrNm = -1;
                $cstmrSiteID = -1;
                $exchangeRate = 0;
                $vmsTrnsPrsn = "N/A";
                $vmsChequeNo = "";
                $vmsOffctStaffLocID = getPersonLocID($prsnid);
                $vmsOffctStaffPrsID = $prsnid;
                $vmsOffctStaff = getPrsnFullNm($prsnid);
                $extrInputFlds = "";
                $capturedItemIDs = "";
                if ($sbmtdVmsTrnsHdrID > 0) {
                    //Important! Must Check if One also has prmsn to Edit brought Trns Hdr ID
                    calcAllVMSLinesTtlVals($sbmtdVmsTrnsHdrID);
                    $result = get_One_VMSTrnsHdr($sbmtdVmsTrnsHdrID);
                    if ($row = loc_db_fetch_array($result)) {
                        $trnsType = $row[3];
                        $rqStatus = $row[10];
                        $voidedTrnsHdrID = (float) $row[13];
                        $voidedTrnsType = $row[14];
                        if ($rqStatus == "Not Submitted" || $rqStatus == "Withdrawn" || $rqStatus == "Rejected") {
                            $rqstatusColor = "red";
                            if ($voidedTrnsHdrID <= 0) {
                                $mkReadOnly = "";
                                $mkRmrkReadOnly = "";
                            } else {
                                $mkReadOnly = "readonly=\"true\"";
                                $mkRmrkReadOnly = "";
                            }
                        } else if ($rqStatus != "Authorized") {
                            $mkReadOnly = "readonly=\"true\"";
                            $mkRmrkReadOnly = "readonly=\"true\"";
                            $rqstatusColor = "brown";
                        } else {
                            $rqstatusColor = "green";
                            $mkReadOnly = "readonly=\"true\"";
                            $mkRmrkReadOnly = "readonly=\"true\"";
                        }
                        $gnrtdTrnsNo = $row[2];
                        $gnrtdTrnsDate = $row[1];
                        $uName11 = getUserName((float) $row[15]);
                        $prprdBy = "<span style=\"color:blue;font-weight:bold;\">" . $uName11 . "@" . $gnrtdTrnsDate . "</span>";
                        $brnchLocID = (int) $row[20];
                        $brnchLoc = getGnrlRecNm("org.org_sites_locations", "location_id",
                                "REPLACE(location_code_name || '.' || site_desc, '.' || location_code_name,'')", $brnchLocID);
                        $crncyID = (int) $row[30];
                        $crncyIDNm = $row[31];
                        if ($crncyID <= 0) {
                            $crncyID = $fnccurid;
                            $crncyIDNm = $fnccurnm;
                        }
                        if ($row[12] == "Validated") {
                            $vldtyStatus = "<span style=\"color:green;font-weight:bold;\">" . $row[12] . "</span>";
                        } else {
                            $vldtyStatus = "<span style=\"color:red;font-weight:bold;\">" . $row[12] . "</span>";
                        }
                        if ($row[10] == "Authorized") {
                            $athrztnStatus = "<span style=\"color:green;font-weight:bold;\">" . $row[10] . "</span>";
                        } else {
                            $athrztnStatus = "<span style=\"color:red;font-weight:bold;\">" . $row[10] . "</span>";
                        }
                        if ($voidedTrnsHdrID <= 0) {
                            $vmsTrnsDesc = $row[4];
                        } else {
                            $vmsTrnsDesc = $row[36];
                        }
                        $srcVltID = (int) $row[22];
                        $srcCageID = (int) $row[24];
                        $destVltID = (int) $row[26];
                        $destCageID = (int) $row[28];
                        $srcVltNm = $row[23];
                        $srcCageNm = $row[25];
                        $destVltNm = $row[27];
                        $destCageNm = $row[29];

                        $vmsTrnsClsfctn = $row[9];
                        $vmsTrnsTtlAmnt = (float) $row[21];
                        $vmsPymtTtlAmnt = (float) $row[34];
                        $vmsPymtCrncyID = (float) $row[32];
                        $vmsPymtCrncyNm = $row[33];
                        $cstmrID = (float) $row[5];
                        $cstmrNm = $row[6];
                        $cstmrSiteID = (float) $row[7];
                        $exchangeRate = $row[35];
                        $vmsTrnsPrsn = $row[38];
                        $vmsOffctStaffLocID = $row[39];
                        $vmsOffctStaff = $row[40];
                        $vmsChequeNo = $row[42];
                        $vmsOffctStaffPrsID = (float) $row[41];
                    }
                } else {
                    $sbmtdVmsTrnsHdrID = getNewTrnsHdrID();
                    createVMSTrnsHdr($sbmtdVmsTrnsHdrID, $gnrtdTrnsDate1, $gnrtdTrnsNo, $trnsType, "", -1, -1, $voidedTrnsHdrID, $voidedTrnsType, "",
                            $brnchLocID, 0.00, $srcVltID, $srcCageID, $destVltID, $destCageID, $crncyID, -1, 0, 0, '1', $vmsTrnsPrsn,
                            $vmsOffctStaffPrsID);
                }
                $routingID = getVMSMxRoutingID($sbmtdVmsTrnsHdrID);

                $reportTitle = $trnsType;
                $reportName = "VMS Transaction Voucher";
                if ($trnsType == $trnsTypes[4] || $trnsType == $trnsTypes[5] || $trnsType == $trnsTypes[6]) {
                    $reportName = "VMS DEP/WITHDRAW Voucher";
                }
                $rptID = getRptID($reportName);
                $prmID1 = getParamIDUseSQLRep("{:trns_id}", $rptID);
                $prmID2 = getParamIDUseSQLRep("{:documentTitle}", $rptID);
                $trnsID = $sbmtdVmsTrnsHdrID;
                $paramRepsNVals = $prmID1 . "~" . $trnsID . "|" . $prmID2 . "~" . $reportTitle . "|-130~" . $reportTitle . "|-190~PDF";
                $paramStr = urlencode($paramRepsNVals);

                $trayCnvFctr = 0;
                $bndlCnvFctr = 0;
                $curRslt = get_All_Crncies($crncyID, "Note");
                while ($rowCur = loc_db_fetch_array($curRslt)) {
                    $itmID = (int) $rowCur[0];
                    $trayCnvFctr = getUomCnvrsnFctr($itmID, "tray");
                    $bndlCnvFctr = getUomCnvrsnFctr($itmID, "bundle");
                }
                ?>
                <form class="form-horizontal" id="oneDirectVmsTrnsFrm">
                    <div class="row" style="margin: 0px 0px 10px 0px !important;">
                        <div class="col-md-6" style="padding:0px 15px 0px 0px !important;">
                            <div class="" style="padding:0px 0px 0px 0px;float:left !important;">                               
                                <button type="button" class="btn btn-default btn-sm" style="" id="myVmsTrnsStatusBtn"><span style="font-weight:bold;">Status: </span><span style="color:<?php echo $rqstatusColor; ?>;font-weight: bold;"><?php echo $rqStatus; ?></span></button>
                                <button type="button" class="btn btn-default btn-sm" style="" onclick="clearVMSForm('oneVmsTrnsLnsTable');"><img src="cmn_images/undo_256.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;">Clear Form&nbsp;</button>
                                <?php //if ($rqStatus == "Authorized") {                                                ?>
                                <button type="button" class="btn btn-default" style="" onclick="getSilentRptsRnSts(<?php echo $rptID; ?>, -1, '<?php echo $paramStr; ?>');" style="width:100% !important;">
                                    <img src="cmn_images/pdf.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;">
                                    Print Transaction
                                </button>
                                <?php //}                                               ?>
                            </div>
                        </div> 
                        <div class="col-md-6" style="padding:0px 0px 0px 0px !important;">
                            <div class="" style="padding:0px 0px 0px 0px;float:right !important;"> 
                                <?php
                                if ($rqStatus == "Not Submitted" || $rqStatus == "Withdrawn" || $rqStatus == "Rejected") {
                                    ?>
                                    <?php if ($voidedTrnsHdrID <= 0) { ?>  
                                        <button type="button" class="btn btn-default btn-sm" style="" onclick="saveVmsDrctTrnsForm('<?php echo $fnccurnm; ?>', 0, <?php echo $tblrVwTyp; ?>, '<?php echo $srcMenu; ?>',<?php echo $isFrmBnkng; ?>, <?php echo $sbmtdShelfID; ?>, <?php echo $sbmtdSiteID; ?>, <?php echo $sbmtdStoreID; ?>);"><img src="cmn_images/FloppyDisk.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;">Save&nbsp;</button>                                             
                                        <button type="button" class="btn btn-default btn-sm" style="" onclick="saveVmsDrctTrnsForm('<?php echo $fnccurnm; ?>', 1, <?php echo $tblrVwTyp; ?>, '<?php echo $srcMenu; ?>',<?php echo $isFrmBnkng; ?>, <?php echo $sbmtdShelfID; ?>, <?php echo $sbmtdSiteID; ?>, <?php echo $sbmtdStoreID; ?>);"><img src="cmn_images/Emailcon.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;">Submit&nbsp;</button>
                                    <?php } else { ?>                                          
                                        <button type="button" class="btn btn-default btn-sm" style="" onclick="saveVmsRvrsTrnsForm('<?php echo $fnccurnm; ?>', 1, <?php echo $tblrVwTyp; ?>, '<?php echo $srcMenu; ?>',<?php echo $isFrmBnkng; ?>, <?php echo $sbmtdShelfID; ?>, <?php echo $sbmtdSiteID; ?>, <?php echo $sbmtdStoreID; ?>);"><img src="cmn_images/Emailcon.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;">Submit Reversal&nbsp;</button>
                                    <?php } ?>
                                    <?php
                                } else if ($rqStatus != "Authorized") {
                                    ?>                                    
                                    <button type="button" class="btn btn-default btn-sm" style="" onclick="wthdrwVMSTrnsRqst('<?php echo $trnsType; ?>', 34, <?php echo $tblrVwTyp; ?>, '<?php echo $srcMenu; ?>',<?php echo $isFrmBnkng; ?>, <?php echo $sbmtdShelfID; ?>, <?php echo $sbmtdSiteID; ?>, <?php echo $sbmtdStoreID; ?>);"><img src="cmn_images/withdraw_rqst.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;">Withdraw&nbsp;</button>                                     
                                    <button type="button" class="btn btn-default btn-sm" style="" onclick="authrzeVMSTrnsRqst('<?php echo $trnsType; ?>', 34, <?php echo $tblrVwTyp; ?>, '<?php echo $srcMenu; ?>',<?php echo $isFrmBnkng; ?>, <?php echo $sbmtdShelfID; ?>, <?php echo $sbmtdSiteID; ?>, <?php echo $sbmtdStoreID; ?>);"><img src="cmn_images/Stamp-512.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;">Authorize&nbsp;</button>                                                                                                         
                                    <button type="button" class="btn btn-default btn-sm" style="" onclick="checkWkfRqstStatus(<?php echo $routingID; ?>, 'VMS Trns. Authorization Progress History');"><img src="cmn_images/workflow.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;">Progress&nbsp;</button>                                
                                    <?php
                                } else if ($rqStatus == "Authorized") {
                                    ?>
                                    <button type="button" class="btn btn-default btn-sm" style="" onclick="checkWkfRqstStatus(<?php echo $routingID; ?>, 'VMS Trns. Authorization Progress History');"><img src="cmn_images/workflow.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;" data-toggle="tooltip" title="Authorization Progress History">Progress&nbsp;</button>  
                                    <button type="button" class="btn btn-default btn-sm" style="" onclick="saveVmsRvrsTrnsForm('<?php echo $fnccurnm; ?>', 0, <?php echo $tblrVwTyp; ?>, '<?php echo $srcMenu; ?>',<?php echo $isFrmBnkng; ?>, <?php echo $sbmtdShelfID; ?>, <?php echo $sbmtdSiteID; ?>, <?php echo $sbmtdStoreID; ?>);"><img src="cmn_images/90.png" style="left: 0.5%; padding-right: 5px; height:17px; width:auto; position: relative; vertical-align: middle;">Void Transaction&nbsp;</button>                               
                                <?php }
                                ?>
                            </div>
                        </div>                    
                    </div>
                    <fieldset class="basic_person_fs2" style="min-height:50px !important;">
                        <!--<legend class="basic_person_lg">Transaction Header Information</legend>-->
                        <div class="row" style="margin-top:5px;">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <div class="col-md-4">
                                        <label style="margin-bottom:0px !important;">Transaction No.:</label>
                                    </div>
                                    <div class="col-md-8">
                                        <input type="text" class="form-control" aria-label="..." id="vmsTrnsNum" name="vmsTrnsNum" value="<?php echo $gnrtdTrnsNo; ?>" readonly="true">
                                        <input class="form-control" type="hidden" id="vmsTrnsHdrID" value="<?php echo $sbmtdVmsTrnsHdrID; ?>"/>
                                        <input class="form-control" type="hidden" id="vmsVoidedTrnsHdrID" value="<?php echo $voidedTrnsHdrID; ?>"/>
                                        <input class="form-control" type="hidden" id="newVMSHdrID" value="-1"/>
                                        <input type="hidden" id="gnrlVmsOrgID" value="<?php echo $orgID; ?>">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-4">
                                        <label style="margin-bottom:0px !important;">Transaction Date:</label>
                                    </div>
                                    <div class="col-md-8">
                                        <input type="text" class="form-control" aria-label="..." id="vmsTrnsDate" name="vmsTrnsDate" value="<?php echo $gnrtdTrnsDate; ?>" readonly="true">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-4">
                                        <label style="margin-bottom:0px !important;">Transaction Type:</label>
                                    </div>
                                    <div class="col-md-8">
                                        <?php if ($trnsType != "") { ?>
                                            <input type="text" class="form-control" aria-label="..." id="vmsTrnsType" name="vmsTrnsType" value="<?php echo $trnsType; ?>" readonly="true">
                                        <?php } else { ?>
                                            <div class="input-group">
                                                <input type="text" class="form-control rqrdFld" aria-label="..." id="vmsTrnsType" name="vmsTrnsType" value="<?php echo $trnsType; ?>" <?php echo $mkReadOnly; ?>>
                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All Customers and Suppliers', 'gnrlVmsOrgID', '', '', 'radio', true, '', '', 'vmsTrnsType', 'clear', 1, '');">
                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                </label>
                                            </div>
                                        <?php } ?>
                                    </div>
                                </div>
                                <div class = "form-group">
                                    <div class = "col-md-4">
                                        <label style="margin-bottom:0px !important;margin-top:5px !important;">Location:</label>
                                    </div>
                                    <div class = "col-md-8">
                                        <input type="text" class="form-control" aria-label="..." id="vmsBrnchLoc" name="vmsBrnchLoc" value="<?php echo $brnchLoc; ?>" readonly="true">
                                        <input type="hidden" id="vmsBrnchLocID" value="<?php echo $brnchLocID; ?>">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">  
                                <?php $fldLbl = "Client/Vendor"; ?>
                                <div class="form-group form-group-sm">
                                    <label for="vmsCstmrNm" class="control-label col-md-4"><?php echo $fldLbl; ?>:</label>
                                    <div class="col-md-8">
                                        <div class="input-group">
                                            <input type="text" class="form-control" aria-label="..." id="vmsCstmrNm" name="vmsCstmrNm" value="<?php echo $cstmrNm; ?>" readonly="true">
                                            <input type="hidden" id="vmsCstmrID" value="<?php echo $cstmrID; ?>">
                                            <input type="hidden" id="vmsCstmrClsfctn" value="<?php echo $vmsCstmrClsfctn; ?>">
                                            <input class="form-control" type="hidden" id="vmsCstmrSiteID" value="<?php echo $cstmrSiteID; ?>">
                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getCstmrSpplrForm(-1, 'Create/Edit <?php echo $fldLbl; ?>');" data-toggle="tooltip" title="Create New <?php echo $fldLbl; ?>">
                                                <span class="glyphicon glyphicon-plus"></span>
                                            </label>
                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'All Customers and Suppliers', 'gnrlVmsOrgID', '', 'vmsCstmrClsfctn', 'radio', true, '', 'vmsCstmrID', 'vmsCstmrNm', 'clear', 1, '');" data-toggle="tooltip" title="Existing Client/Vendor">
                                                <span class="glyphicon glyphicon-th-list"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>                                                    
                                <div class="form-group">
                                    <div class="col-md-4">
                                        <label style="margin-bottom:0px !important;">Remark / Narration:</label>
                                    </div>
                                    <div class="col-md-8">
                                        <div class="input-group">
                                            <textarea class="form-control rqrdFld input-group-addon" rows="7" id="vmsTrnsDesc" name="vmsTrnsDesc" <?php echo $mkRmrkReadOnly; ?> style="text-align:left !important;"><?php echo $vmsTrnsDesc; ?></textarea>
                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'VMS Transaction Classifications', '', '', '', 'radio', true, '', '', 'vmsTrnsDesc', 'clear', 1, '');">
                                                <span class="glyphicon glyphicon-th-list"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class = "col-md-4">
                                <div class = "form-group">
                                    <div class = "col-md-4">
                                        <label style="margin-bottom:0px !important;">Waybill No.:</label>
                                    </div>
                                    <div class = "col-md-8">
                                        <input type="text" class="form-control" aria-label="..." id="vmsChequeNo" name="vmsChequeNo" value="<?php echo $vmsChequeNo; ?>" <?php echo $mkReadOnly; ?>>
                                    </div>
                                </div>                               
                                <div class = "form-group">
                                    <div class = "col-md-4">
                                        <label style="margin-bottom:0px !important;">Representative's Info:</label>
                                    </div>
                                    <div class = "col-md-8">
                                        <input type="text" class="form-control" aria-label="..." id="vmsTrnsPrsn" name="vmsTrnsPrsn" value="<?php echo $vmsTrnsPrsn; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?>>
                                    </div>
                                </div>
                                <div class = "form-group">
                                    <div class = "col-md-4">
                                        <label style="margin-bottom:0px !important;">Supervising Staff:</label>
                                    </div>
                                    <div class = "col-md-8">                                        
                                        <div class="input-group" style="width:100% !important;">
                                            <input type="text" class="form-control rqrdFld" aria-label="..." id="vmsOffctStaff" name="vmsOffctStaff" value="<?php echo $vmsOffctStaff; ?>" readonly="true" style="width:100% !important;">
                                            <input type="hidden" class="form-control" aria-label="..." id="vmsOffctStaffLocID" value="<?php echo $vmsOffctStaffLocID; ?>" style="width:100% !important;">                                                    
                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Active Persons', 'gnrlVmsOrgID', '', '', 'radio', true, '', 'vmsOffctStaffLocID', 'vmsOffctStaff', 'clear', 1, '');">
                                                <span class="glyphicon glyphicon-th-list"></span>
                                            </label>
                                        </div> 
                                    </div>
                                </div>
                                <div class = "form-group">
                                    <div class = "col-md-4">
                                        <label style="margin-bottom:0px !important;color:blue;margin-top:5px;">Total Amount:</label>
                                    </div>
                                    <div class = "col-md-8">
                                        <div class="input-group">                                    
                                            <input type="text" class="form-control" aria-label="..." id="vmsTrnsCrncyNm" name="vmsTrnsCrncyNm" value="<?php echo $crncyIDNm; ?>" readonly="true" style="width:40px;max-width:40px;">    
                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Currencies', '', '', '', 'radio', true, '<?php echo $crncyIDNm; ?>', 'vmsTrnsCrncyNm', '', 'clear', 0, '', function () {
                                                        reloadVMSTrnsLines(<?php echo $sbmtdVmsTrnsHdrID; ?>, '<?php echo $trnsType; ?>', 36);
                                                    });"> 
                                                <span class="glyphicon glyphicon-th-list"></span>
                                            </label> 
                                            <input class="form-control rqrdFld vmsTtlAmt" type="text" id="ttlVMSDocAmntVal" value="<?php
                                            echo number_format($vmsTrnsTtlAmnt, 2);
                                            ?>"  style="font-weight:bold;" onchange="fmtAsNumber('ttlVMSDocAmntVal');" <?php echo $mkReadOnly; ?>/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <fieldset class="">
                        <!--<legend class="basic_person_lg">Transactional Lines</legend>-->
                        <div class="row">
                            <div class="col-md-12">
                                <ul class="nav nav-tabs" style="margin-top:1px !important;">
                                    <li class="active"><a data-toggle="tabajxdenoms" data-rhodata="" href="#cashItmsNotes" id="cashItmsNotestab" style="padding: 3px 10px !important;">Notes</a></li>
                                    <li><a data-toggle="tabajxdenoms" data-rhodata="" href="#cashItmsCoins" id="cashItmsCoinstab" style="padding: 3px 10px !important;">Coins</a></li>
                                </ul>  
                                <div class="custDiv" style="padding:0px !important;min-height: 40px !important;"> 
                                    <div class="tab-content" style="padding:5px !important;padding-top:7px !important;">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <?php
                                                $dsplyNwLine = "";
                                                $dsplyPymntInfo = "display:none;";
                                                $dsplyPymntCls1 = "col-md-12";
                                                $dsplyPymntCls2 = "";
                                                $dsplyPymntCls3 = "col-md-6";
                                                $dsplyPymntCls4 = "col-md-6";
                                                $srcVltCageDsply = "";
                                                $dstVltCageDsply = "";
                                                $srcCageColDsply = "display:none;";
                                                $dstCageColDsply = "";
                                                $dsplySrcItemState = "";
                                                $dsplyDstItemState = "";
                                                $isSrcDstCagesRqrd = "rqrdFld";
                                                if ($trnsType == $trnsTypes[2] || $trnsType == $trnsTypes[3]) {
                                                    $srcCageColDsply = "";
                                                    $dstCageColDsply = "";
                                                    $dsplyDstBalance = "";
                                                    $dsplySrcBalance = "";
                                                } else if ($trnsType == $trnsTypes[8] || $trnsType == $trnsTypes[9] || $trnsType == $trnsTypes[6]) {
                                                    $dsplyNwLine = "display:none;";
                                                    $dsplyPymntInfo = "";
                                                    $dsplyPymntCls1 = "col-md-6";
                                                    $dsplyPymntCls2 = "col-md-6";
                                                    $dsplyPymntCls3 = "col-md-6";
                                                    $dsplyPymntCls4 = "col-md-6";
                                                    $srcCageColDsply = "display:none;";
                                                    $dstCageColDsply = "display:none;";
                                                    if ($trnsType == $trnsTypes[8]) {
                                                        $srcVltCageDsply = "";
                                                        $dsplySrcItemState = "";
                                                        $dstVltCageDsply = "display:none;";
                                                        $dsplyDstItemState = "display:none;";
                                                    } else if ($trnsType == $trnsTypes[9]) {
                                                        $dsplySrcItemState = "display:none;";
                                                        $srcVltCageDsply = "display:none;";
                                                        $dstVltCageDsply = "";
                                                        $dsplyDstItemState = "";
                                                    } else if ($trnsType == $trnsTypes[6]) {
                                                        $srcVltCageDsply = "display:none;";
                                                        $dstVltCageDsply = "";
                                                        $srcCageColDsply = "display:none;";
                                                        $dstCageColDsply = "";
                                                        $dsplySrcItemState = "display:none;";
                                                        $dsplyDstItemState = "";
                                                    }
                                                } else if ($trnsType == $trnsTypes[10] || $trnsType == $trnsTypes[11]) {
                                                    $srcVltCageDsply = "";
                                                    $dstVltCageDsply = "";
                                                    $srcCageColDsply = "";
                                                    $dstCageColDsply = "";
                                                    $isSrcDstCagesRqrd = "";
                                                    if ($trnsType == $trnsTypes[10]) {
                                                        $srcVltCageDsply = "display:none;";
                                                        $dstVltCageDsply = "";
                                                        $srcCageColDsply = "display:none;";
                                                        $dstCageColDsply = "";
                                                        $dsplySrcBalance = "display:none;";
                                                        $dsplyDstBalance = "";
                                                        /* $srcVltCageDsply = "";
                                                          $dstVltCageDsply = "";
                                                          $srcCageColDsply = "";
                                                          $dstCageColDsply = ""; */
                                                        $isSrcDstCagesRqrd = "rqrdFld";
                                                        $dsplySrcItemState = "";
                                                        $dsplyDstItemState = "";
                                                        $dsplyLnRemark = "display:none;";
                                                    }
                                                } else if ($trnsType == $trnsTypes[4]) {
                                                    $srcVltCageDsply = "display:none;";
                                                    $dstVltCageDsply = "";
                                                    $srcCageColDsply = "display:none;";
                                                    $dstCageColDsply = "display:none;";
                                                    $dsplySrcItemState = "display:none;";
                                                    $dsplyDstItemState = "";
                                                } else if ($trnsType == $trnsTypes[5]) {
                                                    $srcVltCageDsply = "";
                                                    $dstVltCageDsply = "display:none;";
                                                    $srcCageColDsply = "display:none;";
                                                    $dstCageColDsply = "display:none;";
                                                    $dsplySrcItemState = "";
                                                    $dsplyDstItemState = "display:none;";
                                                } else if ($trnsType == $trnsTypes[7]) {
                                                    $srcVltCageDsply = "";
                                                    $dstVltCageDsply = "display:none;";
                                                    $srcCageColDsply = "";
                                                    $dstCageColDsply = "display:none;";
                                                    $dsplySrcItemState = "";
                                                    $dsplyDstItemState = "display:none;";
                                                }
                                                $nwRowHtml1 = "<tr id=\"oneVmsTrnsRow__WWW123WWW\" onclick=\"$('#allOtherInputData99').val($('#oneVmsTrnsLnsTable tr').index(this));\">"
                                                        . "<!--<td class=\"lovtd\"><span class=\"normaltd\">New</span></td>-->"
                                                        . "<td class=\"lovtd\">
                                                    <div class=\"input-group\" style=\"width:100% !important;\">
                                                        <input type=\"text\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_ItemNm\" name=\"oneVmsTrnsRow_WWW123WWW_ItemNm\" value=\"\" readonly=\"true\" style=\"width:100% !important;\">
                                                        <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_ItmID\" value=\"-1\" style=\"width:100% !important;\">
                                                        <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_BaseUoMID\" value=\"-1\" style=\"width:100% !important;\">     
                                                        <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_TrnsLnID\" value=\"-1\" style=\"width:100% !important;\">                                                      
                                                        <label class=\"btn btn-primary btn-file input-group-addon\" onclick=\"getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsRow_WWW123WWW_ItmID', 'oneVmsTrnsRow_WWW123WWW_ItemNm', 'clear', 1, '', function () {
                                                                                        afterVMSItemSlctn1('oneVmsTrnsRow__WWW123WWW');
                                                                                    });\">
                                                            <span class=\"glyphicon glyphicon-th-list\"></span>
                                                        </label>
                                                    </div>                                               
                                                </td> 
                                                <td class=\"lovtd\" style=\"\">
                                                    <select data-placeholder=\"Select...\" class=\"form-control chosen-select\" id=\"oneVmsTrnsRow_WWW123WWW_LnTrnsType\" style=\"width:100% !important;\" onchange=\"calcAllRowsTtlVals();\">";
                                                $valslctdArry = array("", "");
                                                $srchInsArrys = array("Receipts", "Issues");
                                                for ($z = 0; $z < count($srchInsArrys); $z++) {
                                                    $nwRowHtml1 .= "<option value=\"" . $srchInsArrys[$z] . "\" " . $valslctdArry[$z] . ">" . $srchInsArrys[$z] . "</option>";
                                                }
                                                $nwRowHtml1 .= "</select>
                                                </td>
                                                <td class=\"lovtd\" style=\"\">
                                                    <input type=\"text\" class=\"form-control rqrdFld\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_LineDesc\" name=\"oneVmsTrnsRow_WWW123WWW_LineDesc\" value=\"\" style=\"width:100% !important;\">                                                    
                                                </td>
                                                <td class=\"lovtd\">
                                                    <input type=\"text\" class=\"form-control vmsCbTray\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_Tray\" name=\"oneVmsTrnsRow_WWW123WWW_Tray\" value=\"0\"  onchange=\"calcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow__WWW123WWW');\" onkeypress=\"vmsCbTrayKeyPress(event, 'oneVmsTrnsRow__WWW123WWW');\" style=\"width:100% !important;text-align: center;\" >                                            
                                                </td>
                                                <td class=\"lovtd\">
                                                    <input type=\"text\" class=\"form-control vmsCbBndl\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_Bndl\" name=\"oneVmsTrnsRow_WWW123WWW_Bndl\" value=\"0\"  onchange=\"calcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow__WWW123WWW');\" onkeypress=\"vmsCbBndlKeyPress(event, 'oneVmsTrnsRow__WWW123WWW');\" style=\"width:100% !important;text-align: center;\" >                                            
                                                </td>
                                                <td class=\"lovtd\">
                                                    <button type=\"button\" class=\"btn btn-default\" style=\"margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;\" onclick=\"getOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsRow__WWW123WWW');\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"View QTY Breakdown\">pcs</button>
                                                </td>
                                                <td class=\"lovtd\">
                                                    <input type=\"hidden\" class=\"form-control vmsCbQty\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_Qty\" name=\"oneVmsTrnsRow_WWW123WWW_Qty\" value=\"0\"  onchange=\"calcCshBrkdwnRowVal1('oneVmsTrnsRow__WWW123WWW');\" onkeypress=\"vmsTrnsFormKeyPress(event, 'oneVmsTrnsRow__WWW123WWW');\" style=\"width:100% !important;text-align: right;\">                                            
                                                    <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_UntVal\" name=\"oneVmsTrnsRow_WWW123WWW_UntVal\" value=\"1\" style=\"width:100% !important;\" readonly=\"true\">                                                                                                      
                                                    <input type=\"text\" class=\"form-control vmsCbTtl\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_TtlVal\" name=\"oneVmsTrnsRow_WWW123WWW_TtlVal\" value=\"0.00\" onchange=\"calcCshBrkdwnTtlVal1('oneVmsTrnsRow__WWW123WWW');\" onkeypress=\"vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsRow__WWW123WWW');\" style=\"width:100% !important;text-align: right;\">                                                    
                                                </td> 
                                                <td class=\"lovtd\">
                                                    <input type=\"text\" class=\"form-control vmsCbRnngBal\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_RnngBal\" name=\"oneVmsTrnsRow_WWW123WWW_RnngBal\" value=\"0.00\" style=\"width:100% !important;text-align: right;font-weight:bold;color:blue;\" readonly=\"true\">
                                                </td> 
                                                <td class=\"lovtd\">
                                                    <button type=\"button\" class=\"btn btn-default\" style=\"margin: 0px !important;padding:0px 3px 2px 4px !important;\" onclick=\"delVmsTrnsLine('oneVmsTrnsRow__WWW123WWW');\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Delete Trns. Line\">
                                                        <img src=\"cmn_images/no.png\" style=\"height:15px; width:auto; position: relative; vertical-align: middle;\">
                                                    </button>
                                                </td>
                                        </tr>";
                                                $nwRowHtml1 = urlencode($nwRowHtml1);

                                                $nwRowHtml = "<tr id=\"oneVmsTrnsRow__WWW123WWW\" onclick=\"$('#allOtherInputData99').val($('#oneVmsTrnsLnsTable tr').index(this));\">"
                                                        . "<!--<td class=\"lovtd\"><span class=\"normaltd\">New</span></td>-->"
                                                        . "<td class=\"lovtd\">
                                                    <div class=\"input-group\" style=\"width:100% !important;\">
                                                        <input type=\"text\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_ItemNm\" name=\"oneVmsTrnsRow_WWW123WWW_ItemNm\" value=\"\" readonly=\"true\" style=\"width:100% !important;\">
                                                        <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_ItmID\" value=\"-1\" style=\"width:100% !important;\">
                                                        <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_BaseUoMID\" value=\"-1\" style=\"width:100% !important;\">     
                                                        <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_TrnsLnID\" value=\"-1\" style=\"width:100% !important;\">                                                      
                                                        <label class=\"btn btn-primary btn-file input-group-addon\" onclick=\"getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsRow_WWW123WWW_ItmID', 'oneVmsTrnsRow_WWW123WWW_ItemNm', 'clear', 1, '', function () {
                                                                                        afterVMSItemSlctn1('oneVmsTrnsRow__WWW123WWW');
                                                                                    });\">
                                                            <span class=\"glyphicon glyphicon-th-list\"></span>
                                                        </label>
                                                    </div>                                               
                                                </td> 
                                                <td class=\"lovtd\" style=\"\">
                                                    <select data-placeholder=\"Select...\" class=\"form-control chosen-select\" id=\"oneVmsTrnsRow_WWW123WWW_LnTrnsType\" style=\"width:100% !important;\" onchange=\"calcAllRowsTtlVals();\">";
                                                $valslctdArry = array("", "");
                                                $srchInsArrys = array("Receipts", "Issues");
                                                for ($z = 0; $z < count($srchInsArrys); $z++) {
                                                    $nwRowHtml .= "<option value=\"" . $srchInsArrys[$z] . "\" " . $valslctdArry[$z] . ">" . $srchInsArrys[$z] . "</option>";
                                                }
                                                $nwRowHtml .= "</select>
                                                </td>
                                                <td class=\"lovtd\" style=\"\">
                                                    <input type=\"text\" class=\"form-control rqrdFld\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_LineDesc\" name=\"oneVmsTrnsRow_WWW123WWW_LineDesc\" value=\"\" style=\"width:100% !important;\">                                                    
                                                </td>
                                                <td class=\"lovtd\">
                                                    <input type=\"text\" class=\"form-control vmsCbQty\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_Qty\" name=\"oneVmsTrnsRow_WWW123WWW_Qty\" value=\"0\"  onchange=\"calcCshBrkdwnRowVal1('oneVmsTrnsRow__WWW123WWW');\" onkeypress=\"vmsTrnsFormKeyPress(event, 'oneVmsTrnsRow__WWW123WWW');\" style=\"width:100% !important;text-align: right;\">                                            
                                                    <input type=\"hidden\" class=\"form-control\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_UntVal\" name=\"oneVmsTrnsRow_WWW123WWW_UntVal\" value=\"1\" style=\"width:100% !important;\" readonly=\"true\">                                                      
                                                </td>
                                                <td class=\"lovtd\">
                                                    <button type=\"button\" class=\"btn btn-default\" style=\"margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;\" onclick=\"getOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsRow__WWW123WWW');\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"View QTY Breakdown\">pcs</button>
                                                </td>
                                                <td class=\"lovtd\">
                                                    <input type=\"text\" class=\"form-control vmsCbTtl\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_TtlVal\" name=\"oneVmsTrnsRow_WWW123WWW_TtlVal\" value=\"0.00\" onchange=\"calcCshBrkdwnTtlVal1('oneVmsTrnsRow__WWW123WWW');\" onkeypress=\"vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsRow__WWW123WWW');\" style=\"width:100% !important;text-align: right;\">                                                    
                                                </td> 
                                                <td class=\"lovtd\">
                                                    <input type=\"text\" class=\"form-control vmsCbRnngBal\" aria-label=\"...\" id=\"oneVmsTrnsRow_WWW123WWW_RnngBal\" name=\"oneVmsTrnsRow_WWW123WWW_RnngBal\" value=\"0.00\" style=\"width:100% !important;text-align: right;font-weight:bold;color:blue;\" readonly=\"true\">
                                                </td> 
                                                <td class=\"lovtd\">
                                                    <button type=\"button\" class=\"btn btn-default\" style=\"margin: 0px !important;padding:0px 3px 2px 4px !important;\" onclick=\"delVmsTrnsLine('oneVmsTrnsRow__WWW123WWW');\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Delete Trns. Line\">
                                                        <img src=\"cmn_images/no.png\" style=\"height:15px; width:auto; position: relative; vertical-align: middle;\">
                                                    </button>
                                                </td>
                                        </tr>";
                                                $nwRowHtml = urlencode($nwRowHtml);
                                                ?> 
                                                <div class="<?php echo $dsplyPymntCls3; ?>" style="padding:0px 0px 0px 0px !important;">
                                                    <div class="<?php echo $dsplyPymntCls1; ?>" style="padding:0px 0px 0px 0px !important;float:left;">
                                                        <button id="addNwNoteBtn" type="button" class="btn btn-default" style="margin-bottom: 5px;<?php echo $dsplyNwLine; ?>" onclick="insertNewVMSTrnsRows('oneVmsTrnsLnsTable', 0, '<?php echo $nwRowHtml1; ?>');" data-toggle="tooltip" data-placement="bottom" title = "New Transaction Line">
                                                            <img src="cmn_images/add1-64.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                        </button>
                                                        <button id="addNwCoinBtn" type="button" class="btn btn-default hideNotice" style="margin-bottom: 5px;<?php echo $dsplyNwLine; ?>" onclick="insertNewVMSTrnsRows('oneVmsTrnsCoinsLnsTable', 0, '<?php echo $nwRowHtml; ?>');" data-toggle="tooltip" data-placement="bottom" title = "New Transaction Line">
                                                            <img src="cmn_images/add1-64.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                        </button>
                                                        <div id="btnGrpForNotes" class="btn-group" style="margin-bottom: 5px;<?php echo $dsplyNwLine; ?>">
                                                            <button type="button" class="btn btn-default btn-sm" style="height: 30px !important;" onclick="" data-toggle="tooltip" data-placement="bottom" title = "Select Denomination">
                                                                Notes
                                                            </button>
                                                            <button class="btn btn-info dropdown-toggle btn-sm" style="height:30px !important;" type="button" data-toggle="dropdown">
                                                                <span class="caret"></span>
                                                            </button>
                                                            <input type="hidden" id="chooseNote"/>
                                                            <ul class="dropdown-menu" role="menu" style="margin-left: 15px !important;">
                                                                <?php
                                                                $denomRslt = get_All_Crncies($crncyID, "Note");
                                                                while ($rowDnm = loc_db_fetch_array($denomRslt)) {
                                                                    $denomNm = $rowDnm[6];
                                                                    $itmCatgry = $rowDnm[9];
                                                                    $itmID = (int) $rowDnm[0];
                                                                    ?>  
                                                                    <li>
                                                                        <a href="javascript:reloadVMSTrnsLines(<?php echo $sbmtdVmsTrnsHdrID; ?>, '<?php echo $trnsType; ?>', 36, <?php echo $itmID; ?>, '<?php echo $itmCatgry; ?>');">
                                                                            <img src="cmn_images/cheque.png" style="left: 0.5%; padding-right: 5px; height:20px; width:auto; position: relative; vertical-align: middle;">
                                                                            <?php echo $denomNm; ?>
                                                                        </a>
                                                                    </li>
                                                                <?php } ?>
                                                            </ul>
                                                        </div>
                                                        <div id="btnGrpForCoins" class="btn-group hideNotice" style="margin-bottom: 5px;<?php echo $dsplyNwLine; ?>">
                                                            <button type="button" class="btn btn-default btn-sm" style="height: 30px !important;" onclick="" data-toggle="tooltip" data-placement="bottom" title = "Select Denomination">
                                                                Coins
                                                            </button>
                                                            <button class="btn btn-info dropdown-toggle btn-sm" style="height:30px !important;" type="button" data-toggle="dropdown">
                                                                <span class="caret"></span>
                                                            </button>
                                                            <input type="hidden" id="chooseCoin"/>
                                                            <ul class="dropdown-menu" role="menu" style="margin-left: 15px !important;">
                                                                <?php
                                                                $denomRslt = get_All_Crncies($crncyID, "Coin");
                                                                while ($rowDnm = loc_db_fetch_array($denomRslt)) {
                                                                    $denomNm = $rowDnm[6];
                                                                    $itmCatgry = $rowDnm[9];
                                                                    $itmID = (int) $rowDnm[0];
                                                                    ?>  
                                                                    <li>
                                                                        <a href="javascript:reloadVMSTrnsLines(<?php echo $sbmtdVmsTrnsHdrID; ?>, '<?php echo $trnsType; ?>', 36, <?php echo $itmID; ?>, '<?php echo $itmCatgry; ?>');">
                                                                            <img src="cmn_images/cheque.png" style="left: 0.5%; padding-right: 5px; height:20px; width:auto; position: relative; vertical-align: middle;">
                                                                            <?php echo $denomNm; ?>
                                                                        </a>
                                                                    </li>
                                                                <?php } ?>
                                                            </ul>
                                                        </div>
                                                        <button type="button" class="btn btn-default" style="margin-bottom: 5px;" onclick="getOneVmsDocsForm(<?php echo $sbmtdVmsTrnsHdrID; ?>, '<?php echo $trnsType; ?>', 24);" data-toggle="tooltip" data-placement="bottom" title = "Attached Documents">
                                                            <img src="cmn_images/adjunto.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                        </button>
                                                        <button type="button" class="btn btn-default" style="margin-bottom: 5px;" onclick="clearVMSTrnsRows('oneVmsTrnsLnsTable');" data-toggle="tooltip" data-placement="bottom" title = "Clear Lines">
                                                            <img src="cmn_images/undo_256.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                        </button>
                                                        <button type="button" class="btn btn-default" style="margin-bottom: 5px;" onclick="reloadVMSTrnsLines(<?php echo $sbmtdVmsTrnsHdrID; ?>, '<?php echo $trnsType; ?>', 36);" data-toggle="tooltip" data-placement="bottom" title = "Load Defaults">
                                                            <img src="cmn_images/98.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                        </button>
                                                        <button type="button" class="btn btn-default btn-sm" style="height:30px;min-height:30px;margin-bottom: 5px;">
                                                            <span style="font-weight:bold;color:black;">Total: </span>
                                                            <span style="color:red;font-weight: bold;" id="myCptrdValsTtlBtn"><?php echo $crncyIDNm; ?> 
                                                                <?php
                                                                echo number_format($vmsTrnsTtlAmnt, 2);
                                                                ?>
                                                            </span>
                                                            <input type="hidden" id="myCptrdValsTtlVal" value="<?php echo $vmsTrnsTtlAmnt; ?>">
                                                        </button>
                                                    </div> 
                                                </div>                                 
                                                <div class="<?php echo $dsplyPymntCls4; ?>">
                                                    <div class="form-group form-group-sm" style="">
                                                        <div class = "col-md-4" style="padding:0px 0px 0px 0px !important;">
                                                            <label style="margin-bottom:0px !important;padding:2px 0px 0px 5px !important;">Current Vault/Cage:&nbsp;</label>
                                                        </div>
                                                        <div class = "col-md-8" style="padding:0px 0px 0px 0px !important;">
                                                            <div class="input-group">
                                                                <input type="text" class="form-control  input-group-addon" aria-label="..." id="vmsDfltDestVlt" name="vmsDfltDestVlt" value="<?php echo $crntVltNm; ?>" readonly="true">
                                                                <input type="hidden" id="vmsDfltDestVltID" value="<?php echo $sbmtdStoreID; ?>">
                                                                <label class="input-group-addon">
                                                                    :
                                                                </label>                                                
                                                                <input type="text" class="form-control  input-group-addon" aria-label="..." id="vmsDfltDestCage" name="vmsDfltDestCage" value="<?php echo $crntCageNm; ?>" readonly="true">
                                                                <input type="hidden" id="vmsDfltDestCageID" value="<?php echo $sbmtdShelfID; ?>">
                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getDynmcCageFnPos('vmsDfltDestCageID', 7);">
                                                                    <span class="glyphicon glyphicon-info-sign"></span>
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="custDiv" style="padding:0px !important;min-height: 40px !important;" id="oneVmsTrnsLnsTblSctn"> 
                                    <div class="tab-content" style="padding:5px !important;padding-top:7px !important;">
                                        <div id="cashItmsNotes" class="tab-pane fadein active" style="border:none !important;padding:0px !important;">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <table class="table table-striped table-bordered table-responsive" id="oneVmsTrnsLnsTable" cellspacing="0" width="100%" style="width:100%;min-width: 900px !important;">
                                                        <thead>
                                                            <tr>
                                                                <!--<th>No.</th>-->
                                                                <th>Denomination</th>
                                                                <th>Transaction Type</th>
                                                                <th style="">Narration/Remark</th>
                                                                <th style="text-align: center;max-width:70px;width:70px;">Trays</th>
                                                                <th style="text-align: center;max-width:70px;width:70px;">Bundles</th>
                                                                <!--<th>Pieces</th>-->
                                                                <th>UOM</th>
                                                                <th>Total Value</th>
                                                                <th>Running Balance</th>
                                                                <th>&nbsp;</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <?php
                                                            $cntr = 0;
                                                            $resultRw = get_One_VMSTrnsLines($sbmtdVmsTrnsHdrID, -1, "Note");
                                                            $maxNoRows = loc_db_num_rows($resultRw);
                                                            $excludedItems = "";
                                                            while ($cntr < $maxNoRows) {
                                                                $itemID = -1;
                                                                $trnsLnID = -1;
                                                                $itemName = "";
                                                                $baseUOMID = -1;
                                                                $unitVal = 0.00;
                                                                $qty = 0;
                                                                $tray = 0;
                                                                $bundle = 0;
                                                                $baseUOMNm = "";
                                                                $ttlRowVal = 0.00;
                                                                $srcItemState = $dfltItemState;
                                                                $dstItemState = $dfltItemState;
                                                                $funcCrncyRate = 0;
                                                                $lineDesc = "";
                                                                $lineTrnsType = "";
                                                                $runningBalance = 0;
                                                                if ($rowRw = loc_db_fetch_array($resultRw)) {
                                                                    $trnsLnID = (float) $rowRw[0];
                                                                    $itemID = (int) $rowRw[2];
                                                                    $excludedItems .= $itemID . ", ";
                                                                    $itemName = $rowRw[29];
                                                                    $lineDesc = $rowRw[36];
                                                                    if (((int) $rowRw[4]) > 0) {
                                                                        $lineTrnsType = "Issues";
                                                                        $runningBalance = (float) $rowRw[35];
                                                                    } else if (((int) $rowRw[6]) > 0) {
                                                                        $lineTrnsType = "Receipts";
                                                                        $runningBalance = (float) $rowRw[37];
                                                                    }
                                                                    $unitVal = (float) $rowRw[9];
                                                                    $baseUOMNm = $rowRw[31];
                                                                    $baseUOMID = (int) $rowRw[26];
                                                                    $qty = (float) $rowRw[7];
                                                                    $tray = (float) $rowRw[46];
                                                                    $bundle = (float) $rowRw[47];
                                                                    $ttlRowVal = $qty * $unitVal;
                                                                    if ($trnsLnID > 0) {
                                                                        $srcItemState = $rowRw[27];
                                                                        $dstItemState = $rowRw[34];
                                                                    } else {
                                                                        $srcItemState = $dfltItemState;
                                                                        $dstItemState = $dfltItemState;
                                                                    }
                                                                    $funcCrncyRate = (float) $rowRw[21];
                                                                }
                                                                $cntr += 1;
                                                                ?>
                                                                <tr id="oneVmsTrnsRow_<?php echo $cntr; ?>">                                    
                                                                    <!--<td class="lovtd"><span><?php echo ($cntr); ?></span></td>-->
                                                                    <td class="lovtd">
                                                                        <div class="input-group" style="width:100% !important;">
                                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm" name="oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm" value="<?php echo $itemName; ?>" readonly="true" style="width:100% !important;">
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_ItmID" value="<?php echo $itemID; ?>" style="width:100% !important;">
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_BaseUoMID" value="<?php echo $baseUOMID; ?>" style="width:100% !important;">     
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $trnsLnID; ?>" style="width:100% !important;">                                                      
                                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsRow<?php echo $cntr; ?>_ItmID', 'oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm', 'clear', 1, '', function () {
                                                                                        afterVMSItemSlctn1('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                                    });">
                                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                                            </label>
                                                                        </div>                                               
                                                                    </td> 
                                                                    <td class="lovtd"  style="">
                                                                        <select data-placeholder="Select..." class="form-control chosen-select" id="oneVmsTrnsRow<?php echo $cntr; ?>_LnTrnsType" style="width:100% !important;" onchange="calcAllRowsTtlVals();">
                                                                            <?php
                                                                            $valslctdArry = array("", "");
                                                                            $srchInsArrys = array("Receipts", "Issues");
                                                                            for ($z = 0; $z < count($srchInsArrys); $z++) {
                                                                                if ($lineTrnsType == $srchInsArrys[$z]) {
                                                                                    $valslctdArry[$z] = "selected";
                                                                                }
                                                                                ?>
                                                                                <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                                                            <?php } ?>
                                                                        </select>
                                                                    </td>
                                                                    <td class="lovtd" style="">
                                                                        <input type="text" class="form-control rqrdFld" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_LineDesc" name="oneVmsTrnsRow<?php echo $cntr; ?>_LineDesc" value="<?php echo $lineDesc; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?>>                                                    
                                                                    </td>
                                                                    <td class="lovtd">
                                                                        <input type="text" class="form-control vmsCbTray" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Tray" name="oneVmsTrnsRow<?php echo $cntr; ?>_Tray" value="<?php
                                                                        echo number_format($tray, 0);
                                                                        ?>"  onchange="calcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsCbTrayKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: center;" <?php echo $mkReadOnly; ?>>                                            
                                                                    </td>
                                                                    <td class="lovtd">
                                                                        <input type="text" class="form-control vmsCbBndl" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Bndl" name="oneVmsTrnsRow<?php echo $cntr; ?>_Bndl" value="<?php
                                                                        echo number_format($bundle, 0);
                                                                        ?>"  onchange="calcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsCbBndlKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: center;" <?php echo $mkReadOnly; ?>>                                            
                                                                    </td>
                                                                    <td class="lovtd">
                                                                        <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;" onclick="getOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="View QTY Breakdown"><?php echo $baseUOMNm; ?></button>
                                                                    </td>
                                                                    <td class="lovtd">
                                                                        <input type="hidden" class="form-control vmsCbQty" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Qty" name="oneVmsTrnsRow<?php echo $cntr; ?>_Qty" value="<?php
                                                                        echo number_format($qty, 0);
                                                                        ?>"  onchange="calcCshBrkdwnRowVal1('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="v
                                                                                                    msTrnsFormKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                            
                                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_UntVal" name="oneVmsTrnsRow<?php echo $cntr; ?>_UntVal" value="<?php echo $unitVal;
                                                                        ?>" style="width:100% !important;" readonly="true">    
                                                                        <input type="text" class="form-control vmsCbTtl" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsTrnsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                                                        echo number_format($ttlRowVal, 2);
                                                                        ?>" onchange="calcCshBrkdwnTtlVal1('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                                    </td> 
                                                                    <td class="lovtd">
                                                                        <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_RnngBal" name="oneVmsTrnsRow<?php echo $cntr; ?>_RnngBal" value="<?php
                                                                        echo number_format($runningBalance, 2);
                                                                        ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                                               <?php
                                                                               if (strpos($capturedItemIDs, ";" . $itemID . ";") === FALSE) {
                                                                                   $capturedItemIDs = ";" . $itemID . ";";
                                                                                   $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmItm_" . $itemID . "\" name=\"oneVmsTrnsFrmItm_" . $itemID . "\" value=\"" . number_format($runningBalance,
                                                                                                   2) . "\" readonly=\"true\">";
                                                                               }
                                                                               ?>
                                                                    </td> 
                                                                    <td class="lovtd">
                                                                        <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsTrnsLine('oneVmsTrnsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete Trns. Line">
                                                                            <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                                        </button>
                                                                    </td>
                                                                </tr>
                                                                <?php
                                                            }
                                                            if (($voidedTrnsHdrID <= 0 || $orgnlVmsTrnsHdrID <= 0) && ($rqStatus == "Not Submitted" ||
                                                                    $rqStatus == "Withdrawn" || $rqStatus == "Rejected")) {
                                                                $excludedItems = trim($excludedItems, ", ");
                                                                $resultRw = get_Fresh_VMSTrnsLines($sbmtdVmsTrnsHdrID, $crncyID, $sbmtdShelfID,
                                                                        $excludedItems, $sbmtdStoreID, $dfltItemState, $sbmtdShelfID, $sbmtdStoreID,
                                                                        $dfltItemState, -1, "Note");
                                                                $maxNoRows = loc_db_num_rows($resultRw);
                                                                $nwcntr = 0;
                                                                if ($sbmtdItmID > 0 && $maxNoRows == 1) {
                                                                    $maxNoRows = 5;
                                                                }
                                                                $itemID = -1;
                                                                $trnsLnID = -1;
                                                                $itemName = "";
                                                                $baseUOMID = -1;
                                                                $unitVal = 0.00;
                                                                $qty = 0.00;
                                                                $tray = 0;
                                                                $bundle = 0;
                                                                $baseUOMNm = "";
                                                                $ttlRowVal = 0.00;
                                                                $srcItemState = $dfltItemState;
                                                                $dstItemState = $dfltItemState;
                                                                $funcCrncyRate = 0;
                                                                $runningBalance = 0;
                                                                $lineDesc = "";
                                                                $lineTrnsType = "Receipts";
                                                                $rowRw = null;
                                                                if ($sbmtdItmID > 0 && $nwcntr == 0) {
                                                                    $rowRw = loc_db_fetch_array($resultRw);
                                                                }
                                                                while ($nwcntr < $maxNoRows) {
                                                                    if ($sbmtdItmID > 0) {
                                                                        /* Do Nothing */
                                                                    } else {
                                                                        $rowRw = loc_db_fetch_array($resultRw);
                                                                    }

                                                                    $trnsLnID = (float) $rowRw[0];
                                                                    $itemID = (int) $rowRw[2];
                                                                    $itemName = $rowRw[29];
                                                                    $lineDesc = $rowRw[36];
                                                                    $runningBalance = (float) $rowRw[35];
                                                                    $unitVal = (float) $rowRw[9];
                                                                    $baseUOMNm = $rowRw[31];
                                                                    $baseUOMID = (int) $rowRw[26];
                                                                    $qty = (float) $rowRw[7];
                                                                    $tray = 0;
                                                                    $bundle = 0;
                                                                    $ttlRowVal = $qty * $unitVal;
                                                                    if ($trnsLnID > 0) {
                                                                        $srcItemState = $rowRw[27];
                                                                        $dstItemState = $rowRw[34];
                                                                    } else {
                                                                        $srcItemState = $dfltItemState;
                                                                        $dstItemState = $dfltItemState;
                                                                    }
                                                                    $funcCrncyRate = (float) $rowRw[21];
                                                                    $cntr += 1;
                                                                    $nwcntr += 1;
                                                                    ?>
                                                                    <tr id="oneVmsTrnsRow_<?php echo $cntr; ?>">                                    
                                                                        <!--<td class="lovtd"><span><?php echo ($cntr); ?></span></td>-->
                                                                        <td class="lovtd">
                                                                            <div class="input-group" style="width:100% !important;">
                                                                                <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm" name="oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm" value="<?php echo $itemName; ?>" readonly="true" style="width:100% !important;">
                                                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_ItmID" value="<?php echo $itemID; ?>" style="width:100% !important;">
                                                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_BaseUoMID" value="<?php echo $baseUOMID; ?>" style="width:100% !important;">     
                                                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $trnsLnID; ?>" style="width:100% !important;">                                                      
                                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsRow<?php echo $cntr; ?>_ItmID', 'oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm', 'clear', 1, '', function () {
                                                                                            afterVMSItemSlctn1('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                                        });">
                                                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                                                </label>
                                                                            </div>                                               
                                                                        </td>
                                                                        <td class="lovtd" style="">
                                                                            <select data-placeholder="Select..." class="form-control chosen-select" id="oneVmsTrnsRow<?php echo $cntr; ?>_LnTrnsType" style="width:100% !important;" onchange="calcAllRowsTtlVals();">
                                                                                <?php
                                                                                $valslctdArry = array("", "");
                                                                                $srchInsArrys = array("Receipts", "Issues");
                                                                                for ($z = 0; $z < count($srchInsArrys); $z++) {
                                                                                    if ($lineTrnsType == $srchInsArrys[$z]) {
                                                                                        $valslctdArry[$z] = "selected";
                                                                                    }
                                                                                    ?>
                                                                                    <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                                                                <?php } ?>
                                                                            </select>
                                                                        </td>
                                                                        <td class="lovtd" style="">
                                                                            <input type="text" class="form-control rqrdFld" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_LineDesc" name="oneVmsTrnsRow<?php echo $cntr; ?>_LineDesc" value="<?php echo $lineDesc; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?>>                                                    
                                                                        </td>
                                                                        <td class="lovtd">
                                                                            <input type="text" class="form-control vmsCbTray" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Tray" name="oneVmsTrnsRow<?php echo $cntr; ?>_Tray" value="<?php
                                                                            echo number_format($tray, 0);
                                                                            ?>"  onchange="calcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsCbTrayKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: center;" <?php echo $mkReadOnly; ?>>                                            
                                                                        </td>
                                                                        <td class="lovtd">
                                                                            <input type="text" class="form-control vmsCbBndl" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Bndl" name="oneVmsTrnsRow<?php echo $cntr; ?>_Bndl" value="<?php
                                                                            echo number_format($bundle, 0);
                                                                            ?>"  onchange="calcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsCbBndlKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: center;" <?php echo $mkReadOnly; ?>>                                            
                                                                        </td>
                                                                        <td class="lovtd">
                                                                            <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;" onclick="getOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="View QTY Breakdown"><?php echo $baseUOMNm; ?></button>
                                                                        </td>
                                                                        <td class="lovtd">
                                                                            <input type="hidden" class="form-control vmsCbQty" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Qty" name="oneVmsTrnsRow<?php echo $cntr; ?>_Qty" value="<?php
                                                                            echo number_format($qty, 0);
                                                                            ?>"  onchange="calcCshBrkdwnRowVal1('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="v
                                                                                                            msTrnsFormKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                            
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_UntVal" name="oneVmsTrnsRow<?php echo $cntr; ?>_UntVal" value="<?php echo $unitVal;
                                                                            ?>" style="width:100% !important;" readonly="true">  
                                                                            <input type="text" class="form-control vmsCbTtl" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsTrnsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                                                            echo number_format($ttlRowVal, 2);
                                                                            ?>" onchange="calcCshBrkdwnTtlVal1('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                                        </td> 
                                                                        <td class="lovtd">
                                                                            <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_RnngBal" name="oneVmsTrnsRow<?php echo $cntr; ?>_RnngBal" value="<?php
                                                                            echo number_format($runningBalance, 2);
                                                                            ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true">                                                        
                                                                                   <?php
                                                                                   if (strpos($capturedItemIDs, ";" . $itemID . ";") === FALSE) {
                                                                                       $capturedItemIDs = ";" . $itemID . ";";
                                                                                       $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmItm_" . $itemID . "\" name=\"oneVmsTrnsFrmItm_" . $itemID . "\" value=\"" . number_format($runningBalance,
                                                                                                       2) . "\" readonly=\"true\">";
                                                                                   }
                                                                                   ?>                                                       
                                                                        </td> 
                                                                        <td class="lovtd">
                                                                            <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsTrnsLine('oneVmsTrnsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete Trns. Line">
                                                                                <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                                            </button>
                                                                        </td>
                                                                    </tr>
                                                                    <?php
                                                                }
                                                            }
                                                            ?>
                                                        </tbody>
                                                    </table>   
                                                </div>
                                            </div>
                                        </div>
                                        <div id="cashItmsCoins" class="tab-pane fadein hideNotice" style="border:none !important;padding:0px !important;">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <table class="table table-striped table-bordered table-responsive" id="oneVmsTrnsCoinsLnsTable" cellspacing="0" width="100%" style="width:100%;min-width: 900px !important;">
                                                        <thead>
                                                            <tr>
                                                                <!--<th>No.</th>-->
                                                                <th>Denomination</th>
                                                                <th>Transaction Type</th>
                                                                <th style="">Narration/Remark</th>
                                                                <th>Pieces</th>
                                                                <th>UOM</th>
                                                                <th>Total Value</th>
                                                                <th>Running Balance</th>
                                                                <th>&nbsp;</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <?php
                                                            $cntr = 0;
                                                            $resultRw = get_One_VMSTrnsLines($sbmtdVmsTrnsHdrID, -1, "Coin");
                                                            $maxNoRows = loc_db_num_rows($resultRw);
                                                            $excludedItems = "";
                                                            while ($cntr < $maxNoRows) {
                                                                $itemID = -1;
                                                                $trnsLnID = -1;
                                                                $itemName = "";
                                                                $baseUOMID = -1;
                                                                $unitVal = 0.00;
                                                                $qty = 0.00;
                                                                $baseUOMNm = "";
                                                                $ttlRowVal = 0.00;
                                                                $srcItemState = $dfltItemState;
                                                                $dstItemState = $dfltItemState;
                                                                $funcCrncyRate = 0;
                                                                $lineDesc = "";
                                                                $lineTrnsType = "";
                                                                $runningBalance = 0;
                                                                if ($rowRw = loc_db_fetch_array($resultRw)) {
                                                                    $trnsLnID = (float) $rowRw[0];
                                                                    $itemID = (int) $rowRw[2];
                                                                    $excludedItems .= $itemID . ", ";
                                                                    $itemName = $rowRw[29];
                                                                    $lineDesc = $rowRw[36];
                                                                    if (((int) $rowRw[4]) > 0) {
                                                                        $lineTrnsType = "Issues";
                                                                        $runningBalance = (float) $rowRw[35];
                                                                    } else if (((int) $rowRw[6]) > 0) {
                                                                        $lineTrnsType = "Receipts";
                                                                        $runningBalance = (float) $rowRw[37];
                                                                    }
                                                                    $unitVal = (float) $rowRw[9];
                                                                    $baseUOMNm = $rowRw[31];
                                                                    $baseUOMID = (int) $rowRw[26];
                                                                    $qty = (float) $rowRw[7];
                                                                    $ttlRowVal = $qty * $unitVal;
                                                                    if ($trnsLnID > 0) {
                                                                        $srcItemState = $rowRw[27];
                                                                        $dstItemState = $rowRw[34];
                                                                    } else {
                                                                        $srcItemState = $dfltItemState;
                                                                        $dstItemState = $dfltItemState;
                                                                    }
                                                                    $funcCrncyRate = (float) $rowRw[21];
                                                                }
                                                                $cntr += 1;
                                                                ?>
                                                                <tr id="oneVmsTrnsCoinsRow_<?php echo $cntr; ?>">                                    
                                                                    <!--<td class="lovtd"><span><?php echo ($cntr); ?></span></td>-->
                                                                    <td class="lovtd">
                                                                        <div class="input-group" style="width:100% !important;">
                                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm" value="<?php echo $itemName; ?>" readonly="true" style="width:100% !important;">
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItmID" value="<?php echo $itemID; ?>" style="width:100% !important;">
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_BaseUoMID" value="<?php echo $baseUOMID; ?>" style="width:100% !important;">     
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $trnsLnID; ?>" style="width:100% !important;">                                                      
                                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItmID', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm', 'clear', 1, '', function () {
                                                                                        afterVMSItemSlctn1('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                                    });">
                                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                                            </label>
                                                                        </div>                                               
                                                                    </td> 
                                                                    <td class="lovtd"  style="">
                                                                        <select data-placeholder="Select..." class="form-control chosen-select" id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LnTrnsType" style="width:100% !important;" onchange="calcAllRowsTtlVals();">
                                                                            <?php
                                                                            $valslctdArry = array("", "");
                                                                            $srchInsArrys = array("Receipts", "Issues");
                                                                            for ($z = 0; $z < count($srchInsArrys); $z++) {
                                                                                if ($lineTrnsType == $srchInsArrys[$z]) {
                                                                                    $valslctdArry[$z] = "selected";
                                                                                }
                                                                                ?>
                                                                                <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                                                            <?php } ?>
                                                                        </select>
                                                                    </td>
                                                                    <td class="lovtd" style="">
                                                                        <input type="text" class="form-control rqrdFld" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LineDesc" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LineDesc" value="<?php echo $lineDesc; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?>>                                                    
                                                                    </td>
                                                                    <td class="lovtd">
                                                                        <input type="text" class="form-control vmsCbQty" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_Qty" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_Qty" value="<?php
                                                                        echo number_format($qty, 0);
                                                                        ?>"  onchange="calcCshBrkdwnRowVal1('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                            
                                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_UntVal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_UntVal" value="<?php echo $unitVal;
                                                                        ?>" style="width:100% !important;" readonly="true">                                                      
                                                                    </td>
                                                                    <td class="lovtd">
                                                                        <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;" onclick="getOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="View QTY Breakdown"><?php echo $baseUOMNm; ?></button>
                                                                    </td>
                                                                    <td class="lovtd">
                                                                        <input type="text" class="form-control vmsCbTtl" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                                                        echo number_format($ttlRowVal, 2);
                                                                        ?>" onchange="calcCshBrkdwnTtlVal1('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                                    </td> 
                                                                    <td class="lovtd">
                                                                        <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_RnngBal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_RnngBal" value="<?php
                                                                        echo number_format($runningBalance, 2);
                                                                        ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                                               <?php
                                                                               if (strpos($capturedItemIDs, ";" . $itemID . ";") === FALSE) {
                                                                                   $capturedItemIDs = ";" . $itemID . ";";
                                                                                   $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmItm_" . $itemID . "\" name=\"oneVmsTrnsFrmItm_" . $itemID . "\" value=\"" . number_format($runningBalance,
                                                                                                   2) . "\" readonly=\"true\">";
                                                                               }
                                                                               ?>
                                                                    </td> 
                                                                    <td class="lovtd">
                                                                        <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsTrnsLine('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete Trns. Line">
                                                                            <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                                        </button>
                                                                    </td>
                                                                </tr>
                                                                <?php
                                                            }
                                                            if (($voidedTrnsHdrID <= 0 || $orgnlVmsTrnsHdrID <= 0) && ($rqStatus == "Not Submitted" ||
                                                                    $rqStatus == "Withdrawn" || $rqStatus == "Rejected")) {
                                                                $excludedItems = trim($excludedItems, ", ");
                                                                $resultRw = get_Fresh_VMSTrnsLines($sbmtdVmsTrnsHdrID, $crncyID, $sbmtdShelfID,
                                                                        $excludedItems, $sbmtdStoreID, $dfltItemState, $sbmtdShelfID, $sbmtdStoreID,
                                                                        $dfltItemState, -1, "Coin");
                                                                $maxNoRows = loc_db_num_rows($resultRw);
                                                                $nwcntr = 0;
                                                                $maxNoRows = loc_db_num_rows($resultRw);
                                                                if ($sbmtdItmID > 0 && $maxNoRows == 1) {
                                                                    $maxNoRows = 5;
                                                                }
                                                                $itemID = -1;
                                                                $trnsLnID = -1;
                                                                $itemName = "";
                                                                $baseUOMID = -1;
                                                                $unitVal = 0.00;
                                                                $qty = 0.00;
                                                                $baseUOMNm = "";
                                                                $ttlRowVal = 0.00;
                                                                $srcItemState = $dfltItemState;
                                                                $dstItemState = $dfltItemState;
                                                                $funcCrncyRate = 0;
                                                                $runningBalance = 0;
                                                                $lineDesc = "";
                                                                $lineTrnsType = "Receipts";
                                                                $rowRw = null;
                                                                if ($sbmtdItmID > 0 && $nwcntr == 0) {
                                                                    $rowRw = loc_db_fetch_array($resultRw);
                                                                }
                                                                while ($nwcntr < $maxNoRows) {
                                                                    if ($sbmtdItmID > 0) {
                                                                        /* Do Nothing */
                                                                    } else {
                                                                        $rowRw = loc_db_fetch_array($resultRw);
                                                                    }
                                                                    $trnsLnID = (float) $rowRw[0];
                                                                    $itemID = (int) $rowRw[2];
                                                                    $itemName = $rowRw[29];
                                                                    $lineDesc = $rowRw[36];
                                                                    $runningBalance = (float) $rowRw[35];
                                                                    $unitVal = (float) $rowRw[9];
                                                                    $baseUOMNm = $rowRw[31];
                                                                    $baseUOMID = (int) $rowRw[26];
                                                                    $qty = (float) $rowRw[7];
                                                                    $ttlRowVal = $qty * $unitVal;
                                                                    if ($trnsLnID > 0) {
                                                                        $srcItemState = $rowRw[27];
                                                                        $dstItemState = $rowRw[34];
                                                                    } else {
                                                                        $srcItemState = $dfltItemState;
                                                                        $dstItemState = $dfltItemState;
                                                                    }
                                                                    $funcCrncyRate = (float) $rowRw[21];
                                                                    $cntr += 1;
                                                                    $nwcntr += 1;
                                                                    ?>
                                                                    <tr id="oneVmsTrnsCoinsRow_<?php echo $cntr; ?>">                                    
                                                                        <!--<td class="lovtd"><span><?php echo ($cntr); ?></span></td>-->
                                                                        <td class="lovtd">
                                                                            <div class="input-group" style="width:100% !important;">
                                                                                <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm" value="<?php echo $itemName; ?>" readonly="true" style="width:100% !important;">
                                                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItmID" value="<?php echo $itemID; ?>" style="width:100% !important;">
                                                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_BaseUoMID" value="<?php echo $baseUOMID; ?>" style="width:100% !important;">     
                                                                                <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $trnsLnID; ?>" style="width:100% !important;">                                                      
                                                                                <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItmID', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm', 'clear', 1, '', function () {
                                                                                            afterVMSItemSlctn1('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                                        });">
                                                                                    <span class="glyphicon glyphicon-th-list"></span>
                                                                                </label>
                                                                            </div>                                               
                                                                        </td>
                                                                        <td class="lovtd" style="">
                                                                            <select data-placeholder="Select..." class="form-control chosen-select" id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LnTrnsType" style="width:100% !important;" onchange="calcAllRowsTtlVals();">
                                                                                <?php
                                                                                $valslctdArry = array("", "");
                                                                                $srchInsArrys = array("Receipts", "Issues");
                                                                                for ($z = 0; $z < count($srchInsArrys); $z++) {
                                                                                    if ($lineTrnsType == $srchInsArrys[$z]) {
                                                                                        $valslctdArry[$z] = "selected";
                                                                                    }
                                                                                    ?>
                                                                                    <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                                                                <?php } ?>
                                                                            </select>
                                                                        </td>
                                                                        <td class="lovtd" style="">
                                                                            <input type="text" class="form-control rqrdFld" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LineDesc" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LineDesc" value="<?php echo $lineDesc; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?>>                                                    
                                                                        </td>
                                                                        <td class="lovtd">
                                                                            <input type="text" class="form-control vmsCbQty" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_Qty" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_Qty" value="<?php
                                                                            echo number_format($qty, 0);
                                                                            ?>"  onchange="calcCshBrkdwnRowVal1('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                            
                                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_UntVal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_UntVal" value="<?php echo $unitVal;
                                                                            ?>" style="width:100% !important;" readonly="true">                                                      
                                                                        </td>
                                                                        <td class="lovtd">
                                                                            <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;" onclick="getOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="View QTY Breakdown"><?php echo $baseUOMNm; ?></button>
                                                                        </td>
                                                                        <td class="lovtd">
                                                                            <input type="text" class="form-control vmsCbTtl" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                                                            echo number_format($ttlRowVal, 2);
                                                                            ?>" onchange="calcCshBrkdwnTtlVal1('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                                        </td> 
                                                                        <td class="lovtd">
                                                                            <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_RnngBal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_RnngBal" value="<?php
                                                                            echo number_format($runningBalance, 2);
                                                                            ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true">                                                        
                                                                                   <?php
                                                                                   if (strpos($capturedItemIDs, ";" . $itemID . ";") === FALSE) {
                                                                                       $capturedItemIDs = ";" . $itemID . ";";
                                                                                       $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmItm_" . $itemID . "\" name=\"oneVmsTrnsFrmItm_" . $itemID . "\" value=\"" . number_format($runningBalance,
                                                                                                       2) . "\" readonly=\"true\">";
                                                                                   }
                                                                                   ?>                                                       
                                                                        </td> 
                                                                        <td class="lovtd">
                                                                            <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsTrnsLine('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete Trns. Line">
                                                                                <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                                            </button>
                                                                        </td>
                                                                    </tr>
                                                                    <?php
                                                                }
                                                            }
                                                            ?>
                                                        </tbody>
                                                    </table>   
                                                </div>
                                            </div>
                                        </div>
                                        <div id="rnngBalsHiddenFields">                        
                                            <input type="hidden" id="oneVmsUomCnvFctr_Tray" value="<?php echo $trayCnvFctr; ?>"/>
                                            <input type="hidden" id="oneVmsUomCnvFctr_Bndl" value="<?php echo $bndlCnvFctr; ?>"/>
                                            <?php echo $extrInputFlds; ?>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </form>
                <?php
            } else if ($vwtyp == 36) {
                $sbmtdVmsTrnsHdrID = isset($_POST['sbmtdVmsTrnsHdrID']) ? cleanInputData($_POST['sbmtdVmsTrnsHdrID']) : -1;
                $sbmtdShelfID = isset($_POST['sbmtdShelfID']) ? cleanInputData($_POST['sbmtdShelfID']) : -1;
                $sbmtdStoreID = isset($_POST['sbmtdStoreID']) ? cleanInputData($_POST['sbmtdStoreID']) : -1;
                $sbmtdSiteID = isset($_POST['sbmtdSiteID']) ? cleanInputData($_POST['sbmtdSiteID']) : -1;
                $isFrmBnkng = isset($_POST['isFrmBnkng']) ? cleanInputData($_POST['isFrmBnkng']) : -1;
                $sbmtdItmID = isset($_POST['sbmtdItmID']) ? cleanInputData($_POST['sbmtdItmID']) : -1;
                $tblrVwTyp = isset($_POST['tblrVwTyp']) ? cleanInputData($_POST['tblrVwTyp']) : 13;
                $trnsType = "Direct Cage/Shelve Transaction";
                $dfltItemState = getGnrlRecNm("inv.inv_shelf", "line_id", "dflt_item_state", $sbmtdShelfID);
                $crntVltNm = getGnrlRecNm("inv.inv_itm_subinventories", "subinv_id", "subinv_name", $sbmtdStoreID);
                $crntCageNm = getGnrlRecNm("inv.inv_shelf", "line_id", "shelve_name", $sbmtdShelfID);
                $crncyIDNm = isset($_POST['crncyIDNm']) ? cleanInputData($_POST['crncyIDNm']) : "";
                $crncyID = getPssblValID($crncyIDNm, getLovID("Currencies"));
                $rqStatus = getGnrlRecNm("vms.vms_transactions_hdr", "trans_hdr_id", "approval_status", $sbmtdVmsTrnsHdrID);
                if (!$canAddTrns || ($sbmtdVmsTrnsHdrID > 0 && !$canEdtTrns)) {
                    restricted();
                    exit();
                }
                $voidedTrnsHdrID = (float) getGnrlRecNm("vms.vms_transactions_hdr", "trans_hdr_id", "voided_trns_hdr_id", $sbmtdVmsTrnsHdrID);
                $orgnlVmsTrnsHdrID = $sbmtdVmsTrnsHdrID;
                if ($crncyID <= 0) {
                    $fnccurid = getOrgFuncCurID($orgID);
                    $fnccurnm = getPssblValNm($fnccurid);
                    $crncyID = $fnccurid;
                }
                $mkReadOnly = "";
                $mkRmrkReadOnly = "";
                $extrInputFlds = "";
                $capturedItemIDs = "";
                $trayCnvFctr = 0;
                $bndlCnvFctr = 0;
                $curRslt = get_All_Crncies($crncyID, "Note");
                while ($rowCur = loc_db_fetch_array($curRslt)) {
                    $itmID = (int) $rowCur[0];
                    $trayCnvFctr = getUomCnvrsnFctr($itmID, "tray");
                    $bndlCnvFctr = getUomCnvrsnFctr($itmID, "bundle");
                }
                $dsplyNwLine = "";
                $dsplyPymntInfo = "display:none;";
                $dsplyPymntCls1 = "col-md-12";
                $dsplyPymntCls2 = "";
                $dsplyPymntCls3 = "col-md-6";
                $dsplyPymntCls4 = "col-md-6";
                $srcVltCageDsply = "";
                $dstVltCageDsply = "";
                $srcCageColDsply = "display:none;";
                $dstCageColDsply = "";
                $dsplySrcItemState = "";
                $dsplyDstItemState = "";
                $isSrcDstCagesRqrd = "rqrdFld";
                if ($trnsType == $trnsTypes[2] || $trnsType == $trnsTypes[3]) {
                    $srcCageColDsply = "";
                    $dstCageColDsply = "";
                    $dsplyDstBalance = "";
                    $dsplySrcBalance = "";
                } else if ($trnsType == $trnsTypes[8] || $trnsType == $trnsTypes[9] || $trnsType == $trnsTypes[6]) {
                    $dsplyNwLine = "display:none;";
                    $dsplyPymntInfo = "";
                    $dsplyPymntCls1 = "col-md-6";
                    $dsplyPymntCls2 = "col-md-6";
                    $dsplyPymntCls3 = "col-md-6";
                    $dsplyPymntCls4 = "col-md-6";
                    $srcCageColDsply = "display:none;";
                    $dstCageColDsply = "display:none;";
                    if ($trnsType == $trnsTypes[8]) {
                        $srcVltCageDsply = "";
                        $dsplySrcItemState = "";
                        $dstVltCageDsply = "display:none;";
                        $dsplyDstItemState = "display:none;";
                    } else if ($trnsType == $trnsTypes[9]) {
                        $dsplySrcItemState = "display:none;";
                        $srcVltCageDsply = "display:none;";
                        $dstVltCageDsply = "";
                        $dsplyDstItemState = "";
                    } else if ($trnsType == $trnsTypes[6]) {
                        $srcVltCageDsply = "display:none;";
                        $dstVltCageDsply = "";
                        $srcCageColDsply = "display:none;";
                        $dstCageColDsply = "";
                        $dsplySrcItemState = "display:none;";
                        $dsplyDstItemState = "";
                    }
                } else if ($trnsType == $trnsTypes[10] || $trnsType == $trnsTypes[11]) {
                    $srcVltCageDsply = "";
                    $dstVltCageDsply = "";
                    $srcCageColDsply = "";
                    $dstCageColDsply = "";
                    $isSrcDstCagesRqrd = "";
                    if ($trnsType == $trnsTypes[10]) {
                        $srcVltCageDsply = "display:none;";
                        $dstVltCageDsply = "";
                        $srcCageColDsply = "display:none;";
                        $dstCageColDsply = "";
                        $dsplySrcBalance = "display:none;";
                        $dsplyDstBalance = "";
                        /* $srcVltCageDsply = "";
                          $dstVltCageDsply = "";
                          $srcCageColDsply = "";
                          $dstCageColDsply = ""; */
                        $isSrcDstCagesRqrd = "rqrdFld";
                        $dsplySrcItemState = "";
                        $dsplyDstItemState = "";
                        $dsplyLnRemark = "display:none;";
                    }
                } else if ($trnsType == $trnsTypes[4]) {
                    $srcVltCageDsply = "display:none;";
                    $dstVltCageDsply = "";
                    $srcCageColDsply = "display:none;";
                    $dstCageColDsply = "display:none;";
                    $dsplySrcItemState = "display:none;";
                    $dsplyDstItemState = "";
                } else if ($trnsType == $trnsTypes[5]) {
                    $srcVltCageDsply = "";
                    $dstVltCageDsply = "display:none;";
                    $srcCageColDsply = "display:none;";
                    $dstCageColDsply = "display:none;";
                    $dsplySrcItemState = "";
                    $dsplyDstItemState = "display:none;";
                } else if ($trnsType == $trnsTypes[7]) {
                    $srcVltCageDsply = "";
                    $dstVltCageDsply = "display:none;";
                    $srcCageColDsply = "";
                    $dstCageColDsply = "display:none;";
                    $dsplySrcItemState = "";
                    $dsplyDstItemState = "display:none;";
                }
                ?>
                <div class="tab-content" style="padding:5px !important;padding-top:7px !important;">
                    <div id="cashItmsNotes" class="tab-pane fadein active" style="border:none !important;padding:0px !important;">
                        <div class="row">
                            <div class="col-md-12">
                                <table class="table table-striped table-bordered table-responsive" id="oneVmsTrnsLnsTable" cellspacing="0" width="100%" style="width:100%;min-width: 900px !important;">
                                    <thead>
                                        <tr>
                                            <!--<th>No.</th>-->
                                            <th>Denomination</th>
                                            <th>Transaction Type</th>
                                            <th style="">Narration/Remark</th>
                                            <th style="text-align: center;max-width:70px;width:70px;">Trays</th>
                                            <th style="text-align: center;max-width:70px;width:70px;">Bundles</th>
                                            <!--<th>Pieces</th>-->
                                            <th>UOM</th>
                                            <th>Total Value</th>
                                            <th>Running Balance</th>
                                            <th>&nbsp;</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <?php
                                        $cntr = 0;
                                        $resultRw = get_One_VMSTrnsLines($sbmtdVmsTrnsHdrID, $sbmtdItmID, "Note");
                                        $maxNoRows = loc_db_num_rows($resultRw);
                                        $excludedItems = "";
                                        while ($cntr < $maxNoRows) {
                                            $itemID = -1;
                                            $trnsLnID = -1;
                                            $itemName = "";
                                            $baseUOMID = -1;
                                            $unitVal = 0.00;
                                            $qty = 0;
                                            $tray = 0;
                                            $bundle = 0;
                                            $baseUOMNm = "";
                                            $ttlRowVal = 0.00;
                                            $srcItemState = $dfltItemState;
                                            $dstItemState = $dfltItemState;
                                            $funcCrncyRate = 0;
                                            $lineDesc = "";
                                            $lineTrnsType = "";
                                            $runningBalance = 0;
                                            if ($rowRw = loc_db_fetch_array($resultRw)) {
                                                $trnsLnID = (float) $rowRw[0];
                                                $itemID = (int) $rowRw[2];
                                                $excludedItems .= $itemID . ", ";
                                                $itemName = $rowRw[29];
                                                $lineDesc = $rowRw[36];
                                                if (((int) $rowRw[4]) > 0) {
                                                    $lineTrnsType = "Issues";
                                                    $runningBalance = (float) $rowRw[35];
                                                } else if (((int) $rowRw[6]) > 0) {
                                                    $lineTrnsType = "Receipts";
                                                    $runningBalance = (float) $rowRw[37];
                                                }
                                                $unitVal = (float) $rowRw[9];
                                                $baseUOMNm = $rowRw[31];
                                                $baseUOMID = (int) $rowRw[26];
                                                $qty = (float) $rowRw[7];
                                                $tray = (float) $rowRw[46];
                                                $bundle = (float) $rowRw[47];
                                                $ttlRowVal = $qty * $unitVal;
                                                if ($trnsLnID > 0) {
                                                    $srcItemState = $rowRw[27];
                                                    $dstItemState = $rowRw[34];
                                                } else {
                                                    $srcItemState = $dfltItemState;
                                                    $dstItemState = $dfltItemState;
                                                }
                                                $funcCrncyRate = (float) $rowRw[21];
                                            }
                                            $cntr += 1;
                                            ?>
                                            <tr id="oneVmsTrnsRow_<?php echo $cntr; ?>">                                    
                                                <!--<td class="lovtd"><span><?php echo ($cntr); ?></span></td>-->
                                                <td class="lovtd">
                                                    <div class="input-group" style="width:100% !important;">
                                                        <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm" name="oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm" value="<?php echo $itemName; ?>" readonly="true" style="width:100% !important;">
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_ItmID" value="<?php echo $itemID; ?>" style="width:100% !important;">
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_BaseUoMID" value="<?php echo $baseUOMID; ?>" style="width:100% !important;">     
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $trnsLnID; ?>" style="width:100% !important;">                                                      
                                                        <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsRow<?php echo $cntr; ?>_ItmID', 'oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn1('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                });">
                                                            <span class="glyphicon glyphicon-th-list"></span>
                                                        </label>
                                                    </div>                                               
                                                </td> 
                                                <td class="lovtd"  style="">
                                                    <select data-placeholder="Select..." class="form-control chosen-select" id="oneVmsTrnsRow<?php echo $cntr; ?>_LnTrnsType" style="width:100% !important;" onchange="calcAllRowsTtlVals();">
                                                        <?php
                                                        $valslctdArry = array("", "");
                                                        $srchInsArrys = array("Receipts", "Issues");
                                                        for ($z = 0; $z < count($srchInsArrys); $z++) {
                                                            if ($lineTrnsType == $srchInsArrys[$z]) {
                                                                $valslctdArry[$z] = "selected";
                                                            }
                                                            ?>
                                                            <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                                        <?php } ?>
                                                    </select>
                                                </td>
                                                <td class="lovtd" style="">
                                                    <input type="text" class="form-control rqrdFld" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_LineDesc" name="oneVmsTrnsRow<?php echo $cntr; ?>_LineDesc" value="<?php echo $lineDesc; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?>>                                                    
                                                </td>
                                                <td class="lovtd">
                                                    <input type="text" class="form-control vmsCbTray" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Tray" name="oneVmsTrnsRow<?php echo $cntr; ?>_Tray" value="<?php
                                                    echo number_format($tray, 0);
                                                    ?>"  onchange="calcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsCbTrayKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: center;" <?php echo $mkReadOnly; ?>>                                            
                                                </td>
                                                <td class="lovtd">
                                                    <input type="text" class="form-control vmsCbBndl" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Bndl" name="oneVmsTrnsRow<?php echo $cntr; ?>_Bndl" value="<?php
                                                    echo number_format($bundle, 0);
                                                    ?>"  onchange="c
                                                                                alcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsCbBndlKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: center;" <?php echo $mkReadOnly; ?>>                                            
                                                </td>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;" onclick="ge
                                                            tOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="View QTY Breakdown"><?php echo $baseUOMNm; ?></button>
                                                </td>
                                                <td class="lovtd">
                                                    <input type="hidden" class="form-control vmsCbQty" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Qty" name="oneVmsTrnsRow<?php echo $cntr; ?>_Qty" value="<?php
                                                    echo number_format($qty, 0);
                                                    ?>"  onchange="calcCshBrkdwnRowVal1('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="v
                                                                                msTrnsFormKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                            
                                                    <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_UntVal" name="oneVmsTrnsRow<?php echo $cntr; ?>_UntVal" value="<?php echo $unitVal;
                                                    ?>" style="width:100% !important;" readonly="true">    
                                                    <input type="text" class="form-control vmsCbTtl" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsTrnsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                                    echo number_format($ttlRowVal, 2);
                                                    ?>" onchange="calcCshBrkdwnTtlVal1('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                </td> 
                                                <td class="lovtd">
                                                    <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_RnngBal" name="oneVmsTrnsRow<?php echo $cntr; ?>_RnngBal" value="<?php
                                                    echo number_format($runningBalance, 2);
                                                    ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                           <?php
                                                           if (strpos($capturedItemIDs, ";" . $itemID . ";") === FALSE) {
                                                               $capturedItemIDs = ";" . $itemID . ";";
                                                               $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmItm_" . $itemID . "\" name=\"oneVmsTrnsFrmItm_" . $itemID . "\" value=\"" . number_format($runningBalance,
                                                                               2) . "\" readonly=\"true\">";
                                                           }
                                                           ?>
                                                </td> 
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsTrnsLine('oneVmsTrnsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete Trns. Line">
                                                        <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            </tr>
                                            <?php
                                        }
                                        if (($voidedTrnsHdrID <= 0 || $orgnlVmsTrnsHdrID <= 0) && ($rqStatus == "Not Submitted" || $rqStatus == "Withdrawn" ||
                                                $rqStatus == "Rejected")) {
                                            $excludedItems = trim($excludedItems, ", ");
                                            $resultRw = get_Fresh_VMSTrnsLines($sbmtdVmsTrnsHdrID, $crncyID, $sbmtdShelfID, $excludedItems,
                                                    $sbmtdStoreID, $dfltItemState, $sbmtdShelfID, $sbmtdStoreID, $dfltItemState, $sbmtdItmID, "Note");
                                            $maxNoRows = loc_db_num_rows($resultRw);
                                            $nwcntr = 0;
                                            if ($sbmtdItmID > 0 && $maxNoRows == 1) {
                                                $maxNoRows = 5;
                                            }
                                            $itemID = -1;
                                            $trnsLnID = -1;
                                            $itemName = "";
                                            $baseUOMID = -1;
                                            $unitVal = 0.00;
                                            $qty = 0.00;
                                            $tray = 0;
                                            $bundle = 0;
                                            $baseUOMNm = "";
                                            $ttlRowVal = 0.00;
                                            $srcItemState = $dfltItemState;
                                            $dstItemState = $dfltItemState;
                                            $funcCrncyRate = 0;
                                            $runningBalance = 0;
                                            $lineDesc = "";
                                            $lineTrnsType = "Receipts";
                                            $rowRw = null;
                                            if ($sbmtdItmID > 0 && $nwcntr == 0) {
                                                $rowRw = loc_db_fetch_array($resultRw);
                                            }
                                            while ($nwcntr < $maxNoRows) {
                                                if ($sbmtdItmID > 0) {
                                                    /* Do Nothing */
                                                } else {
                                                    $rowRw = loc_db_fetch_array($resultRw);
                                                }

                                                $trnsLnID = (float) $rowRw[0];
                                                $itemID = (int) $rowRw[2];
                                                $itemName = $rowRw[29];
                                                $lineDesc = $rowRw[36];
                                                $runningBalance = (float) $rowRw[35];
                                                $unitVal = (float) $rowRw[9];
                                                $baseUOMNm = $rowRw[31];
                                                $baseUOMID = (int) $rowRw[26];
                                                $qty = (float) $rowRw[7];
                                                $tray = 0;
                                                $bundle = 0;
                                                $ttlRowVal = $qty * $unitVal;
                                                if ($trnsLnID > 0) {
                                                    $srcItemState = $rowRw[27];
                                                    $dstItemState = $rowRw[34];
                                                } else {
                                                    $srcItemState = $dfltItemState;
                                                    $dstItemState = $dfltItemState;
                                                }
                                                $funcCrncyRate = (float) $rowRw[21];
                                                $cntr += 1;
                                                $nwcntr += 1;
                                                ?>
                                                <tr id="oneVmsTrnsRow_<?php echo $cntr; ?>">                                    
                                                    <!--<td class="lovtd"><span><?php echo ($cntr); ?></span></td>-->
                                                    <td class="lovtd">
                                                        <div class="input-group" style="width:100% !important;">
                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm" name="oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm" value="<?php echo $itemName; ?>" readonly="true" style="width:100% !important;">
                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_ItmID" value="<?php echo $itemID; ?>" style="width:100% !important;">
                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_BaseUoMID" value="<?php echo $baseUOMID; ?>" style="width:100% !important;">     
                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $trnsLnID; ?>" style="width:100% !important;">                                                      
                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsRow<?php echo $cntr; ?>_ItmID', 'oneVmsTrnsRow<?php echo $cntr; ?>_ItemNm', 'clear', 1, '', function () {
                                                                        afterVMSItemSlctn1('oneVmsTrnsRow_<?php echo $cntr; ?>');
                                                                    });">
                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                            </label>
                                                        </div>                                               
                                                    </td>
                                                    <td class="lovtd" style="">
                                                        <select data-placeholder="Select..." class="form-control chosen-select" id="oneVmsTrnsRow<?php echo $cntr; ?>_LnTrnsType" style="width:100% !important;" onchange="calcAllRowsTtlVals();">
                                                            <?php
                                                            $valslctdArry = array("", "");
                                                            $srchInsArrys = array("Receipts", "Issues");
                                                            for ($z = 0; $z < count($srchInsArrys); $z++) {
                                                                if ($lineTrnsType == $srchInsArrys[$z]) {
                                                                    $valslctdArry[$z] = "selected";
                                                                }
                                                                ?>
                                                                <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                                            <?php } ?>
                                                        </select>
                                                    </td>
                                                    <td class="lovtd" style="">
                                                        <input type="text" class="form-control rqrdFld" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_LineDesc" name="oneVmsTrnsRow<?php echo $cntr; ?>_LineDesc" value="<?php echo $lineDesc; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?>>                                                    
                                                    </td>
                                                    <td class="lovtd">
                                                        <input type="text" class="form-control vmsCbTray" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Tray" name="oneVmsTrnsRow<?php echo $cntr; ?>_Tray" value="<?php
                                                        echo number_format($tray, 0);
                                                        ?>"  onchange="calcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsCbTrayKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: center;" <?php echo $mkReadOnly; ?>>                                            
                                                    </td>
                                                    <td class="lovtd">
                                                        <input type="text" class="form-control vmsCbBndl" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Bndl" name="oneVmsTrnsRow<?php echo $cntr; ?>_Bndl" value="<?php
                                                        echo number_format($bundle, 0);
                                                        ?>"  onchange="calcCshBrkdwnTryBndlRowVal('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsCbBndlKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: center;" <?php echo $mkReadOnly; ?>>                                            
                                                    </td>
                                                    <td class="lovtd">
                                                        <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;" onclick="getOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="View QTY Breakdown"><?php echo $baseUOMNm; ?></button>
                                                    </td>
                                                    <td class="lovtd">
                                                        <input type="hidden" class="form-control vmsCbQty" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_Qty" name="oneVmsTrnsRow<?php echo $cntr; ?>_Qty" value="<?php
                                                        echo number_format($qty, 0);
                                                        ?>"  onchange="calcCshBrkdwnRowVal1('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="v
                                                                                        msTrnsFormKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                            
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_UntVal" name="oneVmsTrnsRow<?php echo $cntr; ?>_UntVal" value="<?php echo $unitVal;
                                                        ?>" style="width:100% !important;" readonly="true">  
                                                        <input type="text" class="form-control vmsCbTtl" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsTrnsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                                        echo number_format($ttlRowVal, 2);
                                                        ?>" onchange="calcCshBrkdwnTtlVal1('oneVmsTrnsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                    </td> 
                                                    <td class="lovtd">
                                                        <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsRow<?php echo $cntr; ?>_RnngBal" name="oneVmsTrnsRow<?php echo $cntr; ?>_RnngBal" value="<?php
                                                        echo number_format($runningBalance, 2);
                                                        ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true">                                                        
                                                               <?php
                                                               if (strpos($capturedItemIDs, ";" . $itemID . ";") === FALSE) {
                                                                   $capturedItemIDs = ";" . $itemID . ";";
                                                                   $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmItm_" . $itemID . "\" name=\"oneVmsTrnsFrmItm_" . $itemID . "\" value=\"" . number_format($runningBalance,
                                                                                   2) . "\" readonly=\"true\">";
                                                               }
                                                               ?>                                                       
                                                    </td> 
                                                    <td class="lovtd">
                                                        <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsTrnsLine('oneVmsTrnsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete Trns. Line">
                                                            <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                        </button>
                                                    </td>
                                                </tr>
                                                <?php
                                            }
                                        }
                                        ?>
                                    </tbody>
                                </table>   
                            </div>
                        </div>
                    </div>
                    <div id="cashItmsCoins" class="tab-pane fadein hideNotice" style="border:none !important;padding:0px !important;">
                        <div class="row">
                            <div class="col-md-12">
                                <table class="table table-striped table-bordered table-responsive" id="oneVmsTrnsCoinsLnsTable" cellspacing="0" width="100%" style="width:100%;min-width: 900px !important;">
                                    <thead>
                                        <tr>
                                            <!--<th>No.</th>-->
                                            <th>Denomination</th>
                                            <th>Transaction Type</th>
                                            <th style="">Narration/Remark</th>
                                            <th>Pieces</th>
                                            <th>UOM</th>
                                            <th>Total Value</th>
                                            <th>Running Balance</th>
                                            <th>&nbsp;</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <?php
                                        $cntr = 0;
                                        $resultRw = get_One_VMSTrnsLines($sbmtdVmsTrnsHdrID, $sbmtdItmID, "Coin");
                                        $maxNoRows = loc_db_num_rows($resultRw);
                                        $excludedItems = "";
                                        while ($cntr < $maxNoRows) {
                                            $itemID = -1;
                                            $trnsLnID = -1;
                                            $itemName = "";
                                            $baseUOMID = -1;
                                            $unitVal = 0.00;
                                            $qty = 0.00;
                                            $baseUOMNm = "";
                                            $ttlRowVal = 0.00;
                                            $srcItemState = $dfltItemState;
                                            $dstItemState = $dfltItemState;
                                            $funcCrncyRate = 0;
                                            $lineDesc = "";
                                            $lineTrnsType = "";
                                            $runningBalance = 0;
                                            if ($rowRw = loc_db_fetch_array($resultRw)) {
                                                $trnsLnID = (float) $rowRw[0];
                                                $itemID = (int) $rowRw[2];
                                                $excludedItems .= $itemID . ", ";
                                                $itemName = $rowRw[29];
                                                $lineDesc = $rowRw[36];
                                                if (((int) $rowRw[4]) > 0) {
                                                    $lineTrnsType = "Issues";
                                                    $runningBalance = (float) $rowRw[35];
                                                } else if (((int) $rowRw[6]) > 0) {
                                                    $lineTrnsType = "Receipts";
                                                    $runningBalance = (float) $rowRw[37];
                                                }
                                                $unitVal = (float) $rowRw[9];
                                                $baseUOMNm = $rowRw[31];
                                                $baseUOMID = (int) $rowRw[26];
                                                $qty = (float) $rowRw[7];
                                                $ttlRowVal = $qty * $unitVal;
                                                if ($trnsLnID > 0) {
                                                    $srcItemState = $rowRw[27];
                                                    $dstItemState = $rowRw[34];
                                                } else {
                                                    $srcItemState = $dfltItemState;
                                                    $dstItemState = $dfltItemState;
                                                }
                                                $funcCrncyRate = (float) $rowRw[21];
                                            }
                                            $cntr += 1;
                                            ?>
                                            <tr id="oneVmsTrnsCoinsRow_<?php echo $cntr; ?>">                                    
                                                <!--<td class="lovtd"><span><?php echo ($cntr); ?></span></td>-->
                                                <td class="lovtd">
                                                    <div class="input-group" style="width:100% !important;">
                                                        <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm" value="<?php echo $itemName; ?>" readonly="true" style="width:100% !important;">
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItmID" value="<?php echo $itemID; ?>" style="width:100% !important;">
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_BaseUoMID" value="<?php echo $baseUOMID; ?>" style="width:100% !important;">     
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $trnsLnID; ?>" style="width:100% !important;">                                                      
                                                        <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItmID', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm', 'clear', 1, '', function () {
                                                                    afterVMSItemSlctn1('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                });">
                                                            <span class="glyphicon glyphicon-th-list"></span>
                                                        </label>
                                                    </div>                                               
                                                </td> 
                                                <td class="lovtd"  style="">
                                                    <select data-placeholder="Select..." class="form-control chosen-select" id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LnTrnsType" style="width:100% !important;" onchange="calcAllRowsTtlVals();">
                                                        <?php
                                                        $valslctdArry = array("", "");
                                                        $srchInsArrys = array("Receipts", "Issues");
                                                        for ($z = 0; $z < count($srchInsArrys); $z++) {
                                                            if ($lineTrnsType == $srchInsArrys[$z]) {
                                                                $valslctdArry[$z] = "selected";
                                                            }
                                                            ?>
                                                            <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                                        <?php } ?>
                                                    </select>
                                                </td>
                                                <td class="lovtd" style="">
                                                    <input type="text" class="form-control rqrdFld" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LineDesc" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LineDesc" value="<?php echo $lineDesc; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?>>                                                    
                                                </td>
                                                <td class="lovtd">
                                                    <input type="text" class="form-control vmsCbQty" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_Qty" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_Qty" value="<?php
                                                    echo number_format($qty, 0);
                                                    ?>"  onchange="calcCshBrkdwnRowVal1('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                            
                                                    <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_UntVal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_UntVal" value="<?php echo $unitVal;
                                                    ?>" style="width:100% !important;" readonly="true">                                                      
                                                </td>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;" onclick="getOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="View QTY Breakdown"><?php echo $baseUOMNm; ?></button>
                                                </td>
                                                <td class="lovtd">
                                                    <input type="text" class="form-control vmsCbTtl" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                                    echo number_format($ttlRowVal, 2);
                                                    ?>" onchange="calcCshBrkdwnTtlVal1('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                </td> 
                                                <td class="lovtd">
                                                    <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_RnngBal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_RnngBal" value="<?php
                                                    echo number_format($runningBalance, 2);
                                                    ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true"> 
                                                           <?php
                                                           if (strpos($capturedItemIDs, ";" . $itemID . ";") === FALSE) {
                                                               $capturedItemIDs = ";" . $itemID . ";";
                                                               $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmItm_" . $itemID . "\" name=\"oneVmsTrnsFrmItm_" . $itemID . "\" value=\"" . number_format($runningBalance,
                                                                               2) . "\" readonly=\"true\">";
                                                           }
                                                           ?>
                                                </td> 
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsTrnsLine('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete Trns. Line">
                                                        <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            </tr>
                                            <?php
                                        }
                                        if (($voidedTrnsHdrID <= 0 || $orgnlVmsTrnsHdrID <= 0) && ($rqStatus == "Not Submitted" || $rqStatus == "Withdrawn" ||
                                                $rqStatus == "Rejected")) {
                                            $excludedItems = trim($excludedItems, ", ");
                                            $resultRw = get_Fresh_VMSTrnsLines($sbmtdVmsTrnsHdrID, $crncyID, $sbmtdShelfID, $excludedItems,
                                                    $sbmtdStoreID, $dfltItemState, $sbmtdShelfID, $sbmtdStoreID, $dfltItemState, $sbmtdItmID, "Coin");
                                            $maxNoRows = loc_db_num_rows($resultRw);
                                            $nwcntr = 0;
                                            $maxNoRows = loc_db_num_rows($resultRw);
                                            if ($sbmtdItmID > 0 && $maxNoRows == 1) {
                                                $maxNoRows = 5;
                                            }
                                            $itemID = -1;
                                            $trnsLnID = -1;
                                            $itemName = "";
                                            $baseUOMID = -1;
                                            $unitVal = 0.00;
                                            $qty = 0.00;
                                            $baseUOMNm = "";
                                            $ttlRowVal = 0.00;
                                            $srcItemState = $dfltItemState;
                                            $dstItemState = $dfltItemState;
                                            $funcCrncyRate = 0;
                                            $runningBalance = 0;
                                            $lineDesc = "";
                                            $lineTrnsType = "Receipts";
                                            $rowRw = null;
                                            if ($sbmtdItmID > 0 && $nwcntr == 0) {
                                                $rowRw = loc_db_fetch_array($resultRw);
                                            }
                                            while ($nwcntr < $maxNoRows) {
                                                if ($sbmtdItmID > 0) {
                                                    /* Do Nothing */
                                                } else {
                                                    $rowRw = loc_db_fetch_array($resultRw);
                                                }
                                                $trnsLnID = (float) $rowRw[0];
                                                $itemID = (int) $rowRw[2];
                                                $itemName = $rowRw[29];
                                                $lineDesc = $rowRw[36];
                                                $runningBalance = (float) $rowRw[35];
                                                $unitVal = (float) $rowRw[9];
                                                $baseUOMNm = $rowRw[31];
                                                $baseUOMID = (int) $rowRw[26];
                                                $qty = (float) $rowRw[7];
                                                $ttlRowVal = $qty * $unitVal;
                                                if ($trnsLnID > 0) {
                                                    $srcItemState = $rowRw[27];
                                                    $dstItemState = $rowRw[34];
                                                } else {
                                                    $srcItemState = $dfltItemState;
                                                    $dstItemState = $dfltItemState;
                                                }
                                                $funcCrncyRate = (float) $rowRw[21];
                                                $cntr += 1;
                                                $nwcntr += 1;
                                                ?>
                                                <tr id="oneVmsTrnsCoinsRow_<?php echo $cntr; ?>">                                    
                                                    <!--<td class="lovtd"><span><?php echo ($cntr); ?></span></td>-->
                                                    <td class="lovtd">
                                                        <div class="input-group" style="width:100% !important;">
                                                            <input type="text" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm" value="<?php echo $itemName; ?>" readonly="true" style="width:100% !important;">
                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItmID" value="<?php echo $itemID; ?>" style="width:100% !important;">
                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_BaseUoMID" value="<?php echo $baseUOMID; ?>" style="width:100% !important;">     
                                                            <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TrnsLnID" value="<?php echo $trnsLnID; ?>" style="width:100% !important;">                                                      
                                                            <label class="btn btn-primary btn-file input-group-addon" onclick="getLovsPage('myLovModal', 'myLovModalTitle', 'myLovModalBody', 'Vault Item List', 'gnrlVmsOrgID', 'vmsTrnsCrncyNm', '', 'radio', true, '', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItmID', 'oneVmsTrnsCoinsRow<?php echo $cntr; ?>_ItemNm', 'clear', 1, '', function () {
                                                                        afterVMSItemSlctn1('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');
                                                                    });">
                                                                <span class="glyphicon glyphicon-th-list"></span>
                                                            </label>
                                                        </div>                                               
                                                    </td>
                                                    <td class="lovtd" style="">
                                                        <select data-placeholder="Select..." class="form-control chosen-select" id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LnTrnsType" style="width:100% !important;" onchange="calcAllRowsTtlVals();">
                                                            <?php
                                                            $valslctdArry = array("", "");
                                                            $srchInsArrys = array("Receipts", "Issues");
                                                            for ($z = 0; $z < count($srchInsArrys); $z++) {
                                                                if ($lineTrnsType == $srchInsArrys[$z]) {
                                                                    $valslctdArry[$z] = "selected";
                                                                }
                                                                ?>
                                                                <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                                            <?php } ?>
                                                        </select>
                                                    </td>
                                                    <td class="lovtd" style="">
                                                        <input type="text" class="form-control rqrdFld" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LineDesc" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_LineDesc" value="<?php echo $lineDesc; ?>" style="width:100% !important;" <?php echo $mkReadOnly; ?>>                                                    
                                                    </td>
                                                    <td class="lovtd">
                                                        <input type="text" class="form-control vmsCbQty" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_Qty" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_Qty" value="<?php
                                                        echo number_format($qty, 0);
                                                        ?>"  onchange="calcCshBrkdwnRowVal1('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                            
                                                        <input type="hidden" class="form-control" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_UntVal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_UntVal" value="<?php echo $unitVal;
                                                        ?>" style="width:100% !important;" readonly="true">                                                      
                                                    </td>
                                                    <td class="lovtd">
                                                        <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;font-weight:bold;" onclick="getOneUOMBrkdwnForm(-1, 22, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="View QTY Breakdown"><?php echo $baseUOMNm; ?></button>
                                                    </td>
                                                    <td class="lovtd">
                                                        <input type="text" class="form-control vmsCbTtl" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TtlVal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_TtlVal" value="<?php
                                                        echo number_format($ttlRowVal, 2);
                                                        ?>" onchange="calcCshBrkdwnTtlVal1('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" onkeypress="vmsTrnsFormTtlFldKeyPress(event, 'oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" style="width:100% !important;text-align: right;" <?php echo $mkReadOnly; ?>>                                                    
                                                    </td> 
                                                    <td class="lovtd">
                                                        <input type="text" class="form-control vmsCbRnngBal" aria-label="..." id="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_RnngBal" name="oneVmsTrnsCoinsRow<?php echo $cntr; ?>_RnngBal" value="<?php
                                                        echo number_format($runningBalance, 2);
                                                        ?>" style="width:100% !important;text-align: right;font-weight:bold;color:blue;" readonly="true">                                                        
                                                               <?php
                                                               if (strpos($capturedItemIDs, ";" . $itemID . ";") === FALSE) {
                                                                   $capturedItemIDs = ";" . $itemID . ";";
                                                                   $extrInputFlds .= "<input type=\"hidden\" id=\"oneVmsTrnsFrmItm_" . $itemID . "\" name=\"oneVmsTrnsFrmItm_" . $itemID . "\" value=\"" . number_format($runningBalance,
                                                                                   2) . "\" readonly=\"true\">";
                                                               }
                                                               ?>                                                       
                                                    </td> 
                                                    <td class="lovtd">
                                                        <button type="button" class="btn btn-default" style="margin: 0px !important;padding:0px 3px 2px 4px !important;" onclick="delVmsTrnsLine('oneVmsTrnsCoinsRow_<?php echo $cntr; ?>');" data-toggle="tooltip" data-placement="bottom" title="Delete Trns. Line">
                                                            <img src="cmn_images/no.png" style="height:15px; width:auto; position: relative; vertical-align: middle;">
                                                        </button>
                                                    </td>
                                                </tr>
                                                <?php
                                            }
                                        }
                                        ?>
                                    </tbody>
                                </table>   
                            </div>
                        </div>
                    </div>
                    <div id="rnngBalsHiddenFields">                        
                        <input type="hidden" id="oneVmsUomCnvFctr_Tray" value="<?php echo $trayCnvFctr; ?>"/>
                        <input type="hidden" id="oneVmsUomCnvFctr_Bndl" value="<?php echo $bndlCnvFctr; ?>"/>
                        <?php echo $extrInputFlds; ?>
                    </div>
                </div>
                <?php
            } else if ($vwtyp == 38) {
                //All Cage Transactions
                $sbmtdShelfID = isset($_POST['sbmtdShelfID']) ? cleanInputData($_POST['sbmtdShelfID']) : -1;
                $sbmtdStoreID = isset($_POST['sbmtdStoreID']) ? cleanInputData($_POST['sbmtdStoreID']) : -1;
                $sbmtdSiteID = isset($_POST['sbmtdSiteID']) ? cleanInputData($_POST['sbmtdSiteID']) : -1;
                $isFrmBnkng = isset($_POST['isFrmBnkng']) ? cleanInputData($_POST['isFrmBnkng']) : -1;
                $trnsType = "";
                $total = get_AllCageTrnsTtl($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $sbmtdShelfID);
                if ($pageNo > ceil($total / $lmtSze)) {
                    $pageNo = 1;
                } else if ($pageNo < 1) {
                    $pageNo = ceil($total / $lmtSze);
                }
                $curIdx = $pageNo - 1;
                $result = get_AllCageTrns($trnsType, $qUnathrzdOnly, $qInvalidOnly, $qStrtDte, $qEndDte, $srchFor, $sbmtdShelfID, $curIdx, $lmtSze);
                $cntr = 0;
                ?> 
                <form id='allVmsTrnsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row " style="margin-bottom:0px;padding:0px 15px 0px 15px !important;">
                        <div class="col-lg-5" style="padding:0px 1px 0px 1px !important;">
                            <div class="input-group">
                                <input class="form-control" id="allVmsTrnsSrchFor" type = "text" placeholder="Search For" value="<?php
                                echo trim(str_replace("%", " ", $srchFor));
                                ?>" onkeyup="enterKeyFuncAllCageTrns(event, '', '#cageTrns', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&isFrmBnkng=<?php echo $isFrmBnkng; ?>&sbmtdShelfID=<?php echo $sbmtdShelfID; ?>&sbmtdSiteID=<?php echo $sbmtdSiteID; ?>&sbmtdStoreID=<?php echo $sbmtdStoreID; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                <input id="allVmsTrnsPageNo" type = "hidden" value="<?php echo $pageNo; ?>">
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllCageTrns('clear', '#cageTrns', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&isFrmBnkng=<?php echo $isFrmBnkng; ?>&sbmtdShelfID=<?php echo $sbmtdShelfID; ?>&sbmtdSiteID=<?php echo $sbmtdSiteID; ?>&sbmtdStoreID=<?php echo $sbmtdStoreID; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </label>
                                <label class="btn btn-primary btn-file input-group-addon" onclick="getAllCageTrns('', '#cageTrns', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&isFrmBnkng=<?php echo $isFrmBnkng; ?>&sbmtdShelfID=<?php echo $sbmtdShelfID; ?>&sbmtdSiteID=<?php echo $sbmtdSiteID; ?>&sbmtdStoreID=<?php echo $sbmtdStoreID; ?>&srcMenu=<?php echo $srcMenu; ?>');">
                                    <span class="glyphicon glyphicon-search"></span>
                                </label>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsSrchIn" style="display:none;">
                                    <?php
                                    $valslctdArry = array("", "", "", "");
                                    $srchInsArrys = array("Transaction Number", "Description",
                                        "Transaction Type", "Transaction Status");

                                    for ($z = 0; $z < count($srchInsArrys); $z++) {
                                        if ($srchIn == $srchInsArrys[$z]) {
                                            $valslctdArry[$z] = "selected";
                                        }
                                        ?>
                                        <option value="<?php echo $srchInsArrys[$z]; ?>" <?php echo $valslctdArry[$z]; ?>><?php echo $srchInsArrys[$z]; ?></option>
                                    <?php } ?>
                                </select>
                                <span class="input-group-addon" style="max-width: 1px !important;padding:0px !important;width:1px !important;border:none !important;"></span>
                                <select data-placeholder="Select..." class="form-control chosen-select" id="allVmsTrnsDsplySze" style="min-width:65px !important;">                            
                                    <?php
                                    $valslctdArry = array("", "", "", "", "", "",
                                        "", "");
                                    $dsplySzeArry = array(1, 5, 10, 15, 30, 50, 100,
                                        500, 1000);
                                    for ($y = 0; $y < count($dsplySzeArry); $y++) {
                                        if ($lmtSze == $dsplySzeArry[$y]) {
                                            $valslctdArry[$y] = "selected";
                                        } else {
                                            $valslctdArry[$y] = "";
                                        }
                                        ?>
                                        <option value="<?php echo $dsplySzeArry[$y]; ?>" <?php echo $valslctdArry[$y]; ?>><?php echo $dsplySzeArry[$y]; ?></option>                            
                                        <?php
                                    }
                                    ?>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-5" style="padding:0px 1px 0px 1px !important;">
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text" id="allVmsTrnsStrtDate" name="allVmsTrnsStrtDate" value="<?php
                                    echo substr($qStrtDte, 0, 11);
                                    ?>" placeholder="Start Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div>
                            </div>
                            <div class="col-xs-6" style="padding:0px 1px 0px 0px !important;">
                                <div class="input-group date form_date" data-date="" data-date-format="dd-M-yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                                    <input class="form-control" size="16" type="text"  id="allVmsTrnsEndDate" name="allVmsTrnsEndDate" value="<?php
                                    echo substr($qEndDte, 0, 11);
                                    ?>" placeholder="End Date">
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div></div>                            
                        </div>
                        <div class="col-lg-2" style="padding:0px 1px 0px 1px !important;">
                            <nav aria-label="Page navigation">
                                <ul class="pagination" style="margin: 0px !important;">
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllCageTrns('previous', '#cageTrns', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&isFrmBnkng=<?php echo $isFrmBnkng; ?>&sbmtdShelfID=<?php echo $sbmtdShelfID; ?>&sbmtdSiteID=<?php echo $sbmtdSiteID; ?>&sbmtdStoreID=<?php echo $sbmtdStoreID; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="rhopagination" href="javascript:getAllCageTrns('next', '#cageTrns', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&isFrmBnkng=<?php echo $isFrmBnkng; ?>&sbmtdShelfID=<?php echo $sbmtdShelfID; ?>&sbmtdSiteID=<?php echo $sbmtdSiteID; ?>&sbmtdStoreID=<?php echo $sbmtdStoreID; ?>&srcMenu=<?php echo $srcMenu; ?>');" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <div class="row " style="margin-bottom:2px;padding:2px 15px 2px 15px !important">   
                        <div class="col-md-12" style="padding:2px 1px 2px 1px !important;border-top:1px solid #ddd;border-bottom:1px solid #ddd;">
                            <div class="col-md-3" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <?php
                                        $nonAprvdChekd = "";
                                        if ($qUnathrzdOnly == "true") {
                                            $nonAprvdChekd = "checked=\"true\"";
                                        }
                                        $notValidChekd = "";
                                        if ($qInvalidOnly == "true") {
                                            $notValidChekd = "checked=\"true\"";
                                        }
                                        ?>
                                        <input type="checkbox" class="form-check-input" onclick="getAllCageTrns('', '#cageTrns', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&isFrmBnkng=<?php echo $isFrmBnkng; ?>&sbmtdShelfID=<?php echo $sbmtdShelfID; ?>&sbmtdSiteID=<?php echo $sbmtdSiteID; ?>&sbmtdStoreID=<?php echo $sbmtdStoreID; ?>&srcMenu=<?php echo $srcMenu; ?>');" id="allVmsTrnsShwUnaprvd" name="allVmsTrnsShwUnaprvd" <?php echo $nonAprvdChekd; ?>>
                                        Unauthorized Trns.
                                    </label>
                                </div>                            
                            </div>
                            <div class="col-md-3" style="padding:5px 1px 0px 1px !important;">
                                <div class="form-check" style="font-size: 12px !important;">
                                    <label class="form-check-label">
                                        <input type="checkbox" class="form-check-input" onclick="getAllCageTrns('', '#cageTrns', 'grp=<?php echo $group; ?>&typ=<?php echo $type; ?>&pg=<?php echo $pgNo; ?>&vtyp=<?php echo $vwtyp; ?>&isFrmBnkng=<?php echo $isFrmBnkng; ?>&sbmtdShelfID=<?php echo $sbmtdShelfID; ?>&sbmtdSiteID=<?php echo $sbmtdSiteID; ?>&sbmtdStoreID=<?php echo $sbmtdStoreID; ?>&srcMenu=<?php echo $srcMenu; ?>');" id="allVmsTrnsShwInvld" name="allVmsTrnsShwInvld"  <?php echo $notValidChekd; ?>>
                                        Only Invalid Trns.
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-4" style="padding:0px 1px 0px 1px !important;">
                                &nbsp;
                            </div>                            
                            <div class="col-md-2">&nbsp;</div>
                        </div>
                    </div>
                </form>
                <form id='allVmsTrnsHdrsForm' action='' method='post' accept-charset='UTF-8'>
                    <div class="row"> 
                        <div  class="col-md-12">
                            <table class="table table-striped table-bordered table-responsive" id="allVmsTrnsHdrsTable" cellspacing="0" width="100%" style="width:100%;">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <th>...</th>	
                                        <th>Reference No.</th>
                                        <th>Trns. Date</th>
                                        <th>Remark/Narration</th>
                                        <th style="text-align:right;">CUR.</th>
                                        <th style="text-align:right;min-width: 100px;width: 100px;">Transaction Amount</th>
                                        <th>Authorization Status</th>
                                        <!--<th>Validity Status</th>-->
                                        <?php if ($canDelTrns === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                        <?php if ($canVwRcHstry === true) { ?>
                                            <th>...</th>
                                        <?php } ?>
                                    </tr>
                                </thead>
                                <tbody>
                                    <?php
                                    while ($row = loc_db_fetch_array($result)) {
                                        /**/
                                        $cntr += 1;
                                        ?>
                                        <tr id="allVmsTrnsHdrsRow_<?php echo $cntr; ?>">                                    
                                            <td class="lovtd"><?php echo ($curIdx * $lmtSze) + ($cntr); ?></td>    
                                            <td class="lovtd">
                                                <?php
                                                $vwtypNo = 34;
                                                if ($row[3] != "Direct Cage/Shelve Transaction") {
                                                    $vwtypNo = 20;
                                                }
                                                ?>
                                                <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Edit Transaction" 
                                                        onclick="getOneVmsTrnsForm(<?php echo $row[0]; ?>, '<?php echo $trnsType; ?>', <?php echo $vwtypNo; ?>, 'ShowDialog',<?php echo $vwtyp; ?>, 'allVmsTrnsHdrsRow_<?php echo $cntr; ?>', '<?php echo $srcMenu; ?>',<?php echo $isFrmBnkng; ?>, <?php echo $sbmtdShelfID; ?>, <?php echo $sbmtdSiteID; ?>, <?php echo $sbmtdStoreID; ?>);" style="padding:2px !important;">
                                                    <img src="cmn_images/edit32.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                </button>
                                            </td>
                                            <td class="lovtd">
                                                <?php echo $row[2]; ?>
                                                <input type="hidden" id="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" name="allVmsTrnsHdrsRow<?php echo $cntr; ?>_HdrID" value="<?php echo $row[0]; ?>">
                                                <input type="hidden" id="allVmsTrnsHdrsRow<?php echo $cntr; ?>_TrnsType" name="allVmsTrnsHdrsRow<?php echo $cntr; ?>_TrnsType" value="<?php echo $row[3]; ?>">
                                            </td>
                                            <td class="lovtd"><?php echo $row[1]; ?></td>
                                            <td class="lovtd"><?php echo "[" . $row[3] . "] " . $row[4]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;"><?php echo $row[31]; ?></td>
                                            <td class="lovtd" style="text-align:right;font-weight:bold;color:blue;"><?php
                                                echo number_format((float) $row[21], 2);
                                                ?>
                                            </td>
                                            <td class="lovtd"><?php echo $row[10]; ?></td>
                                            <!--<td class="lovtd"><?php echo $row[12]; ?></td>-->
                                            <?php if ($canDelTrns === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="Delete Transaction" onclick="delVmsTrnsHdr('allVmsTrnsHdrsRow_<?php echo $cntr; ?>')" style="padding:2px !important;">
                                                        <img src="cmn_images/no.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                            <?php if ($canVwRcHstry === true) { ?>
                                                <td class="lovtd">
                                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="bottom" title="View Record History" onclick="getRecHstry('<?php
                                                    echo urlencode(encrypt1(($row[0] . "|vms.vms_transactions_hdr|trans_hdr_id"), $smplTokenWord1));
                                                    ?>');" style="padding:2px !important;">
                                                        <img src="cmn_images/Information.png" style="height:20px; width:auto; position: relative; vertical-align: middle;">
                                                    </button>
                                                </td>
                                            <?php } ?>
                                        </tr>
                                        <?php
                                    }
                                    ?>
                                </tbody>
                            </table>
                        </div>                     
                    </div>
                </form>
                <?php
            } else if ($vwtyp == 42) {
                header("content-type:application/json");
                $sbmtdItemID = isset($_POST['sbmtdItemID']) ? cleanInputData($_POST['sbmtdItemID']) : -1;
                $crntVltID = isset($_POST['crntVltID']) ? cleanInputData($_POST['crntVltID']) : -1;
                $crntCageID = isset($_POST['crntCageID']) ? cleanInputData($_POST['crntCageID']) : -1;
                $itmState = getGnrlRecNm("inv.inv_shelf", "line_id", "dflt_item_state", $crntCageID);
                $itmUnitVal = (float) getGnrlRecNm("inv.inv_itm_list", "item_id", "orgnl_selling_price", $sbmtdItemID);
                $arr_content['UnitVal'] = $itmUnitVal;
                $arr_content['BaseUoMID'] = (int) getGnrlRecNm("inv.inv_itm_list", "item_id", "base_uom_id", $sbmtdItemID);
                $arr_content['BalsB4'] = getStoreLstTotBls($crntVltID, $crntCageID, $sbmtdItemID, $itmState) * $itmUnitVal;
                $errMsg = "Success";
                $arr_content['message'] = "<span style=\"color:green;\"><i class=\"fa fa-check\" aria-hidden=\"true\"></i></span>" . $errMsg;
                echo json_encode($arr_content);
                exit();
            }
        }
    }
}    